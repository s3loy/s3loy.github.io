<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>CUDA-and-pytorch</title>
    <url>/CUDA-and-pytorch/</url>
    <content><![CDATA[<h1 id="åœ¨winç³»ç»Ÿä¸Šå®‰è£…pytorch"><a class="markdownIt-Anchor" href="#åœ¨winç³»ç»Ÿä¸Šå®‰è£…pytorch"></a> åœ¨winç³»ç»Ÿä¸Šå®‰è£…pytorch</h1>
<h2 id="step-1-å®‰è£…conda"><a class="markdownIt-Anchor" href="#step-1-å®‰è£…conda"></a> Step 1 å®‰è£…Conda</h2>
<p><a href="https://www.anaconda.com/download/success">Download Now | Anaconda</a></p>
<p><code>Anaconda</code>å’Œ<code>Miniconda</code>éƒ½å¯ä»¥ï¼Œå‰è€…ä¸œè¥¿å…¨ä¸€äº›ï¼Œåè€…æ›´ä¸ºè½»ä¾¿ã€‚</p>
<p>å±•ç¤ºçš„æ˜¯<code>Anaconda</code></p>
<p><s>æ­¤å¤„ä¸‹è½½æ¨èä½¿ç”¨é­”æ³•</s></p>
<blockquote>
<p>å¦‚æœç½‘ç»œä¸æ”¯æŒé‚£å°±ä½¿ç”¨<a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/?C=M&amp;O=D">Index of /anaconda/archive/ | æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™ | Tsinghua Open Source Mirror</a></p>
</blockquote>
<p><code>Anaconda3-2024.10-1-Windows-x86_64.exe</code>ä¸‹è½½å¥½ä¹‹åæ‰“å¼€</p>
<p>å¦‚æœä¸æƒ³é…ç½®ç¯å¢ƒå˜é‡å°±é€‰<code>All Users</code>å§ã€‚</p>
<p><img src="/CUDA-and-pytorch/image-20250218235016076-1740145143701-1.png" alt></p>
<p>ç„¶åæ¨èæ‰¾ä¸ªä¸æ˜¯Cç›˜çš„åœ°æ–¹ä¸‹</p>
<p><img src="/CUDA-and-pytorch/image-20250218235145695-1740145143701-2.png" alt></p>
<p><img src="/CUDA-and-pytorch/image-20250218235447531-1740145143701-4.png" alt></p>
<p>å®‰è£…æ—¶é—´ä¹Ÿè®¸ä¼šæ¯”è¾ƒé•¿ï¼Œåˆ«æ€¥ã€‚</p>
<p>è£…å¥½ä¹‹åå¯ä»¥æµ‹è¯•ä¸€ä¸‹<code>conda --version</code>,æœ‰è¿™æ ·çš„ååº”å°±å¥½ï¼Œç‰ˆæœ¬ä¸ä¸€å®šä¸€æ ·ã€‚</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">conda <span class="literal">--version</span></span><br><span class="line">conda <span class="number">25.1</span>.<span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>å› ä¸ºæˆ‘åé¢è¦ç©<code>d2l</code>ï¼Œæ‰€ä»¥å°±ç”¨<code>conda</code>åˆ›å»ºäº†ä¸€ä¸ªç¯å¢ƒ</p>
<p><code>conda create -n d2l python=3.10</code></p>
<p>è¿™è¾¹<code>conda</code>æ˜¯æŒ‡ä»¤å¤´ï¼Œ<code>-n</code> æ˜¯æŒ‡å®šæ–°ç¯å¢ƒçš„åç§°ï¼Œ<code>d2l</code> æ˜¯ä½ æƒ³è¦ä¸ºæ–°ç¯å¢ƒæŒ‡å®šçš„åç§°,<code>python=3.10</code>è¿™éƒ¨åˆ†æŒ‡å®šäº†<code>python</code>çš„ç‰ˆæœ¬ï¼Œä¸è¿‡å…¶å®ä¸ä¸€å®šè¦<code>3.10</code>ï¼Œ<code>pytorch</code>å®˜ç½‘ä¸Šæç¤ºçš„æ˜¯<code>Latest PyTorch requires Python 3.9 or later.</code>ï¼ŒåŠ ä¸Šå­¦é•¿çˆ±ç”¨<code>3.10</code>ï¼Œé‚£å°±å®šäº†ã€‚<s>ps:3.10å’Œ3.9åˆ°åº•è°å¤§å‘¢</s></p>
<p>åˆ›å»ºå®Œæˆä¼šæç¤ºçš„ï¼Œåé¢éœ€è¦æ¿€æ´»ä¸€ä¸‹</p>
<p><code>conda activate d2l</code></p>
<p>é¡ºåˆ©çš„è¯å°±èƒ½çœ‹åˆ°<code>(d2l)</code>åœ¨è¾“å…¥çš„å‰é¢ã€‚</p>
<p>ç”¨çš„å·®ä¸å¤šä¹‹åè¦å›åˆ°åŸæ¥çš„ç¯å¢ƒçš„è¯å°±</p>
<p><code>conda deactivate</code></p>
<p>è¿™æ ·å°±å›å»äº†ï¼Œä¸è¿‡ä½ ç›´æ¥å…³æ‰é‡å¼€ä¹Ÿä¸æ˜¯ä¸è¡Œï¼ˆ</p>
<h2 id="step-2-cuda"><a class="markdownIt-Anchor" href="#step-2-cuda"></a> Step 2 CUDA</h2>
<p>ç¬”è®°æœ¬ç”µè„‘çš„GPUæ˜¯<code>Nvidia 4060 laptop</code></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">&gt;nvidia-smi</span><br><span class="line">Wed Feb <span class="number">19</span> <span class="number">00</span>:<span class="number">07</span>:<span class="number">11</span> <span class="number">2025</span></span><br><span class="line">+-----------------------------------------------------------------------------------------+</span><br><span class="line">| NVIDIA-SMI <span class="number">571</span>.<span class="number">96</span>                 Driver Version: <span class="number">571</span>.<span class="number">96</span>         CUDA Version: <span class="number">12</span>.<span class="number">8</span>     |</span><br><span class="line">|-----------------------------------------+------------------------+----------------------+</span><br><span class="line">| GPU  Name                  Driver-Model | Bus-Id          Disp.A | Volatile Uncorr. ECC |</span><br><span class="line">| Fan  Temp   Perf          Pwr:Usage/Cap |           Memory-Usage | GPU-Util  Compute M. |</span><br><span class="line">|                                         |                        |               MIG M. |</span><br><span class="line">|=========================================+========================+======================|</span><br><span class="line">|   <span class="number">0</span>  NVIDIA GeForce RTX <span class="number">4060</span> ...  WDDM  |   <span class="number">00000000</span>:<span class="number">01</span>:<span class="number">00</span>.<span class="number">0</span>  On |                  N/A |</span><br><span class="line">| N/A   <span class="number">39</span>C    P8              <span class="number">3</span>W /  <span class="number">115</span>W |    <span class="number">1533</span>MiB /   <span class="number">8188</span>MiB |      <span class="number">0</span>%      Default |</span><br><span class="line">|                                         |                        |                  N/A |</span><br><span class="line">+-----------------------------------------+------------------------+----------------------+</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è¿™è¾¹å¯ä»¥çœ‹åˆ°CUDAçš„ç‰ˆæœ¬</p>
<p>åˆ°<a href="https://developer.nvidia.com/cuda-downloads%E9%87%8C%E9%9D%A2%E5%8E%BB">https://developer.nvidia.com/cuda-downloadsé‡Œé¢å»</a></p>
<p><img src="/CUDA-and-pytorch/image-20250219000853416-1740145143701-3.png" alt></p>
<p>ç„¶åæ ¹æ®ç‰ˆæœ¬é€‰ä¸€ä¸‹ï¼Œæœ¬åœ°è·‘åˆ«ä¹±é€‰<code>network</code></p>
<p>ç„¶åç‚¹<code>Download</code>å°±è¡Œäº†</p>
<p><img src="/CUDA-and-pytorch/image-20250219001030527-1740145143701-5.png" alt></p>
<p>ä¸‹è½½å¥½çš„okå°±è¡Œäº†ï¼Œè¿™æ­¥åªæ˜¯è§£å‹ä¸æ˜¯å®‰è£…ã€‚</p>
<p>ç½‘ä¸Šçœ‹æ•™ç¨‹è¯´</p>
<p><img src="/CUDA-and-pytorch/image-20250219001140813-1740145143701-6.png" alt></p>
<p>æˆ‘ç¡®å®æ²¡å‹¾è¿™ä¸ªï¼Œä½†æ˜¯æˆ‘ä¸‹é¢çš„å‡ ä¸ªé€‰é¡¹è¿˜æ˜¯éƒ½è£…äº†ã€‚</p>
<p>å®‰è£…å¥½ä¹‹åç†è®ºä¸Šç¯å¢ƒå˜é‡æ˜¯åœ¨çš„ï¼Œå¯ä»¥å…ˆéªŒè¯ä¸€ä¸‹</p>
<p>åœ¨C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v12.8  (ä½ å®‰è£…çš„ä½ç½®ï¼Œé»˜è®¤æ˜¯è¿™æ ·)æ‰“å¼€ç»ˆç«¯</p>
<p>æŒ‰é¡ºåºè¾“å…¥</p>
<p><code>cd .\extras\demo_suite</code></p>
<p><code>.\bandwidthTest.exe</code></p>
<p><code>.\deviceQuery.exe</code></p>
<p>å›è½¦æµ‹è¯•</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># cd .\extras\demo_suite</span></span><br><span class="line"><span class="comment"># .\bandwidthTest.exe</span></span><br><span class="line">[<span class="type">CUDA</span> <span class="type">Bandwidth</span> <span class="type">Test</span>] - Starting...</span><br><span class="line">Running on...</span><br><span class="line"></span><br><span class="line"> Device <span class="number">0</span>: NVIDIA GeForce RTX <span class="number">4060</span> Laptop GPU</span><br><span class="line"> Quick Mode</span><br><span class="line"></span><br><span class="line"> Host to Device Bandwidth, <span class="number">1</span> Device(s)</span><br><span class="line"> PINNED Memory Transfers</span><br><span class="line">   Transfer Size (Bytes)        Bandwidth(MB/s)</span><br><span class="line">   <span class="number">33554432</span>                     <span class="number">12883.8</span></span><br><span class="line"></span><br><span class="line"> Device to Host Bandwidth, <span class="number">1</span> Device(s)</span><br><span class="line"> PINNED Memory Transfers</span><br><span class="line">   Transfer Size (Bytes)        Bandwidth(MB/s)</span><br><span class="line">   <span class="number">33554432</span>                     <span class="number">12835.4</span></span><br><span class="line"></span><br><span class="line"> Device to Device Bandwidth, <span class="number">1</span> Device(s)</span><br><span class="line"> PINNED Memory Transfers</span><br><span class="line">   Transfer Size (Bytes)        Bandwidth(MB/s)</span><br><span class="line">   <span class="number">33554432</span>                     <span class="number">196311.5</span></span><br><span class="line"></span><br><span class="line">Result = PASS</span><br><span class="line"></span><br><span class="line">NOTE: The CUDA Samples are not meant <span class="keyword">for</span> performance measurements. Results may vary when GPU Boost is enabled.</span><br><span class="line"><span class="comment"># .\deviceQuery.exe</span></span><br><span class="line">C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v12.<span class="number">8</span>\extras\demo_suite\deviceQuery.exe Starting...</span><br><span class="line"></span><br><span class="line"> CUDA Device Query (Runtime API)</span><br><span class="line"></span><br><span class="line">Detected <span class="number">1</span> CUDA Capable device(s)</span><br><span class="line"></span><br><span class="line">Device <span class="number">0</span>: <span class="string">&quot;NVIDIA GeForce RTX 4060 Laptop GPU&quot;</span></span><br><span class="line">  CUDA Driver Version / Runtime Version          <span class="number">12.8</span> / <span class="number">12.8</span></span><br><span class="line">  CUDA Capability Major/Minor version number:    <span class="number">8.9</span></span><br><span class="line">  Total amount of global memory:                 <span class="number">8188</span> MBytes (<span class="number">8585216000</span> bytes)</span><br><span class="line">MapSMtoCores <span class="keyword">for</span> SM <span class="number">8.9</span> is undefined.  Default to use <span class="number">128</span> Cores/SM</span><br><span class="line">MapSMtoCores <span class="keyword">for</span> SM <span class="number">8.9</span> is undefined.  Default to use <span class="number">128</span> Cores/SM</span><br><span class="line">  (<span class="number">24</span>) Multiprocessors, (<span class="number">128</span>) CUDA Cores/<span class="built_in">MP</span>:     <span class="number">3072</span> CUDA Cores</span><br><span class="line">  GPU Max Clock rate:                            <span class="number">2370</span> MHz (<span class="number">2.37</span> GHz)</span><br><span class="line">  Memory Clock rate:                             <span class="number">8001</span> Mhz</span><br><span class="line">  Memory Bus Width:                              <span class="number">128</span><span class="literal">-bit</span></span><br><span class="line">  L2 Cache Size:                                 <span class="number">33554432</span> bytes</span><br><span class="line">  Maximum Texture Dimension Size (x,y,z)         <span class="number">1</span>D=(<span class="number">131072</span>), <span class="number">2</span>D=(<span class="number">131072</span>, <span class="number">65536</span>), <span class="number">3</span>D=(<span class="number">16384</span>, <span class="number">16384</span>, <span class="number">16384</span>)</span><br><span class="line">  Maximum Layered <span class="number">1</span>D Texture Size, (num) layers  <span class="number">1</span>D=(<span class="number">32768</span>), <span class="number">2048</span> layers</span><br><span class="line">  Maximum Layered <span class="number">2</span>D Texture Size, (num) layers  <span class="number">2</span>D=(<span class="number">32768</span>, <span class="number">32768</span>), <span class="number">2048</span> layers</span><br><span class="line">  Total amount of constant memory:               zu bytes</span><br><span class="line">  Total amount of shared memory per block:       zu bytes</span><br><span class="line">  Total number of registers available per block: <span class="number">65536</span></span><br><span class="line">  Warp size:                                     <span class="number">32</span></span><br><span class="line">  Maximum number of threads per multiprocessor:  <span class="number">1536</span></span><br><span class="line">  Maximum number of threads per block:           <span class="number">1024</span></span><br><span class="line">  Max dimension size of a thread block (x,y,z): (<span class="number">1024</span>, <span class="number">1024</span>, <span class="number">64</span>)</span><br><span class="line">  Max dimension size of a grid size    (x,y,z): (<span class="number">2147483647</span>, <span class="number">65535</span>, <span class="number">65535</span>)</span><br><span class="line">  Maximum memory pitch:                          zu bytes</span><br><span class="line">  Texture alignment:                             zu bytes</span><br><span class="line">  Concurrent <span class="built_in">copy</span> and kernel execution:          Yes with <span class="number">1</span> <span class="built_in">copy</span> engine(s)</span><br><span class="line">  Run time limit on kernels:                     Yes</span><br><span class="line">  Integrated GPU sharing Host Memory:            No</span><br><span class="line">  Support host page<span class="literal">-locked</span> memory mapping:       Yes</span><br><span class="line">  Alignment requirement <span class="keyword">for</span> Surfaces:            Yes</span><br><span class="line">  Device has ECC support:                        Disabled</span><br><span class="line">  CUDA Device Driver Mode (TCC or WDDM):         WDDM (Windows Display Driver Model)</span><br><span class="line">  Device supports Unified Addressing (UVA):      Yes</span><br><span class="line">  Device supports Compute Preemption:            Yes</span><br><span class="line">  Supports Cooperative Kernel Launch:            Yes</span><br><span class="line">  Supports MultiDevice Co<span class="literal">-op</span> Kernel Launch:      No</span><br><span class="line">  Device PCI Domain ID / Bus ID / location ID:   <span class="number">0</span> / <span class="number">1</span> / <span class="number">0</span></span><br><span class="line">  Compute Mode:</span><br><span class="line">     &lt; Default (multiple host threads can use ::cudaSetDevice() with device simultaneously) &gt;</span><br><span class="line"></span><br><span class="line">deviceQuery, CUDA Driver = CUDART, CUDA Driver Version = <span class="number">12.8</span>, CUDA Runtime Version = <span class="number">12.8</span>, NumDevs = <span class="number">1</span>, Device0 = NVIDIA GeForce RTX <span class="number">4060</span> Laptop GPU</span><br><span class="line">Result = PASS</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæœ‰è¿™æ ·çš„å°±è¯´æ˜æˆåŠŸäº†</p>
<p>è¯•ä¸€ä¸‹<code>nvcc -V</code></p>
<p><img src="/CUDA-and-pytorch/876ee5e3b3266e2d56bdd5b30a2809cf-1739898997106-5-1740145143702-7.png" alt></p>
<h2 id="step-3-å®‰è£…pytorch"><a class="markdownIt-Anchor" href="#step-3-å®‰è£…pytorch"></a> Step 3 å®‰è£…Pytorch</h2>
<p>è¿™ä¸ªå®‰è£…é çš„æ˜¯<code>conda</code>è™šæ‹Ÿç¯å¢ƒä¸‹çš„<code>pip3</code>å®‰è£…çš„å®Œæ•´<code>pytorch</code>,å¹¶æ²¡æœ‰ä½¿ç”¨<code>docker</code>é•œåƒæ¥éƒ¨ç½²,ä¸è¿‡å¦‚æœåˆ°äº†éœ€è¦ç§Ÿæ˜¾å¡çš„æ—¶å€™ï¼Œå°±éœ€è¦å†å»å­¦ä¹ ä½¿ç”¨<code>docker</code>æ¥éƒ¨ç½²äº†ã€‚</p>
<p>å…ˆ<code>conda activate d2l</code> æ¿€æ´»ä¸€ä¸‹è‡ªå·±çš„ç¯å¢ƒ  <em>åˆ«ç¬¨åˆ°è‡ªå·±ç¯å¢ƒåå­—éƒ½æ²¡æ”¹ï¼Œå½“ç„¶ä½ ä¹Ÿå«d2lé‚£æˆ‘æ²¡æ„è§</em></p>
<p><a href="https://pytorch.org/">PyTorch</a>æ‰“å¼€è¿™ä¸ªç½‘ç«™ï¼Œ</p>
<p><img src="/CUDA-and-pytorch/image-20250219004200322-1740145143702-9.png" alt></p>
<p>é€‰å¥½è¦ä¸‹è½½çš„ï¼Œå¤åˆ¶å¥½ä¸‹é¢è¿™ä¸ª<code>Run this Command</code></p>
<p>åˆ°å‰é¢å‡†å¤‡å¥½çš„<code>conda</code>ç¯å¢ƒå»å®‰è£…</p>
<p><s>éœ€è¦é­”æ³•ï¼Œå¦åˆ™å¯èƒ½ä¼šç»™ä½ è£…ç–¯ï¼Œè€Œä¸”åœ¨æŸ¥é˜…èµ„æ–™çš„æ—¶å€™å‘ç°ç”¨é•œåƒæœ‰æ¦‚ç‡ä¸èƒ½è¯†åˆ«pytorchï¼Œå³ä½¿ä½ çš„pytorchæ˜¯ä½ çš„pytorchï¼Œä½†æ˜¯ä½ çš„pytorchä¸æ˜¯ä½ çš„pytorch</s></p>
<p><img src="/CUDA-and-pytorch/6dbdeed45283dcad3a1c1f91a769f6b3-1740145143702-8.png" alt></p>
<p>æŠ¥è­¦å‘Šä¸ç”¨æ…Œå¼ ï¼Œä¸å½±å“ä½¿ç”¨ã€‚å¦‚æœæ˜¯è¿™æ ·å°±å®‰è£…å¥½äº†ã€‚</p>
<p>ä¸‹é¢å°±æµ‹è¯•ä¸€ä¸‹<code>pytorch</code>çš„ä½¿ç”¨æƒ…å†µ</p>
<p><code>python</code></p>
<p><code>&gt;&gt;&gt; import torch</code></p>
<p>ç¬¬ä¸€æ¬¡åº”è¯¥ä¼šç­‰å¾ˆä¹…ï¼Œåˆ«ä¹±åŠ¨å°±æ˜¯äº†</p>
<p><code>&gt;&gt;&gt; torch.cuda.is_available()</code></p>
<p>è¿”å›<code>true</code></p>
<p><code>&gt;&gt;&gt; import torch</code></p>
<p><code>&gt;&gt;&gt; torch.cuda.device_count()</code></p>
<p>è¿”å›<code>1</code></p>
<p>ä»£è¡¨è¯†åˆ«åˆ°ä¸€å¼ æ˜¾å¡</p>
<p>å¤§æ¦‚å°±æ´»äº†ã€‚</p>
<p><img src="/CUDA-and-pytorch/28dcd3a09bb512143de46b300b9d95e7-1740145143702-10.png" alt></p>
<p><code>exit()</code>é€€å‡ºå»</p>
<p>ç®€å•çš„<code>pytorch</code>å°±è£…å¥½äº†</p>
]]></content>
      <categories>
        <category>Machine Learning</category>
      </categories>
      <tags>
        <tag>Pytorch</tag>
      </tags>
  </entry>
  <entry>
    <title>Nginx-enginex</title>
    <url>/Nginx-enginex/</url>
    <content><![CDATA[<h2 id="installation"><a class="markdownIt-Anchor" href="#installation"></a> installation</h2>
<p><strong>on arch linux</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> pacman -Syu</span><br><span class="line">$ <span class="built_in">sudo</span> pacman -S nginx</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">sudo</span> systemctl start nginx.service</span><br><span class="line">$ <span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> nginx.service</span><br><span class="line"></span><br><span class="line"><span class="comment"># $ sudo systemctl status nginx.service</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s3loy@archlinux ~]$ ip a</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class="line">    <span class="built_in">link</span>/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::1/128 scope host noprefixroute </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">2: ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000</span><br><span class="line">    <span class="built_in">link</span>/ether 00:0c:29:4f:fa:7f brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    altname enp2s1</span><br><span class="line">    altname enx000c294ffa7f</span><br><span class="line">    inet 192.168.209.128/24 brd 192.168.209.255 scope global dynamic noprefixroute ens33</span><br><span class="line">       valid_lft 1592sec preferred_lft 1367sec</span><br><span class="line">    inet6 fe80::98ef:2b0d:cbd3:648c/64 scope <span class="built_in">link</span> </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">       </span><br><span class="line"> <span class="comment">#  inet 192.168.209.128</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ä¸»æœºç›´æ¥è®¿é—®<a href="http://192.168.209.128/">http://192.168.209.128/</a>    å°±å¯ä»¥çœ‹åˆ°<code>Welcome to nginx!</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> /etc/nginx/nginx.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#user http;</span></span><br><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line"><span class="comment">#error_log  logs/error.log;</span></span><br><span class="line"><span class="comment">#error_log  logs/error.log  notice;</span></span><br><span class="line"><span class="comment">#error_log  logs/error.log  info;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#pid        logs/nginx.pid;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Load all installed modules</span></span><br><span class="line">include modules.d/*.conf;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#log_format  main  &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span></span><br><span class="line">    <span class="comment">#                  &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span></span><br><span class="line">    <span class="comment">#                  &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#access_log  logs/access.log  main;</span></span><br><span class="line"></span><br><span class="line">    sendfile        on;</span><br><span class="line">    <span class="comment">#tcp_nopush     on;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#keepalive_timeout  0;</span></span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#gzip  on;</span></span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  localhost;</span><br><span class="line"></span><br><span class="line">        <span class="comment">#charset koi8-r;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">#access_log  logs/host.access.log  main;</span></span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            root   /usr/share/nginx/html;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">#error_page  404              /404.html;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># redirect server error pages to the static page /50x.html</span></span><br><span class="line">        <span class="comment">#</span></span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   /usr/share/nginx/html;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># proxy the PHP scripts to Apache listening on 127.0.0.1:80</span></span><br><span class="line">        <span class="comment">#</span></span><br><span class="line">        <span class="comment">#location ~ \.php$ &#123;</span></span><br><span class="line">        <span class="comment">#    proxy_pass   http://127.0.0.1;</span></span><br><span class="line">        <span class="comment">#&#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span></span><br><span class="line">        <span class="comment">#</span></span><br><span class="line">        <span class="comment">#location ~ \.php$ &#123;</span></span><br><span class="line">        <span class="comment">#    root           html;</span></span><br><span class="line">        <span class="comment">#    fastcgi_pass   127.0.0.1:9000;</span></span><br><span class="line">        <span class="comment">#    fastcgi_index  index.php;</span></span><br><span class="line">        <span class="comment">#    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span></span><br><span class="line">        <span class="comment">#    include        fastcgi_params;</span></span><br><span class="line">        <span class="comment">#&#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># deny access to .htaccess files, if Apache&#x27;s document root</span></span><br><span class="line">        <span class="comment"># concurs with nginx&#x27;s one</span></span><br><span class="line">        <span class="comment">#</span></span><br><span class="line">        <span class="comment">#location ~ /\.ht &#123;</span></span><br><span class="line">        <span class="comment">#    deny  all;</span></span><br><span class="line">        <span class="comment">#&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># another virtual host using mix of IP-, name-, and port-based configuration</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment">#server &#123;</span></span><br><span class="line">    <span class="comment">#    listen       8000;</span></span><br><span class="line">    <span class="comment">#    listen       somename:8080;</span></span><br><span class="line">    <span class="comment">#    server_name  somename  alias  another.alias;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#    location / &#123;</span></span><br><span class="line">    <span class="comment">#        root   html;</span></span><br><span class="line">    <span class="comment">#        index  index.html index.htm;</span></span><br><span class="line">    <span class="comment">#    &#125;</span></span><br><span class="line">    <span class="comment">#&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># HTTPS server</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment">#server &#123;</span></span><br><span class="line">    <span class="comment">#    listen       443 ssl;</span></span><br><span class="line">    <span class="comment">#    server_name  localhost;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#    ssl_certificate      cert.pem;</span></span><br><span class="line">    <span class="comment">#    ssl_certificate_key  cert.key;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#    ssl_session_cache    shared:SSL:1m;</span></span><br><span class="line">    <span class="comment">#    ssl_session_timeout  5m;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#    ssl_ciphers  HIGH:!aNULL:!MD5;</span></span><br><span class="line">    <span class="comment">#    ssl_prefer_server_ciphers  on;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#    location / &#123;</span></span><br><span class="line">    <span class="comment">#        root   html;</span></span><br><span class="line">    <span class="comment">#        index  index.html index.htm;</span></span><br><span class="line">    <span class="comment">#    &#125;</span></span><br><span class="line">    <span class="comment">#&#125;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><code>block</code>
<ul>
<li><code>http { ... }</code>: é…ç½® <code>HTTP </code>ç›¸å…³åŠŸèƒ½çš„é¡¶çº§å—ã€‚å‡ ä¹æ‰€æœ‰çš„ Web æœåŠ¡é…ç½®éƒ½åœ¨è¿™é‡Œé¢ã€‚</li>
<li><code>server { ... }</code>: å®šä¹‰ä¸€ä¸ªâ€œè™šæ‹Ÿä¸»æœºâ€,å¯ä»¥åœ¨ä¸€ä¸ª <code>Nginx</code> é‡Œé…ç½®å¤šä¸ª <code>server</code> å—ï¼Œæ¥æ‰˜ç®¡ä¸åŒçš„ç½‘ç«™</li>
<li><code>location / { ... }</code>: å®šä¹‰å½“è¯·æ±‚çš„ URL åŒ¹é…æŸä¸ªè·¯å¾„æ—¶ï¼Œåº”è¯¥å¦‚ä½•å¤„ç†ã€‚<code>location / </code>è¡¨ç¤ºåŒ¹é…æ‰€æœ‰è¯·æ±‚ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">mkdir</span> -p ~/my-website/images</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;&lt;h1&gt;hello,this is our first website&lt;/h1&gt;&quot;</span> &gt; ~/my-website/index.html</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;&lt;p&gt;this is about&lt;/p&gt;&quot;</span> &gt; ~/my-website/about.html</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">sudo</span> <span class="built_in">cp</span> /etc/nginx/nginx.conf /etc/nginx/nginx.conf.bak</span><br><span class="line"><span class="comment"># backup</span></span><br><span class="line"></span><br><span class="line">$ <span class="built_in">sudo</span> vim /etc/nginx/nginx.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¿®æ”¹</span></span><br><span class="line"><span class="comment"># ... http å—å†…éƒ¨ ...</span></span><br><span class="line">server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  localhost; </span><br><span class="line">    <span class="comment"># ... å…¶ä»–é…ç½® ...</span></span><br><span class="line">    location / &#123;</span><br><span class="line">        root   /home/s3loy/my-website;</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"># ... å…¶ä»–é…ç½® ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line"></span><br><span class="line">$ <span class="built_in">sudo</span> nginx -t</span><br><span class="line"><span class="comment">#é…ç½®æˆåŠŸå³å¯</span></span><br><span class="line"></span><br><span class="line">$ <span class="built_in">sudo</span> systemctl reload nginx</span><br></pre></td></tr></table></figure>
<p>è®¿é—®<a href="http://192.168.209.128/about.html">http://192.168.209.128/about.html</a>   å‘ç°<code>403 Forbidden</code></p>
<p>æ­¤æ—¶è€ƒè™‘åˆ°æ–‡ä»¶å¤¹ä¸ºæ–°å»ºä¸”å¤„äº<code>whoami</code>ç”¨æˆ·ä¸‹ï¼Œæ‰€ä»¥</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ps aux | grep <span class="string">&quot;nginx: worker process&quot;</span></span><br><span class="line">http        2179  0.0  0.1  15388  5140 ?        S    16:13   0:00 nginx: worker process</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">chmod</span> o+x /home/s3loy</span><br><span class="line">$ <span class="built_in">ls</span> -ld ~/my-website</span><br><span class="line">drwxr-xr-x 3 s3loy s3loy 4096 Jul 23 16:10 /home/s3loy/my-website</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ç›´æ¥é‡è¿”é“¾æ¥å°±å‘ç°é¡µé¢å¯ä»¥åˆ·æ–°å‡ºæ¥äº†</p>
<p><strong>å½“ç„¶è¿™ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œè¯·ä¸è¦æŠŠç½‘ç«™æ”¾åœ¨è‡ªå·±çš„ç›®å½•å½“ä¸­</strong>ã€‚å‡ºäºéšç§å’Œå®‰å…¨è€ƒè™‘ï¼Œé»˜è®¤æƒé™éå¸¸ä¸¥æ ¼</p>
<p>åœ¨<code>arch linux</code>å½“ä¸­ï¼Œ<code>http</code>æ¨èæ”¾åœ¨<code>/srv/http</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">ls</span> -ld /srv/http</span><br><span class="line">drwxr-xr-x 2 root root 4096 May  3 19:26 /srv/http</span><br></pre></td></tr></table></figure>
<p>åœ¨å…¶ä»–å¾ˆå¤š <code>Linux</code> ç³»ç»Ÿä¸Šï¼Œå¸¸ç”¨ç›®å½•æ˜¯ <code>/var/www/html</code></p>
<h2 id="feature"><a class="markdownIt-Anchor" href="#feature"></a> feature</h2>
<h3 id="nginx-çš„çµé­‚äº‹ä»¶é©±åŠ¨çš„å¼‚æ­¥éé˜»å¡æ¶æ„"><a class="markdownIt-Anchor" href="#nginx-çš„çµé­‚äº‹ä»¶é©±åŠ¨çš„å¼‚æ­¥éé˜»å¡æ¶æ„"></a> <strong>Nginx çš„çµé­‚</strong>:<strong>äº‹ä»¶é©±åŠ¨çš„å¼‚æ­¥éé˜»å¡æ¶æ„</strong></h3>
<p>æˆ‘ä»¬ä»¥è¿™ä¸ªç®€å•çš„é™æ€ç½‘é¡µä¸ºä¾‹ï¼Œå½“ä½ è¯·æ±‚é™æ€æ–‡ä»¶æ—¶ï¼Œ<code>Nginx</code> çš„ <code>Worker</code> è¿›ç¨‹æ¥æ”¶åˆ°è¯·æ±‚ï¼Œå‘Šè¯‰æ“ä½œç³»ç»Ÿå†…æ ¸ï¼šâ€œæŠŠ <code>~/my-website/index.html</code> è¿™ä¸ªæ–‡ä»¶çš„æ•°æ®å‘ç»™è¿™ä¸ªç”¨æˆ·â€ã€‚ç„¶å <code>Worker</code> è¿›ç¨‹å°±å»å¤„ç†å…¶ä»–è¯·æ±‚äº†ã€‚å½“å†…æ ¸æŠŠæ–‡ä»¶æ•°æ®å‡†å¤‡å¥½åï¼Œä¼šé€šçŸ¥ <code>Worker</code> è¿›ç¨‹ï¼Œ<code>Worker</code> è¿›ç¨‹å†æŠŠæ•°æ®å‘å›ç»™æµè§ˆå™¨ã€‚è¿™ä¸ªè¿‡ç¨‹æå…¶é«˜æ•ˆï¼Œå› ä¸ºå®ƒåˆ©ç”¨äº†æ“ä½œç³»ç»Ÿçš„ <code>sendfile</code> æœºåˆ¶ï¼Œé¿å…äº†æ•°æ®åœ¨å†…æ ¸å’Œç”¨æˆ·ç©ºé—´ä¹‹é—´çš„å¤šæ¬¡å¤åˆ¶ï¼Œ<code>CPU</code> å ç”¨æä½ã€‚</p>
<hr>
<blockquote>
<p><code>sendfile</code>æœºåˆ¶</p>
</blockquote>
<p><strong>ç”¨æˆ·ç©ºé—´ (<code>User Space</code>)</strong> å’Œ <strong>å†…æ ¸ç©ºé—´ (<code>Kernel Space</code>)</strong>ã€‚</p>
<ul>
<li><strong>ç”¨æˆ·ç©ºé—´ï¼š</strong> ä½ çš„åº”ç”¨ç¨‹åºï¼ˆå¦‚ <code>Nginx</code> è¿›ç¨‹ï¼‰è¿è¡Œçš„åœ°æ–¹ã€‚</li>
<li><strong>å†…æ ¸ç©ºé—´ï¼š</strong> æ“ä½œç³»ç»Ÿå†…æ ¸è¿è¡Œçš„åœ°æ–¹ï¼Œå®ƒèƒ½ç›´æ¥æ“ä½œç¡¬ä»¶ï¼ˆå¦‚ç£ç›˜ã€ç½‘å¡ï¼‰ã€‚</li>
</ul>
<h4 id="ä¼ ç»Ÿ-read-write-æ–¹å¼"><a class="markdownIt-Anchor" href="#ä¼ ç»Ÿ-read-write-æ–¹å¼"></a> ä¼ ç»Ÿ read() + write() æ–¹å¼</h4>
<p>å½“ <code>Nginx</code> éœ€è¦å‘é€ä¸€ä¸ªé™æ€æ–‡ä»¶ç»™å®¢æˆ·ç«¯æ—¶ï¼Œä¼ ç»Ÿçš„ I/O æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong><code>read()</code> ç³»ç»Ÿè°ƒç”¨ï¼š</strong> <code>Nginx</code> è¿›ç¨‹å‘èµ· <code>read() </code>ç³»ç»Ÿè°ƒç”¨ï¼Œè¯·æ±‚è¯»å–æ–‡ä»¶ã€‚è¿™ä¼šå¯¼è‡´ä¸€æ¬¡ä»<strong>ç”¨æˆ·ç©ºé—´åˆ°å†…æ ¸ç©ºé—´</strong>çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚</li>
<li><strong>ç¬¬ä¸€æ¬¡æ•°æ®å¤åˆ¶ (<code>DMA</code>)ï¼š</strong> <code>CPU</code> æŒ‡ç¤º <code>DMA </code>æ§åˆ¶å™¨å°†æ–‡ä»¶å†…å®¹ä»ç£ç›˜è¯»å–åˆ°<strong>å†…æ ¸ç©ºé—´çš„ç¼“å†²åŒº</strong>ã€‚</li>
<li><strong>ç¬¬äºŒæ¬¡æ•°æ®å¤åˆ¶ (<code>CPU</code>)ï¼š</strong> <code>CPU</code> å°†æ•°æ®ä»<strong>å†…æ ¸ç©ºé—´ç¼“å†²åŒº</strong>å¤åˆ¶åˆ°<strong>ç”¨æˆ·ç©ºé—´çš„ <code>Nginx </code>ç¼“å†²åŒº</strong>ã€‚<code>read()</code> è°ƒç”¨è¿”å›ï¼Œå‘ç”Ÿä¸€æ¬¡ä»<strong>å†…æ ¸ç©ºé—´åˆ°ç”¨æˆ·ç©ºé—´</strong>çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚</li>
<li><strong><code>write()</code> ç³»ç»Ÿè°ƒç”¨ï¼š</strong> <code>Nginx</code> è¿›ç¨‹æ‹¿åˆ°æ•°æ®åï¼Œå‘èµ· <code>write() </code>ç³»ç»Ÿè°ƒç”¨ï¼Œè¯·æ±‚å‘é€æ•°æ®ã€‚å†æ¬¡å‘ç”Ÿä¸€æ¬¡ä»<strong>ç”¨æˆ·ç©ºé—´åˆ°å†…æ ¸ç©ºé—´</strong>çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚</li>
<li><strong>ç¬¬ä¸‰æ¬¡æ•°æ®å¤åˆ¶ (<code>CPU</code>)ï¼š</strong> <code>CPU</code> å°†æ•°æ®ä»<strong>ç”¨æˆ·ç©ºé—´çš„<code>Nginx</code>ç¼“å†²åŒº</strong>å¤åˆ¶åˆ°<strong>å†…æ ¸ç©ºé—´çš„ <code>Socket </code>ç¼“å†²åŒº</strong>ï¼ˆä¸ç½‘å¡å…³è”ï¼‰ã€‚</li>
<li><strong>ç¬¬å››æ¬¡æ•°æ®å¤åˆ¶ (<code>DMA</code>)ï¼š</strong> <code>DMA</code> æ§åˆ¶å™¨å°†æ•°æ®ä»<strong>å†…æ ¸ç©ºé—´çš„ <code>Socket</code> ç¼“å†²åŒº</strong>å¤åˆ¶åˆ°ç½‘å¡ç¡¬ä»¶ä¸­ï¼Œç„¶åå‘é€å‡ºå»ã€‚<code>write() </code>è°ƒç”¨è¿”å›ï¼Œå†æ¬¡å‘ç”Ÿä¸€æ¬¡ä»<strong>å†…æ ¸ç©ºé—´åˆ°ç”¨æˆ·ç©ºé—´</strong>çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚</li>
</ol>
<h4 id="sendfile-æ–¹å¼"><a class="markdownIt-Anchor" href="#sendfile-æ–¹å¼"></a> sendfile() æ–¹å¼</h4>
<p><code>sendfile()</code> æ˜¯ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨ï¼Œå®ƒæŠŠä¸Šè¿°è¿‡ç¨‹å¤§å¤§ç®€åŒ–äº†ã€‚</p>
<ol>
<li><strong><code>sendfile() </code>ç³»ç»Ÿè°ƒç”¨ï¼š</strong> <code>Nginx</code> è¿›ç¨‹å‘èµ·<code>sendfile()</code>ç³»ç»Ÿè°ƒç”¨ï¼Œå®ƒåŒ…å«äº†è¾“å…¥ï¼ˆæ–‡ä»¶æè¿°ç¬¦ï¼‰å’Œè¾“å‡ºï¼ˆ<code>Socket </code>æè¿°ç¬¦ï¼‰çš„ä¿¡æ¯ã€‚å‘ç”Ÿä¸€æ¬¡ä»<strong>ç”¨æˆ·ç©ºé—´åˆ°å†…æ ¸ç©ºé—´</strong>çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚</li>
<li><strong>ç¬¬ä¸€æ¬¡æ•°æ®å¤åˆ¶ (<code>DMA</code>)ï¼š</strong> <code>DMA</code> æ§åˆ¶å™¨å°†æ–‡ä»¶å†…å®¹ä»ç£ç›˜è¯»å–åˆ°<strong>å†…æ ¸ç©ºé—´çš„ç¼“å†²åŒº</strong>ã€‚</li>
<li><strong>ç¬¬äºŒæ¬¡æ•°æ®å¤åˆ¶ (<code>CPU</code>)ï¼š</strong> <code>CPU</code> å°†æ•°æ®<strong>ç›´æ¥ä»å†…æ ¸ç©ºé—´çš„è¯»ç¼“å†²åŒºå¤åˆ¶åˆ°å†…æ ¸ç©ºé—´çš„<code>Socket</code>ç¼“å†²åŒº</strong>ã€‚æ•°æ®å®Œå…¨æ²¡æœ‰è¿›å…¥è¿‡ç”¨æˆ·ç©ºé—´ï¼</li>
<li><strong>ç¬¬ä¸‰æ¬¡æ•°æ®å¤åˆ¶ (<code>DMA</code>)ï¼š</strong> <code>DMA </code>æ§åˆ¶å™¨å°†æ•°æ®ä»<strong>å†…æ ¸ç©ºé—´çš„ <code>Socket </code>ç¼“å†²åŒº</strong>å¤åˆ¶åˆ°ç½‘å¡ç¡¬ä»¶ä¸­ã€‚<code>sendfile() </code>è°ƒç”¨è¿”å›ï¼Œå‘ç”Ÿä¸€æ¬¡ä»<strong>å†…æ ¸ç©ºé—´åˆ°ç”¨æˆ·ç©ºé—´</strong>çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚</li>
</ol>
<p>æ€»ç»“ä¸€ä¸‹é«˜æ•ˆä¹‹å¤„ï¼š</p>
<ul>
<li><strong>2 æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢</strong>ï¼šå‡å°‘äº†ä¸€åŠã€‚</li>
<li><strong>3 æ¬¡æ•°æ®å¤åˆ¶</strong>ï¼šæ›´é‡è¦çš„æ˜¯ï¼Œ<strong>CPU é©±åŠ¨çš„æ•°æ®å¤åˆ¶åªæœ‰ 1 æ¬¡ï¼Œä¸”å®Œå…¨åœ¨å†…æ ¸ç©ºé—´å†…å®Œæˆ</strong>ï¼Œé¿å…äº†æ•°æ®åœ¨å†…æ ¸å’Œç”¨æˆ·ç©ºé—´ä¹‹é—´çš„æ‹·è´ã€‚</li>
</ul>
<p><strong>çœŸæ­£çš„â€œé›¶æ‹·è´â€ (<code>Zero-Copy</code>)ï¼š</strong><br>
åœ¨æ›´ç°ä»£çš„ç¡¬ä»¶ä¸Šï¼Œ<code>sendfile()</code> è¿˜èƒ½åšåˆ°æ›´æè‡´çš„ä¼˜åŒ–ã€‚å¦‚æœç½‘å¡æ”¯æŒ â€œ<code>Scatter-gather DMA</code>â€ åŠŸèƒ½ï¼Œé‚£ä¹ˆç¬¬ 3 æ­¥çš„ <code>CPU </code>å¤åˆ¶ä¹Ÿå¯ä»¥çœæ‰ã€‚å†…æ ¸åªéœ€è¦æŠŠæ•°æ®åœ¨ç¼“å†²åŒºçš„ä½ç½®å’Œé•¿åº¦ç­‰æè¿°ä¿¡æ¯ä¼ é€’ç»™ç½‘å¡ï¼Œç½‘å¡å°±å¯ä»¥è‡ªå·±å»å†…æ ¸ç¼“å†²åŒºé‡Œæ‹‰å–æ•°æ®ã€‚æ­¤æ—¶ï¼Œæ•°æ®å¤åˆ¶å°±åªå‰©ä¸¤æ¬¡<code> DMA</code> æ“ä½œï¼Œ<code>CPU </code>å®Œå…¨ä¸å‚ä¸æ•°æ®æ‹·è´ï¼Œè¿™å°±æ˜¯çœŸæ­£çš„â€œé›¶æ‹·è´â€ã€‚</p>
<blockquote>
<p><code>sendfile</code> åœ¨<code>http</code>å—ä¸­ï¼Œå¯è‡ªè¡Œå¯»æ‰¾ã€‚<code>/etc/nginx/nginx.conf</code></p>
</blockquote>
<h3 id="master-worker"><a class="markdownIt-Anchor" href="#master-worker"></a> Master-Worker</h3>
<p>è™½ç„¶æˆ‘ä»¬ç”¨ <code>sudo</code> æ¥å¯åŠ¨å’Œç®¡ç† <code>Nginx</code>ï¼Œä½†ä¸ºäº†å®‰å…¨ï¼Œ<code>Nginx</code> çš„ <code>Master </code>è¿›ç¨‹åœ¨å¯åŠ¨åï¼Œä¼šåˆ›å»ºä¸€äº›ä½æƒé™çš„ <strong><code>Worker</code> è¿›ç¨‹</strong>ã€‚çœŸæ­£å»å¤„ç†ç”¨æˆ·è¯·æ±‚ã€è¯»å–ç½‘ç«™æ–‡ä»¶çš„ï¼Œæ­£æ˜¯è¿™äº› <code>Worker</code> è¿›ç¨‹ã€‚</p>
<p>åœ¨ <code>Arch Linux</code> ä¸Šï¼Œè¿™ä¸ªä½æƒé™ç”¨æˆ·é€šå¸¸æ˜¯<code> http</code>ã€‚åœ¨å…¶ä»–ç³»ç»Ÿï¼ˆå¦‚ <code>Debian/Ubuntu</code>ï¼‰ä¸Šå¯èƒ½æ˜¯ <code>www-data</code>,å¯ä»¥æŠŠ<code> Nginx</code> çš„ <code>Worker</code> è¿›ç¨‹æƒ³è±¡æˆä¸€ä¸ªåå« <code>http</code> çš„æ™®é€šè®¿å®¢ã€‚</p>
<p><code>403 Forbidden</code> å°±æ˜¯å› ä¸ºè¿™ä¸ªè®¿å®¢åœ¨æŸä¸ªç¯èŠ‚è¢«æ‹¦ä½äº†</p>
<h4 id="master-process"><a class="markdownIt-Anchor" href="#master-process"></a> Master Process</h4>
<p><code>Master</code> è¿›ç¨‹æ˜¯ <code>Nginx </code>çš„å…¥å£å’Œç®¡ç†è€…ï¼Œå®ƒä»¥<code> root</code> ç”¨æˆ·æƒé™å¯åŠ¨ï¼Œå› ä¸ºå®ƒéœ€è¦æ‰§è¡Œä¸€äº›ç‰¹æƒæ“ä½œã€‚å®ƒçš„æ ¸å¿ƒèŒè´£åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>è¯»å–å’ŒéªŒè¯é…ç½®ï¼š</strong> å¯åŠ¨æ—¶ï¼Œå®ƒä¼šè¯»å– <code>nginx.conf </code>å¹¶æ£€æŸ¥è¯­æ³•æ˜¯å¦æ­£ç¡®ã€‚</li>
<li><strong>ç»‘å®šç‰¹æƒç«¯å£ï¼š</strong> ç›‘å¬ä½äº <code>1024</code> çš„ç«¯å£ï¼ˆå¦‚ <code>80</code>, <code>443</code>ï¼‰éœ€è¦ <code>root</code> æƒé™ã€‚<code>Master</code> è¿›ç¨‹è´Ÿè´£ç»‘å®šè¿™äº›ç«¯å£ã€‚</li>
<li><strong>åˆ›å»ºå’Œç®¡ç† Worker è¿›ç¨‹ï¼š</strong> æ ¹æ®é…ç½® (<code>worker_processes</code>) åˆ›å»ºæŒ‡å®šæ•°é‡çš„ <code>Worker</code> è¿›ç¨‹ã€‚è¿™äº› <code>Worker </code>è¿›ç¨‹ä¼š<strong>ç»§æ‰¿</strong>å·²ç»æ‰“å¼€çš„ç›‘å¬ç«¯å£ã€‚</li>
<li><strong>ä»¥ä½æƒé™è¿è¡Œ Workerï¼š</strong> å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œ<code>Master</code> è¿›ç¨‹ä¼šä»¥ä¸€ä¸ªæ™®é€šç”¨æˆ·ï¼ˆå¦‚<code>http</code>æˆ– <code>www-data</code>ï¼‰çš„èº«ä»½æ¥å¯åŠ¨ <code>Worker</code> è¿›ç¨‹ã€‚è¿™æ ·ï¼Œå³ä½¿ <code>Worker</code> è¿›ç¨‹è¢«å˜¿å£³åˆ©ç”¨ï¼Œå…¶ç ´åèƒ½åŠ›ä¹Ÿè¢«é™åˆ¶åœ¨è¯¥ç”¨æˆ·çš„æƒé™èŒƒå›´å†…ã€‚ğŸ¤”</li>
<li><strong>å¤„ç†æ§åˆ¶ä¿¡å·ï¼š</strong> <code>Master</code> è¿›ç¨‹è´Ÿè´£å“åº”æ¥è‡ªç®¡ç†å‘˜çš„æŒ‡ä»¤ï¼Œä¾‹å¦‚ï¼š
<ul>
<li><code>nginx -s reload</code>: å¹³æ»‘é‡è½½é…ç½®ã€‚</li>
<li><code>nginx -s quit</code>: ä¼˜é›…åœ°å…³é—­ã€‚</li>
<li><code>nginx -s stop</code>: å¿«é€Ÿå…³é—­ã€‚</li>
</ul>
</li>
<li><strong>ç›‘æ§ Worker çŠ¶æ€ï¼š</strong> æŒç»­ç›‘æ§ <code>Worker</code> è¿›ç¨‹çš„å¥åº·çŠ¶å†µï¼Œå¦‚æœæŸä¸ª <code>Worker</code> å¼‚å¸¸é€€å‡ºï¼Œ<code>Master </code>ä¼šç«‹å³é‡æ–°å¯åŠ¨ä¸€ä¸ªæ–°çš„ <code>Worker</code> æ¥æ›¿ä»£å®ƒã€‚</li>
<li><strong>æ—¥å¿—æ–‡ä»¶ç®¡ç†ï¼š</strong> è´Ÿè´£æ‰“å¼€æ—¥å¿—æ–‡ä»¶ã€‚</li>
</ul>
<p><strong>å…³é”®ç‚¹ï¼š</strong> <code>Master</code> è¿›ç¨‹ä¸å¤„ç†ä»»ä½•å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚å®ƒåªåšç®¡ç†å·¥ä½œã€‚</p>
<h4 id="2-worker-processes"><a class="markdownIt-Anchor" href="#2-worker-processes"></a> 2. Worker Processes</h4>
<p>Worker è¿›ç¨‹æ˜¯çœŸæ­£å¤„ç†ä¸šåŠ¡çš„â€œåŠ³åŠ¨åŠ›â€ã€‚å®ƒä»¬ç”± Master è¿›ç¨‹åˆ›å»ºï¼Œå¹¶ä»¥ä½æƒé™ç”¨æˆ·è¿è¡Œã€‚</p>
<p><strong>æ ¸å¿ƒå·¥ä½œæœºåˆ¶ï¼šäº‹ä»¶é©±åŠ¨ + å¼‚æ­¥éé˜»å¡ I/O</strong></p>
<ol>
<li><strong>å…±äº«ç›‘å¬å¥—æ¥å­— (<code>Shared Listening Sockets</code>):</strong><br>
æ‰€æœ‰ <code>Worker</code> è¿›ç¨‹éƒ½ä» <code>Master</code> è¿›ç¨‹ç»§æ‰¿äº†åŒä¸€ä¸ªç›‘å¬å¥—æ¥å­—ï¼ˆ<code>listening socket</code>ï¼‰ã€‚å½“ä¸€ä¸ªæ–°çš„å®¢æˆ·ç«¯è¿æ¥è¯·æ±‚åˆ°è¾¾æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šå”¤é†’è¿™äº›æ­£åœ¨ç­‰å¾…çš„ <code>Worker</code> è¿›ç¨‹ã€‚</li>
<li><strong>äº‰æŠ¢è¿æ¥ (<code>accept_mutex</code>):</strong><br>
ä¸ºäº†é¿å…å¤šä¸ª <code>Worker</code> åŒæ—¶å»å¤„ç†åŒä¸€ä¸ªæ–°è¿æ¥ï¼ˆå³â€œæƒŠç¾¤æ•ˆåº”â€ <code>Thundering Herd</code>ï¼‰ï¼Œ<code>Nginx </code>å†…éƒ¨æœ‰ä¸€ä¸ª <code>accept_mutex</code> é”ã€‚åªæœ‰ä¸€ä¸ª <code>Worker </code>èƒ½æˆåŠŸè·å–åˆ°è¿™ä¸ªé”ï¼Œç„¶åè°ƒç”¨ <code>accept() </code>æ¥å»ºç«‹è¿æ¥ã€‚è¿™ä¿è¯äº†è¿æ¥å¤„ç†çš„è´Ÿè½½åœ¨å¤šä¸ª <code>Worker</code> ä¹‹é—´æ˜¯ç›¸å¯¹å‡è¡¡çš„ã€‚</li>
<li><strong>äº‹ä»¶å¾ªç¯å’Œ <code>epoll</code>:</strong><br>
æ¯ä¸ª <code>Worker</code> è¿›ç¨‹å†…éƒ¨éƒ½æœ‰ä¸€ä¸ªé«˜æ•ˆçš„<strong>äº‹ä»¶å¾ªç¯</strong>ã€‚å®ƒåˆ©ç”¨æ“ä½œç³»ç»Ÿçš„ <code>epoll</code> (åœ¨<code> Linux</code> ä¸Š) æˆ– <code>kqueue</code> (åœ¨ <code>BSD/macOS</code> ä¸Š) è¿™æ ·çš„ <code>I/O</code> å¤šè·¯å¤ç”¨æŠ€æœ¯ã€‚
<ul>
<li><strong>æ³¨å†Œäº‹ä»¶ï¼š</strong> å½“ä¸€ä¸ª <code>Worker</code> æ¥å—ä¸€ä¸ªæ–°è¿æ¥åï¼Œå®ƒä¸ä¼šå‚»ç­‰å®¢æˆ·ç«¯å‘æ•°æ®ã€‚å®ƒåªæ˜¯æŠŠè¿™ä¸ªè¿æ¥ï¼ˆ<code>socket</code>ï¼‰æ³¨å†Œåˆ°<code>epoll</code>å®ä¾‹ä¸Šï¼Œå¹¶å‘Šè¯‰ <code>epoll</code>ï¼šâ€œå½“è¿™ä¸ªè¿æ¥ä¸Šæœ‰æ•°æ®å¯è¯»æ—¶ï¼Œè¯·é€šçŸ¥æˆ‘ã€‚â€</li>
<li><strong>ç­‰å¾…äº‹ä»¶ï¼š</strong> ç„¶åï¼Œ<code>Worker</code> è¿›ç¨‹å°±è°ƒç”¨ <code>epoll_wait()</code>ï¼ŒæŠŠè‡ªå·±â€œæŒ‚èµ·â€ï¼Œç­‰å¾… <code>epoll</code> çš„é€šçŸ¥ã€‚å®ƒä¸æ¶ˆè€— <code>CPU</code>ã€‚</li>
<li><strong>å¤„ç†å°±ç»ªäº‹ä»¶ï¼š</strong> å½“ä¸€ä¸ªæˆ–å¤šä¸ªè¿æ¥ä¸Šçš„äº‹ä»¶å°±ç»ªæ—¶ï¼ˆæ¯”å¦‚ï¼Œå®¢æˆ·ç«¯å‘æ¥äº†æ•°æ®ï¼Œæˆ–è€…å‘é€ç¼“å†²åŒºå˜ç©ºå¯ä»¥ç»§ç»­å†™å…¥äº†ï¼‰ï¼Œ<code>epoll_wait()</code> ä¼šè¢«å”¤é†’ï¼Œå¹¶è¿”å›ä¸€ä¸ªâ€œå°±ç»ªäº‹ä»¶â€çš„åˆ—è¡¨ã€‚</li>
<li><strong>å¤„ç†ä¸å†æ³¨å†Œï¼š</strong> <code>Worker</code> è¿›ç¨‹éå†è¿™ä¸ªåˆ—è¡¨ï¼Œå¯¹æ¯ä¸ªå°±ç»ªçš„è¿æ¥æ‰§è¡Œç›¸åº”çš„<strong>éé˜»å¡æ“ä½œ</strong>ï¼ˆå¦‚ <code>read()</code> è¯»å–æ•°æ®ï¼Œ<code>write()</code> æˆ– <code>sendfile()</code> å‘é€æ•°æ®ï¼‰ã€‚å¤„ç†å®Œä¸€ä¸ªè¿æ¥åï¼Œå®ƒä¼šå†æ¬¡å‘ <code>epol</code>l æ›´æ–°è¿™ä¸ªè¿æ¥éœ€è¦ç›‘å¬çš„ä¸‹ä¸€ä¸ªäº‹ä»¶ã€‚</li>
</ul>
</li>
</ol>
<p><strong>æµç¨‹çš„å…³é”®ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li><strong>å•çº¿ç¨‹é«˜æ•ˆå¤„ç†ï¼š</strong> æ¯ä¸ª Worker è¿›ç¨‹æ˜¯å•çº¿ç¨‹çš„ï¼Œé¿å…äº†çº¿ç¨‹åˆ‡æ¢çš„å¼€é”€å’Œé”çš„å¤æ‚æ€§ã€‚</li>
<li><strong>æ°¸ä¸é˜»å¡</strong></li>
<li><strong>è¿æ¥æ•°ä¸å†…å­˜æ¶ˆè€—è§£è€¦ï¼š</strong> ä¸€ä¸ª Worker å¯ä»¥è½»æ¾ç»´æŠ¤æ•°ä¸‡ä¸ªè¿æ¥</li>
</ul>
<hr>
<ul>
<li>[ ] to be continued</li>
</ul>
]]></content>
      <categories>
        <category>web</category>
      </categories>
      <tags>
        <tag>nginx</tag>
        <tag>web</tag>
      </tags>
  </entry>
  <entry>
    <title>Network-Layer</title>
    <url>/Network-Layer/</url>
    <content><![CDATA[<h1 id="network-layer"><a class="markdownIt-Anchor" href="#network-layer"></a> Network Layer</h1>
<blockquote>
<p>ç½‘ç»œå±‚æ˜¯<code>OSI</code>æ¨¡å‹ä¸­çš„ç¬¬ä¸‰å±‚ï¼Œå®ƒè´Ÿè´£åœ¨ä¸åŒç½‘ç»œä¹‹é—´ï¼ˆç«¯åˆ°ç«¯ï¼‰æä¾›æ•°æ®åŒ…çš„è·¯ç”±å’Œè½¬å‘ã€‚ç½‘ç»œäº’è”çš„æœ¬è´¨æ˜¯é€šè¿‡<code>IP</code>åè®®å®ç°çš„ï¼Œè€Œæ•°æ®ä¼ è¾“çš„åŸºæœ¬å•å…ƒæ˜¯<code>IP</code>æ•°æ®æŠ¥ã€‚æœ¬ç« å°†è¯¦ç»†ä»‹ç»ç½‘ç»œå±‚çš„æ ¸å¿ƒåè®®ä¸æŠ€æœ¯ã€‚</p>
</blockquote>
<p>ç½‘ç»œäº’è¿<code>æœ¬è´¨</code>æ˜¯é€šè¿‡<code>ip</code>å®ç°çš„ï¼Œ<code>ä¼ è¾“</code>æ˜¯ä»¥<code>ipæ•°æ®æŠ¥</code>ä¸ºä»‹è´¨ã€‚</p>
<h2 id="ip"><a class="markdownIt-Anchor" href="#ip"></a> IP</h2>
<p><code>IP</code>åè®®æ˜¯æ— è¿æ¥ã€ä¸å¯é çš„æ•°æ®æŠ¥æœåŠ¡ã€‚</p>
<ul>
<li><strong>æ— è¿æ¥ (<code>Connectionless</code>)</strong>ï¼šå‘é€æ–¹åœ¨å‘é€æ•°æ®å‰ï¼Œä¸éœ€è¦ä¸æ¥æ”¶æ–¹å»ºç«‹è¿æ¥ã€‚æ¯ä¸ªæ•°æ®æŠ¥éƒ½æ˜¯ç‹¬ç«‹ä¼ è¾“çš„ï¼Œå› æ­¤åˆ°è¾¾é¡ºåºã€å®Œæ•´æ€§éƒ½ä¸èƒ½ä¿è¯ã€‚</li>
<li><strong>ä¸å¯é  (<code>Unreliable</code>)</strong>ï¼š<code>IP</code>åè®®ä¸æä¾›é”™è¯¯æ¢å¤æˆ–é‡ä¼ æœºåˆ¶ã€‚å¦‚æœæ•°æ®æŠ¥åœ¨ä¼ è¾“ä¸­ä¸¢å¤±æˆ–æŸåï¼Œ<code>IP</code>å±‚æœ¬èº«ä¸ä¼šå¤„ç†ï¼Œè€Œæ˜¯äº¤ç”±ä¸Šå±‚åè®®ï¼ˆå¦‚<code>TCP</code>ï¼‰æ¥ç¡®ä¿å¯é æ€§ã€‚</li>
</ul>
<h3 id="ipv4-æ•°æ®æŠ¥æ ¼å¼"><a class="markdownIt-Anchor" href="#ipv4-æ•°æ®æŠ¥æ ¼å¼"></a> IPv4 æ•°æ®æŠ¥æ ¼å¼</h3>
<p>ä¸€ä¸ª<code>IP</code>æ•°æ®æŠ¥ç”±<code>é¦–éƒ¨ (Header)</code>å’Œ<code>æ•°æ® (Data)</code>ä¸¤éƒ¨åˆ†ç»„æˆã€‚é¦–éƒ¨é€šå¸¸ä¸º20å­—èŠ‚ï¼ŒåŒ…å«äº†è·¯ç”±å’Œè½¬å‘æ‰€éœ€çš„æ‰€æœ‰å…³é”®ä¿¡æ¯ã€‚</p>
<ul>
<li><strong>ç‰ˆæœ¬ (<code>Version</code>)</strong> (4ä½): æŒ‡ç¤º<code>IP</code>åè®®çš„ç‰ˆæœ¬ï¼Œå¯¹äº<code>IPv4</code>ï¼Œè¯¥å€¼ä¸º 4ã€‚</li>
<li><strong>é¦–éƒ¨é•¿åº¦ (<code>IHL - Internet Header Length</code>)</strong> (4ä½): è¡¨ç¤ºæ•´ä¸ª<code>IP</code>é¦–éƒ¨çš„é•¿åº¦ï¼Œå•ä½æ˜¯ <strong>4å­—èŠ‚</strong>ï¼ˆ32ä½ï¼‰ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¯¥å€¼ä¸º5ï¼Œåˆ™é¦–éƒ¨é•¿åº¦ä¸º 5 * 4 = 20 å­—èŠ‚ã€‚æœ€å°å€¼ä¸º5ï¼ˆ20å­—èŠ‚ï¼‰ï¼Œæœ€å¤§å€¼ä¸º15ï¼ˆ60å­—èŠ‚ï¼‰ã€‚</li>
<li><strong>æœåŠ¡ç±»å‹ (<code>ToS - Type of Service</code>)</strong> (8ä½): ç”¨äºæŒ‡å®šæ•°æ®æŠ¥çš„ä¼˜å…ˆçº§å’ŒæœåŠ¡è´¨é‡ï¼ˆ<code>QoS</code>ï¼‰è¦æ±‚ï¼Œä¾‹å¦‚æœ€å°å»¶è¿Ÿã€æœ€å¤§ååé‡ç­‰ã€‚</li>
<li><strong>æ€»é•¿åº¦ (<code>Total Length</code>)</strong> (16ä½): æŒ‡ç¤ºæ•´ä¸ª<code>IP</code>æ•°æ®æŠ¥ï¼ˆåŒ…æ‹¬é¦–éƒ¨å’Œæ•°æ®ï¼‰çš„æ€»é•¿åº¦ï¼Œå•ä½æ˜¯å­—èŠ‚ã€‚æœ€å¤§é•¿åº¦ä¸º <code>65535</code> å­—èŠ‚ã€‚</li>
<li><strong>æ ‡è¯† (<code>Identification</code>)</strong> (16ä½): è¯¥å­—æ®µå”¯ä¸€æ ‡è¯†ä¸€ä¸ªæ•°æ®æŠ¥ã€‚å½“æ•°æ®æŠ¥å› ä¸ºè¿‡å¤§è€Œè¢«åˆ†ç‰‡æ—¶ï¼Œæ‰€æœ‰åˆ†ç‰‡éƒ½å°†æ‹¥æœ‰ç›¸åŒçš„æ ‡è¯†å·ï¼Œä»¥ä¾¿æ¥æ”¶æ–¹èƒ½å¤Ÿå°†å®ƒä»¬é‡æ–°ç»„è£…ã€‚</li>
<li><strong>æ ‡å¿— (<code>Flags</code>)</strong> (3ä½):
<ul>
<li>ç¬¬1ä½ï¼šä¿ç•™ï¼Œå¿…é¡»ä¸º0ã€‚</li>
<li>ç¬¬2ä½ï¼š<strong><code>DF (Don't Fragment)</code></strong>ã€‚å¦‚æœè®¾ä¸º1ï¼Œåˆ™ç¦æ­¢è·¯ç”±å™¨å¯¹è¯¥æ•°æ®æŠ¥è¿›è¡Œåˆ†ç‰‡ã€‚å¦‚æœæ•°æ®æŠ¥è¿‡å¤§è€Œæ— æ³•é€šè¿‡ï¼Œè·¯ç”±å™¨å°†ä¸¢å¼ƒå®ƒå¹¶è¿”å›ä¸€ä¸ª<code>ICMP</code>é”™è¯¯æ¶ˆæ¯ã€‚</li>
<li>ç¬¬3ä½ï¼š<strong><code>MF (More Fragments)</code></strong>ã€‚å¦‚æœè®¾ä¸º1ï¼Œè¡¨ç¤ºåé¢è¿˜æœ‰æ›´å¤šçš„åˆ†ç‰‡ï¼›å¦‚æœä¸º0ï¼Œè¡¨ç¤ºè¿™æ˜¯æœ€åä¸€ä¸ªåˆ†ç‰‡ï¼ˆæˆ–æœªåˆ†ç‰‡ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>ç‰‡åç§» (<code>Fragment Offset</code>)</strong> (13ä½): æŒ‡ç¤ºå½“å‰åˆ†ç‰‡åœ¨åŸå§‹æ•°æ®æŠ¥ä¸­çš„ä½ç½®ã€‚åç§»é‡ä»¥ <strong><code>8å­—èŠ‚</code></strong> ä¸ºå•ä½ã€‚</li>
<li><strong>ç”Ÿå­˜æ—¶é—´ (<code>TTL - Time to Live</code>)</strong> (8ä½): è®¾ç½®æ•°æ®æŠ¥åœ¨ç½‘ç»œä¸­å¯ä»¥å­˜æ´»çš„æœ€å¤§è·³æ•°ï¼ˆç»è¿‡çš„è·¯ç”±å™¨æ•°ï¼‰ã€‚æ¯ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨ï¼Œ<code>TTL</code>å€¼å‡1ã€‚å½“<code>TTL</code>å‡ä¸º0æ—¶ï¼Œè·¯ç”±å™¨å°†ä¸¢å¼ƒè¯¥æ•°æ®æŠ¥ï¼Œå¹¶å‘æºä¸»æœºå‘é€ä¸€ä¸ª<code>ICMP</code>è¶…æ—¶æ¶ˆæ¯ã€‚è¿™å¯ä»¥é˜²æ­¢æ•°æ®æŠ¥åœ¨ç½‘ç»œä¸­æ— é™å¾ªç¯ã€‚</li>
<li><strong>åè®® (<code>Protocol</code>)</strong> (8ä½): æŒ‡ç¤º<code>IP</code>æ•°æ®æŠ¥çš„æ•°æ®éƒ¨åˆ†æ‰¿è½½çš„æ˜¯å“ªä¸ªä¸Šå±‚åè®®ã€‚ä¾‹å¦‚ï¼Œ<code>6 </code>ä»£è¡¨<code>TCP</code>ï¼Œ<code>17 </code>ä»£è¡¨<code>UDP</code>ï¼Œ1 ä»£è¡¨<code>ICMP</code>ã€‚</li>
<li><strong>é¦–éƒ¨æ£€éªŒå’Œ (<code>Header Checksum</code>)</strong> (16ä½): ç”¨äºæ ¡éªŒ<code>IP</code>é¦–éƒ¨åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦å‡ºé”™ã€‚å®ƒåªå¯¹é¦–éƒ¨è¿›è¡Œè®¡ç®—ï¼Œä¸åŒ…æ‹¬æ•°æ®éƒ¨åˆ†ã€‚</li>
<li><strong>æºIPåœ°å€ (<code>Source IP Address</code>)</strong> (32ä½): å‘é€æ–¹è®¾å¤‡çš„<code>IP</code>åœ°å€ã€‚</li>
<li><strong>ç›®çš„IPåœ°å€ (<code>Destination IP Address</code>)</strong> (32ä½): æ¥æ”¶æ–¹è®¾å¤‡çš„<code>IP</code>åœ°å€ã€‚</li>
<li><strong>é€‰é¡¹ (<code>Options</code>)</strong> (å¯å˜é•¿): ç”¨äºä¸€äº›ç‰¹æ®Šå¤„ç†ï¼Œå¦‚è®°å½•è·¯ç”±ã€æ—¶é—´æˆ³ç­‰ã€‚ç”±äºé€‰é¡¹ä¼šå¢åŠ é¦–éƒ¨é•¿åº¦å¹¶é™ä½å¤„ç†æ•ˆç‡ï¼Œå› æ­¤ä¸å¸¸ç”¨ã€‚å¦‚æœå­˜åœ¨ï¼Œé¦–éƒ¨é•¿åº¦å­—æ®µä¼šå¤§äº5ã€‚</li>
</ul>
<h3 id="ip-åˆ†ç‰‡-fragmentation"><a class="markdownIt-Anchor" href="#ip-åˆ†ç‰‡-fragmentation"></a> IP åˆ†ç‰‡ (Fragmentation)</h3>
<p>å½“ä¸€ä¸ª<code>IP</code>æ•°æ®æŠ¥çš„é•¿åº¦è¶…è¿‡äº†é“¾è·¯çš„<strong>æœ€å¤§ä¼ è¾“å•å…ƒ (<code>MTU</code>)</strong> æ—¶ï¼Œè·¯ç”±å™¨å°±éœ€è¦å°†å…¶åˆ†å‰²æˆå¤šä¸ªæ›´å°çš„æ•°æ®æŠ¥ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºåˆ†ç‰‡ã€‚</p>
<ul>
<li>æ ‡è¯†ã€æ ‡å¿—å’Œç‰‡åç§»è¿™ä¸‰ä¸ªå­—æ®µå…±åŒåä½œï¼Œä»¥ç¡®ä¿åˆ†ç‰‡èƒ½å¤Ÿåœ¨ç›®çš„ä¸»æœºè¢«æ­£ç¡®åœ°é‡ç»„ã€‚</li>
<li>æ‰€æœ‰åˆ†ç‰‡å…±äº«ç›¸åŒçš„æ ‡è¯†å·ã€‚</li>
<li>é™¤äº†æœ€åä¸€ä¸ªåˆ†ç‰‡ï¼Œå…¶ä»–æ‰€æœ‰åˆ†ç‰‡çš„<code>MF</code>æ ‡å¿—ä½éƒ½ä¸º1ã€‚</li>
<li>ç‰‡åç§»å­—æ®µè®°å½•äº†æ¯ä¸ªåˆ†ç‰‡æ•°æ®åœ¨åŸå§‹æ•°æ®ä¸­çš„ç›¸å¯¹ä½ç½®ã€‚</li>
</ul>
<hr>
<h2 id="icmp"><a class="markdownIt-Anchor" href="#icmp"></a> ICMP</h2>
<p><strong>ICMP</strong>ï¼š<code>Internet Control Message Protocol</code> ï¼Œå› ç‰¹ç½‘æ§åˆ¶æŠ¥æ–‡åè®®</p>
<p>æ–¹å‘ï¼šä¸»æœº/è·¯ç”±å™¨ -&gt; æºç«™(å‘é€æ–¹)</p>
<p><img src="/Network-Layer/54070be665d2466175453f2c7153900f-1740404253149-1.jpeg" alt></p>
<p><code>ä»£ç </code> æä¾›äº†è¿›ä¸€æ­¥çš„æè¿°ä¿¡æ¯ï¼Œåœ¨æ­¤ä¸è¿›ä¸€æ­¥æä¾›æè¿°ä¿¡æ¯ï¼Œ<s>å³ä»£ç çš„ä»£ç ï¼ˆï¼Ÿ</s>ã€‚</p>
<hr>
<p><strong>However</strong>, é¦–å…ˆæƒ³åŒºåˆ†ä¸€ä¸‹è¿™è¾¹çš„å››ä¸ªå­—èŠ‚vså›¾ä¸Šçš„å†…å®¹vsåå…­è¿›åˆ¶å’ŒäºŒè¿›åˆ¶</p>
<p>å›¾ä¸Šçš„<code>0  8  16  31</code>ä¸€å…±æœ‰32ä½ï¼ŒæŒ‡çš„æ˜¯äºŒè¿›åˆ¶çš„32ä½ï¼Œè¿™ä¸ª<code>ç±»å‹</code>æ˜¯1å­—èŠ‚ï¼Œ2ä¸ª16è¿›åˆ¶ã€‚ä¹Ÿå°±æ˜¯åœ¨è¯»æ•°æ®æŠ¥çš„æ—¶å€™ä½ çœ‹åˆ°çš„æ˜¯ä¸¤ä¸ªåå…­è¿›åˆ¶çš„å­—ç¬¦ã€‚<s>ç„¶è€Œå›¾ä¸Šå¾ˆå–œæ¬¢ä½¿ç”¨äºŒè¿›åˆ¶é•¿åº¦æ¥è¡¨ç¤º</s></p>
<p><code>8ä½äºŒè¿›åˆ¶</code>=<code>2ä½åå…­è¿›åˆ¶</code>=<code>1å­—èŠ‚</code></p>
<hr>
<table>
<thead>
<tr>
<th>ç±»å‹å­—æ®µ</th>
<th>ICMPæŠ¥æ–‡ç±»å‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>å›æ˜¾åº”ç­” Echo Reply</td>
</tr>
<tr>
<td>3</td>
<td>ç›®çš„ä¸å¯è¾¾ Destination Unreachable</td>
</tr>
<tr>
<td>4</td>
<td>æºæŠ‘åˆ¶ Source Quench</td>
</tr>
<tr>
<td>5</td>
<td>è·¯ç”±é‡å®šå‘ Redirect (change a route)</td>
</tr>
<tr>
<td>8</td>
<td>å›æ˜¾è¯·æ±‚ Echo Request</td>
</tr>
<tr>
<td>9</td>
<td>è·¯ç”±å™¨å¹¿å‘Š Router Advertisement</td>
</tr>
<tr>
<td>10</td>
<td>è·¯ç”±å™¨è¯·æ±‚ Router Solicitation</td>
</tr>
<tr>
<td>11</td>
<td>æ•°æ®æŠ¥è¶…æ—¶ Time Exceeded for a Datagram</td>
</tr>
<tr>
<td>12</td>
<td>æ•°æ®æŠ¥å‚æ•°é—®é¢˜ Parameter Problem on a Datagram</td>
</tr>
<tr>
<td>13</td>
<td>æ—¶é—´æˆ³è¯·æ±‚ Timestamp Request</td>
</tr>
<tr>
<td>14</td>
<td>æ—¶é—´æˆ³åº”ç­” Timestamp Reply</td>
</tr>
<tr>
<td>15</td>
<td>ä¿¡æ¯è¯·æ±‚ï¼ˆåºŸå¼ƒï¼‰ Information Request (obsolete)</td>
</tr>
<tr>
<td>16</td>
<td>ä¿¡æ¯åº”ç­”ï¼ˆåºŸå¼ƒï¼‰ Information Reply (obsolete)</td>
</tr>
<tr>
<td>17</td>
<td>åœ°å€æ©ç è¯·æ±‚ Address Mask Request</td>
</tr>
<tr>
<td>18</td>
<td>åœ°å€æ©ç åº”ç­” Address Mask Reply</td>
</tr>
</tbody>
</table>
<p><code>ICMP</code> æŠ¥æ–‡åˆ†ä¸ºä¸¤å¤§ç±»</p>
<p><code>å·®é”™æŠ¥å‘ŠæŠ¥æ–‡</code>å’Œ<code>æä¾›ä¿¡æ¯çš„æŠ¥æ–‡(è¯¢é—®æŠ¥æ–‡)</code></p>
<ul>
<li>
<p>å·®é”™æŠ¥å‘ŠæŠ¥æ–‡ (<code>Error Report Messages</code>)</p>
<ul>
<li>
<p><code>3</code> ç›®çš„ä¸å¯è¾¾ <code>Destination Unreachable</code></p>
</li>
<li>
<p><code>4</code> æºæŠ‘åˆ¶ <code>Source Quench</code></p>
</li>
<li>
<p><code>5</code> è·¯ç”±é‡å®šå‘ <code>Redirect (change a route)</code></p>
</li>
<li>
<p><code>11</code> æ•°æ®æŠ¥è¶…æ—¶ <code>Time Exceeded for a Datagram</code></p>
</li>
<li>
<p><code>12</code> æ•°æ®æŠ¥å‚æ•°é—®é¢˜ <code>Parameter Problem on a Datagram</code></p>
</li>
</ul>
</li>
<li>
<p>æä¾›ä¿¡æ¯çš„æŠ¥æ–‡ (è¯¢é—®æŠ¥æ–‡) (<code>Information Request/Inquiry Messages</code>)</p>
<ul>
<li>
<p><code>0</code> å›æ˜¾åº”ç­” <code>Echo Reply</code></p>
</li>
<li>
<p><code>8</code> å›æ˜¾è¯·æ±‚ <code>Echo Request</code></p>
</li>
<li>
<p><code>9</code> è·¯ç”±å™¨å¹¿å‘Š <code>Router Advertisement</code></p>
</li>
<li>
<p><code>10</code> è·¯ç”±å™¨è¯·æ±‚ <code>Router Solicitation</code></p>
</li>
<li>
<p><code>13</code> æ—¶é—´æˆ³è¯·æ±‚ <code>Timestamp Request</code></p>
</li>
<li>
<p><code>14</code> æ—¶é—´æˆ³åº”ç­” <code>Timestamp Reply</code></p>
</li>
<li>
<p><code>17</code> åœ°å€æ©ç è¯·æ±‚ <code>Address Mask Request</code></p>
</li>
<li>
<p><code>18</code> åœ°å€æ©ç åº”ç­” <code>Address Mask Reply</code></p>
</li>
</ul>
</li>
</ul>
<p>å…¶ä¸­<code>3</code>ã€<code>11</code>ã€<code>0</code>ã€<code>8</code>å¸¸ç”¨</p>
<p><code>3</code>ã€<code>11</code>æ˜¯<code>å·®é”™æŠ¥å‘ŠæŠ¥æ–‡</code></p>
<p><code>0</code>ã€<code>8</code>æ˜¯<code>æä¾›ä¿¡æ¯çš„æŠ¥æ–‡</code></p>
<h3 id="å‡ ç§å¸¸ç”¨icmpæŠ¥æ–‡ç±»å‹"><a class="markdownIt-Anchor" href="#å‡ ç§å¸¸ç”¨icmpæŠ¥æ–‡ç±»å‹"></a> å‡ ç§å¸¸ç”¨ICMPæŠ¥æ–‡ç±»å‹</h3>
<h4 id="ç›®çš„ä¸å¯è¾¾æŠ¥æ–‡3"><a class="markdownIt-Anchor" href="#ç›®çš„ä¸å¯è¾¾æŠ¥æ–‡3"></a> ç›®çš„ä¸å¯è¾¾æŠ¥æ–‡ï¼ˆ3ï¼‰</h4>
<p>é¡¾åæ€ä¹‰ï¼Œ<code>ç›®çš„ä¸å¯è¾¾æŠ¥æ–‡</code>å°±æ˜¯ç›®çš„ä¸å¯è¾¾ï¼Œ<code>ä»£ç </code>éƒ¨åˆ†è¿›ä¸€æ­¥é˜è¿°</p>
<p><img src="/Network-Layer/eaba7cf385281339afc9f7083d44ea17-1740404253149-2.jpeg" alt></p>
<p>ç›¸å½“äº<code>ä»£ç </code>é‚£å—å°±æ˜¯<code>00</code>,<code>01</code>â€¦è¿™æ ·çš„åå…­è¿›åˆ¶</p>
<blockquote>
<p><code>MTU</code>æ˜¯æŒ‡ä¸€ä¸ªç½‘ç»œæ¥å£ä¸Šèƒ½å¤Ÿä¼ è¾“çš„æœ€å¤§æ•°æ®åŒ…å¤§å°ã€‚</p>
<p><code>è·¯å¾„æœ€å°MTU</code>å½±å“æ•°æ®åœ¨ç½‘ç»œä¸­çš„ä¼ è¾“ï¼Œå°¤å…¶åœ¨è·¯å¾„ä¸­åŒ…å«ä¸åŒçš„ç½‘ç»œè®¾å¤‡æ—¶ï¼Œå¦‚æœè·¯å¾„ä¸­çš„ä»»ä½•è®¾å¤‡ä¸èƒ½å¤„ç†è¿‡å¤§çš„æ•°æ®åŒ…ï¼Œå®ƒå°±ä¼šä¸¢å¼ƒè¯¥æ•°æ®åŒ…æˆ–å°†å…¶åˆ†ç‰‡ã€‚</p>
<p>æ‰€ä»¥<code>â€œè·¯å¾„æœ€å°MTUå‘ç°â€åº”ç”¨</code>å¯ä»¥å®ç° <code> MTU</code>æ¢æµ‹ å’Œ é¿å…åˆ†ç‰‡</p>
</blockquote>
<h4 id="è¶…æ—¶æŠ¥æ–‡11"><a class="markdownIt-Anchor" href="#è¶…æ—¶æŠ¥æ–‡11"></a> è¶…æ—¶æŠ¥æ–‡ï¼ˆ11ï¼‰</h4>
<p><code>ä»£ç </code>è¯´æ˜è¶…æ—¶çš„æ€§è´¨ï¼š</p>
<p><code>00</code>  ä¼ è¾“è¿‡ç¨‹ä¸­IP <code>TTLï¼ˆtime to liveï¼‰</code>è¶…æ—¶</p>
<p><code>01</code>   åˆ†ç‰‡é‡è£…è¶…æ—¶</p>
<blockquote>
<p>TTLè¶…æ—¶å¯ç”¨äºå®ç°è·¯ç”±è·Ÿè¸ªï¼ˆ<code>tracert</code>ï¼‰</p>
<p><em>è·¯ç”±è·Ÿè¸ªçš„å·¥ä½œåŸç†æ€»ç»“ï¼š</em></p>
<ul>
<li>è·¯ç”±è·Ÿè¸ªå·¥å…·åˆ©ç”¨<code>TTL</code>å­—æ®µé€æ­¥å‘é€æ•°æ®åŒ…ï¼Œæ¯æ¬¡å¢åŠ <code>TTL</code>å€¼ä»¥éå†è·¯å¾„ã€‚</li>
<li>æ¯ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨ï¼Œ<code>TTL</code>å€¼ä¼šå‡1ï¼Œç›´åˆ°æ•°æ®åŒ…çš„<code>TTL</code>å˜ä¸º0ï¼Œè·¯ç”±å™¨ä¸¢å¼ƒæ•°æ®åŒ…å¹¶è¿”å›ä¸€ä¸ª<code>ICMP</code>â€œæ—¶é—´è¶…æ—¶â€æ¶ˆæ¯ã€‚</li>
<li>é€šè¿‡æ”¶é›†æ¯ä¸ªä¸­é—´è·¯ç”±å™¨çš„å›åº”ï¼Œè·¯ç”±è·Ÿè¸ªå·¥å…·èƒ½å¤Ÿæ˜¾ç¤ºæ•´ä¸ªè·¯å¾„ä»¥åŠæ¯è·³çš„å»¶è¿Ÿã€‚</li>
</ul>
</blockquote>
<p><img src="/Network-Layer/4c779b318b1952f5114d3ac31802c576_720-1740404253150-3.jpg" alt></p>
<h4 id="å›åº”è¯·æ±‚ä¸åº”ç­”æŠ¥æ–‡-ç±»å‹-8-å’Œ-0"><a class="markdownIt-Anchor" href="#å›åº”è¯·æ±‚ä¸åº”ç­”æŠ¥æ–‡-ç±»å‹-8-å’Œ-0"></a> <strong>å›åº”è¯·æ±‚ä¸åº”ç­”æŠ¥æ–‡ (ç±»å‹ 8 å’Œ 0)</strong></h4>
<p>è¿™æ˜¯æˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„<code>ping</code>å‘½ä»¤æ‰€ä½¿ç”¨çš„æŠ¥æ–‡ã€‚</p>
<ul>
<li><strong>PING (<code>Packet InterNet Groper</code>)</strong>ï¼šç”¨äºæµ‹è¯•ä¸¤å°ä¸»æœºä¹‹é—´çš„è¿é€šæ€§ã€‚</li>
<li>ä¸»æœºAå‘ä¸»æœºBå‘é€ä¸€ä¸ª<code>ICMP</code>å›æ˜¾è¯·æ±‚æŠ¥æ–‡ï¼ˆç±»å‹8ï¼‰ã€‚</li>
<li>å¦‚æœä¸»æœºBæ¥æ”¶åˆ°è¯¥æŠ¥æ–‡ï¼Œå®ƒä¼šå›å¤ä¸€ä¸ª<code>ICMP</code>å›æ˜¾åº”ç­”æŠ¥æ–‡ï¼ˆç±»å‹0ï¼‰ã€‚</li>
<li><code>ping</code>æ˜¯ä¸€ä¸ªåº”ç”¨å±‚ç¨‹åºç›´æ¥ä½¿ç”¨ç½‘ç»œå±‚<code>ICMP</code>çš„å…¸å‹ä¾‹å­ï¼Œå®ƒç»•è¿‡äº†ä¼ è¾“å±‚çš„<code>TCP</code>æˆ–<code>UDP</code>ã€‚</li>
</ul>
<hr>
<h2 id="arp-address-resolution-protocol"><a class="markdownIt-Anchor" href="#arp-address-resolution-protocol"></a> ARP (Address Resolution Protocol)</h2>
<p>åœ¨ä»»ä½•å±€åŸŸç½‘ï¼ˆå¦‚ä»¥å¤ªç½‘ï¼‰ä¸­ï¼Œæ•°æ®å¸§çš„ä¼ è¾“æœ€ç»ˆä¾èµ–çš„æ˜¯<strong>MACåœ°å€ï¼ˆç‰©ç†åœ°å€ï¼‰</strong>ï¼Œè€Œä¸æ˜¯<code>IP</code>åœ°å€ã€‚é‚£ä¹ˆï¼Œå½“ä¸€å°ä¸»æœºï¼ˆä¾‹å¦‚ <code>192.168.1.100</code>ï¼‰æƒ³è¦ä¸åŒä¸€ç½‘ç»œä¸­çš„å¦ä¸€å°ä¸»æœºï¼ˆä¾‹å¦‚ <code>192.168.1.50</code>ï¼‰é€šä¿¡æ—¶ï¼Œå®ƒå¦‚ä½•çŸ¥é“å¯¹æ–¹çš„<code>MAC</code>åœ°å€å‘¢ï¼Ÿè¿™å°±æ˜¯<code>ARP</code>åè®®çš„ä½œç”¨ã€‚</p>
<p><strong>å®šä¹‰</strong>ï¼š<code>ARP (Address Resolution Protocol)</code>ï¼Œåœ°å€è§£æåè®®ã€‚å®ƒè´Ÿè´£å°†ä¸€ä¸ªå·²çŸ¥çš„<code>IP</code>åœ°å€ï¼ˆç½‘ç»œå±‚åœ°å€ï¼‰è§£æï¼ˆæ˜ å°„ï¼‰ä¸ºå¯¹åº”çš„MACåœ°å€ï¼ˆæ•°æ®é“¾è·¯å±‚åœ°å€ï¼‰ã€‚</p>
<p><strong>å·¥ä½œæµç¨‹</strong>ï¼š</p>
<ol>
<li><strong>æ£€æŸ¥<code>ARP</code>ç¼“å­˜</strong>ï¼šä¸»æœº A é¦–å…ˆä¼šæ£€æŸ¥è‡ªå·±çš„ <strong><code>ARP</code>ç¼“å­˜è¡¨</strong>ï¼Œçœ‹æ˜¯å¦å·²ç»æœ‰ç›®æ ‡<code>IP</code>åœ°å€ <code>192.168.1.50</code> å¯¹åº”çš„<code>MAC</code>åœ°å€è®°å½•ã€‚å¦‚æœå­˜åœ¨ï¼Œåˆ™ç›´æ¥ä½¿ç”¨è¯¥<code>MAC</code>åœ°å€å°è£…æ•°æ®å¸§å¹¶å‘é€ã€‚</li>
<li><strong>å‘é€<code>ARP</code>è¯·æ±‚</strong>ï¼šå¦‚æœåœ¨ç¼“å­˜ä¸­æ‰¾ä¸åˆ°è®°å½•ï¼Œä¸»æœº A ä¼šåœ¨å±€åŸŸç½‘å†…å¹¿æ’­ä¸€ä¸ª <strong><code>ARP</code>è¯·æ±‚</strong> æŠ¥æ–‡ã€‚è¿™ä¸ªæŠ¥æ–‡çš„æ ¸å¿ƒå†…å®¹æ˜¯ï¼šâ€œ<strong>è°çš„<code>IP</code>åœ°å€æ˜¯ 192.168.1.50ï¼Ÿè¯·æŠŠä½ çš„<code>MAC</code>åœ°å€å‘Šè¯‰æˆ‘ã€‚</strong>â€ è¿™ä¸ªè¯·æ±‚æ˜¯å¹¿æ’­çš„ï¼Œæ„å‘³ç€ç½‘ç»œå†…æ‰€æœ‰è®¾å¤‡éƒ½ä¼šæ”¶åˆ°å®ƒã€‚</li>
<li><strong>å•æ’­<code>ARP</code>å“åº”</strong>ï¼šç½‘ç»œä¸­çš„æ‰€æœ‰è®¾å¤‡éƒ½ä¼šè§£æè¿™ä¸ª<code>ARP</code>è¯·æ±‚ã€‚ä½†åªæœ‰<code>IP</code>åœ°å€ä¸º <code>192.168.1.50</code> çš„ä¸»æœº B ä¼šå“åº”ã€‚ä¸»æœº B ä¼šç›´æ¥å‘ä¸»æœº A å‘é€ä¸€ä¸ª <strong><code>ARP</code>å“åº”</strong> æŠ¥æ–‡ï¼ˆå•æ’­ï¼‰ï¼Œå†…å®¹æ˜¯ï¼šâ€œ<strong>æˆ‘çš„<code>IP</code>åœ°å€æ˜¯ <code>192.168.1.50</code>ï¼Œæˆ‘çš„<code>MAC</code>åœ°å€æ˜¯<code> XX:XX:XX:XX:XX:XX</code>ã€‚</strong>â€</li>
<li><strong>æ›´æ–°<code>ARP</code>ç¼“å­˜</strong>ï¼šä¸»æœº A æ”¶åˆ°å“åº”åï¼Œå°±çŸ¥é“äº†ä¸»æœº B çš„<code>MAC</code>åœ°å€ï¼Œå¹¶å°†è¿™ä¸ªæ˜ å°„å…³ç³»ï¼ˆ<code>IP -&gt; MAC</code>ï¼‰å­˜å…¥è‡ªå·±çš„<code>ARP</code>ç¼“å­˜è¡¨ä¸­ï¼Œä»¥å¤‡åç»­ä½¿ç”¨ã€‚ç„¶åï¼Œå®ƒå°±å¯ä»¥å°†æ•°æ®å‘é€ç»™ä¸»æœº B äº†ã€‚</li>
</ol>
<p><strong><code>ARP</code>ç¼“å­˜</strong>ï¼šæ¯ä¸ªä¸»æœºéƒ½ç»´æŠ¤ä¸€ä¸ªARPç¼“å­˜ï¼Œç”¨äºå­˜å‚¨è¿‘æœŸè§£æè¿‡çš„<code>IP</code>åœ°å€ä¸<code>MAC</code>åœ°å€çš„å¯¹åº”å…³ç³»ã€‚ç¼“å­˜æ¡ç›®æœ‰ç”Ÿå‘½å‘¨æœŸï¼ˆé€šå¸¸æ˜¯å‡ åˆ†é’Ÿï¼‰ï¼Œè¿‡æœŸåä¼šè¢«åˆ é™¤ï¼Œä»¥ç¡®ä¿ä¿¡æ¯çš„æ—¶æ•ˆæ€§ã€‚</p>
<hr>
<h2 id="dhcp-dynamic-host-configuration-protocol"><a class="markdownIt-Anchor" href="#dhcp-dynamic-host-configuration-protocol"></a> DHCP (Dynamic Host Configuration Protocol)</h2>
<p>å½“ä¸€å°æ–°è®¾å¤‡ï¼ˆå¦‚ç¬”è®°æœ¬ç”µè„‘æˆ–æ‰‹æœºï¼‰æ¥å…¥ç½‘ç»œæ—¶ï¼Œå®ƒéœ€è¦ä¸€ä¸ª<code>IP</code>åœ°å€æ‰èƒ½é€šä¿¡ã€‚æ‰‹åŠ¨ä¸ºæ¯å°è®¾å¤‡é…ç½®IPåœ°å€ã€å­ç½‘æ©ç ã€é»˜è®¤ç½‘å…³å’Œ<code>DNS</code>æœåŠ¡å™¨æ˜¯éå¸¸ç¹çä¸”å®¹æ˜“å‡ºé”™çš„ã€‚<code>DHCP</code>åè®®å°±æ˜¯ä¸ºäº†è‡ªåŠ¨åŒ–è¿™ä¸ªè¿‡ç¨‹è€Œè®¾è®¡çš„ã€‚</p>
<p><strong>å®šä¹‰</strong>ï¼š<strong>åŠ¨æ€ä¸»æœºé…ç½®åè®® (<code>DHCP, Dynamic Host Configuration Protocol</code>)</strong> æ˜¯ä¸€ä¸ªåº”ç”¨å±‚åè®®ï¼ˆåŸºäº<code>UDP</code>ï¼‰ï¼Œå…è®¸ç½‘ç»œä¸­çš„<code>DHCP</code>æœåŠ¡å™¨è‡ªåŠ¨åœ°ä¸ºå®¢æˆ·ç«¯åˆ†é…IPåœ°å€åŠå…¶ä»–ç½‘ç»œé…ç½®å‚æ•°ã€‚</p>
<p><strong>å·¥ä½œæµç¨‹ (<code>DORA</code>)</strong>ï¼šè¿™ä¸ªè¿‡ç¨‹é€šå¸¸è¢«ç§°ä¸º**<code>DORA</code>**ï¼Œä»£è¡¨å››ä¸ªæ ¸å¿ƒæ­¥éª¤ã€‚</p>
<ol>
<li><strong><code>Discover</code> (å‘ç°)</strong>ï¼šå®¢æˆ·ç«¯ï¼ˆæ–°è®¾å¤‡ï¼‰åœ¨ç½‘ç»œä¸­<strong>å¹¿æ’­</strong>ä¸€ä¸ª <strong><code>DHCP Discover</code></strong> æŠ¥æ–‡ï¼Œè¯•å›¾æ‰¾åˆ°å¯ç”¨çš„<code>DHCP</code>æœåŠ¡å™¨ã€‚æŠ¥æ–‡å¤§æ„æ˜¯ï¼šâ€œ<strong>æˆ‘éœ€è¦ä¸€ä¸ª<code>IP</code>åœ°å€ï¼Œç½‘ç»œé‡Œæœ‰<code>DHCP</code>æœåŠ¡å™¨å—ï¼Ÿ</strong>â€</li>
<li><strong><code>Offer</code> (æä¾›)</strong>ï¼šæ‰€æœ‰æ”¶åˆ°<code>Discover</code>æŠ¥æ–‡çš„<code>DHCP</code>æœåŠ¡å™¨éƒ½ä¼šä»è‡ªå·±çš„åœ°å€æ± ä¸­é€‰æ‹©ä¸€ä¸ªå¯ç”¨çš„<code>IP</code>åœ°å€ï¼Œå¹¶é€šè¿‡ä¸€ä¸ª <strong><code>DHCP Offer</code></strong> æŠ¥æ–‡ï¼ˆå•æ’­æˆ–å¹¿æ’­ï¼‰æä¾›ç»™å®¢æˆ·ç«¯ã€‚æŠ¥æ–‡å¤§æ„æ˜¯ï¼šâ€œ<strong>ä½ å¥½ï¼Œæˆ‘è¿™é‡Œæœ‰ä¸€ä¸ª<code>IP</code>åœ°å€ <code>192.168.1.123</code> å¯ä»¥ç»™ä½ ç”¨ï¼ŒåŒæ—¶è¿˜æœ‰è¿™äº›å…¶ä»–çš„é…ç½®ä¿¡æ¯ã€‚</strong>â€</li>
<li><strong><code>Request (è¯·æ±‚)</code></strong>ï¼šå®¢æˆ·ç«¯å¯èƒ½ä¼šæ”¶åˆ°å¤šä¸ª<code>Offer</code>ã€‚å®ƒä¼šé€‰æ‹©å…¶ä¸­ä¸€ä¸ªï¼ˆé€šå¸¸æ˜¯ç¬¬ä¸€ä¸ªæ”¶åˆ°çš„ï¼‰ï¼Œç„¶å<strong>å¹¿æ’­</strong>ä¸€ä¸ª <strong><code>DHCP Request</code></strong> æŠ¥æ–‡ï¼Œæ­£å¼è¯·æ±‚ä½¿ç”¨è¿™ä¸ª<code>IP</code>åœ°å€ã€‚å¹¿æ’­çš„ç›®çš„æ˜¯é€šçŸ¥æ‰€æœ‰<code>DHCP</code>æœåŠ¡å™¨ï¼ˆåŒ…æ‹¬é‚£äº›ä¹Ÿæä¾›äº†Offerçš„æœåŠ¡å™¨ï¼‰ï¼Œå®ƒå·²ç»åšå‡ºäº†é€‰æ‹©ã€‚æŠ¥æ–‡å¤§æ„æ˜¯ï¼šâ€œ<strong>å„ä½ï¼Œæˆ‘å†³å®šä½¿ç”¨æœåŠ¡å™¨Xæä¾›çš„<code>IP</code>åœ°å€ <code>192.168.1.123</code>ã€‚</strong>â€</li>
<li><strong><code>Acknowledge (ç¡®è®¤)</code></strong>ï¼šè¢«é€‰ä¸­çš„<code>DHCP</code>æœåŠ¡å™¨ä¼šå‘é€ä¸€ä¸ª <strong><code>DHCP ACK</code></strong> æŠ¥æ–‡ï¼Œç¡®è®¤å°†è¯¥<code>IP</code>åœ°å€ç§Ÿå€Ÿç»™å®¢æˆ·ç«¯ï¼Œå¹¶è§„å®šäº†ç§ŸæœŸã€‚æ­¤æ—¶ï¼Œå®¢æˆ·ç«¯å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªIPåœ°å€è¿›è¡Œç½‘ç»œé€šä¿¡äº†ã€‚</li>
</ol>
<hr>
<h2 id="è·¯ç”±åè®®-routing-protocols"><a class="markdownIt-Anchor" href="#è·¯ç”±åè®®-routing-protocols"></a> è·¯ç”±åè®® (Routing Protocols)</h2>
<p>IPåè®®æœ¬èº«åªè´Ÿè´£æ•°æ®æŠ¥çš„è½¬å‘ï¼Œä½†å®ƒå¹¶ä¸çŸ¥é“å¦‚ä½•é€‰æ‹©æœ€ä½³è·¯å¾„ã€‚<strong>è·¯ç”±å™¨</strong>é€šè¿‡è¿è¡Œ<strong>è·¯ç”±åè®®</strong>æ¥å­¦ä¹ ç½‘ç»œçš„æ‹“æ‰‘ç»“æ„ï¼Œå¹¶åˆ›å»º<strong>è·¯ç”±è¡¨</strong>ï¼Œä»è€Œåšå‡ºæ™ºèƒ½çš„è·¯å¾„é€‰æ‹©å†³ç­–ã€‚è·¯ç”±åè®®ä¸»è¦åˆ†ä¸ºä¸¤å¤§ç±»ï¼š</p>
<h3 id="å†…éƒ¨ç½‘å…³åè®®-igp-interior-gateway-protocol"><a class="markdownIt-Anchor" href="#å†…éƒ¨ç½‘å…³åè®®-igp-interior-gateway-protocol"></a> å†…éƒ¨ç½‘å…³åè®® (IGP - Interior Gateway Protocol)</h3>
<p>IGPåœ¨ä¸€ä¸ª<strong>è‡ªæ²»ç³»ç»Ÿ (<code>AS - Autonomous System</code>)</strong> å†…éƒ¨äº¤æ¢è·¯ç”±ä¿¡æ¯ã€‚ä¸€ä¸ª<code>AS</code>å¯ä»¥æ˜¯ä¸€ä¸ªå…¬å¸ã€ä¸€æ‰€å¤§å­¦æˆ–ä¸€ä¸ªäº’è”ç½‘æœåŠ¡æä¾›å•†ï¼ˆ<code>ISP</code>ï¼‰çš„ç½‘ç»œã€‚</p>
<ul>
<li><strong>RIP (<code>Routing Information Protocol</code>)</strong>
<ul>
<li><strong>ç±»å‹</strong>ï¼šè·ç¦»çŸ¢é‡åè®® (<code>Distance-Vector</code>)ã€‚</li>
<li><strong>å·¥ä½œåŸç†</strong>ï¼šRIPè·¯ç”±å™¨å‘¨æœŸæ€§åœ°ä¸é‚»å±…äº¤æ¢æ•´ä¸ªè·¯ç”±è¡¨ã€‚å®ƒä½¿ç”¨â€œ<strong>è·³æ•° (<code>Hop Count</code>)</strong>â€ä½œä¸ºåº¦é‡å€¼æ¥è¡¡é‡è·¯å¾„çš„å¥½åï¼Œå³ç»è¿‡çš„è·¯ç”±å™¨æ•°é‡è¶Šå°‘ï¼Œè·¯å¾„è¶Šä¼˜ã€‚</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šå®ç°ç®€å•ï¼Œä½†æœ‰æ˜æ˜¾ç¼ºç‚¹ï¼Œå¦‚æœ€å¤§è·³æ•°é™åˆ¶ï¼ˆ15è·³ï¼‰ã€æ”¶æ•›é€Ÿåº¦æ…¢ã€å®¹æ˜“äº§ç”Ÿè·¯ç”±ç¯è·¯ç­‰ã€‚ç°åœ¨å·²åŸºæœ¬è¢«<code>OSPF</code>å–ä»£ã€‚</li>
</ul>
</li>
<li><strong>OSPF (<code>Open Shortest Path First</code>)</strong>
<ul>
<li><strong>ç±»å‹</strong>ï¼šé“¾è·¯çŠ¶æ€åè®® (<code>Link-State</code>)ã€‚</li>
<li><strong>å·¥ä½œåŸç†</strong>ï¼š<code>OSPF</code>è·¯ç”±å™¨ä¸äº¤æ¢è·¯ç”±è¡¨ï¼Œè€Œæ˜¯äº¤æ¢<strong>é“¾è·¯çŠ¶æ€é€šå‘Š (<code>LSA</code>)</strong>ã€‚æ¯ä¸ªè·¯ç”±å™¨éƒ½æ”¶é›†ç½‘ç»œä¸­æ‰€æœ‰çš„<code>LSA</code>ï¼Œä»è€Œåœ¨æœ¬åœ°æ„å»ºä¸€ä¸ªå®Œæ•´çš„ç½‘ç»œæ‹“æ‰‘å›¾ã€‚ç„¶åï¼Œå®ƒä½¿ç”¨**<code>Dijkstra</code>ç®—æ³•**è®¡ç®—å‡ºåˆ°è¾¾æ¯ä¸ªç›®çš„åœ°çš„æœ€çŸ­è·¯å¾„ã€‚</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šæ”¶æ•›é€Ÿåº¦å¿«ï¼Œæ— è·¯ç”±ç¯è·¯ï¼Œæ”¯æŒå¯å˜é•¿å­ç½‘æ©ç ï¼ˆ<code>VLSM</code>ï¼‰ï¼Œæ”¯æŒåŒºåŸŸåˆ’åˆ†ä»¥å®ç°æ›´å¥½çš„æ‰©å±•æ€§ã€‚æ˜¯å½“ä»Šä¼ä¸šç½‘ç»œä¸­æœ€ä¸»æµçš„<code>IGP</code>åè®®ã€‚</li>
</ul>
</li>
</ul>
<h3 id="å¤–éƒ¨ç½‘å…³åè®®-egp-exterior-gateway-protocol"><a class="markdownIt-Anchor" href="#å¤–éƒ¨ç½‘å…³åè®®-egp-exterior-gateway-protocol"></a> å¤–éƒ¨ç½‘å…³åè®® (EGP - Exterior Gateway Protocol)</h3>
<p><code>EGP</code>ç”¨äºåœ¨ä¸åŒçš„è‡ªæ²»ç³»ç»Ÿï¼ˆ<code>AS</code>ï¼‰ä¹‹é—´äº¤æ¢è·¯ç”±ä¿¡æ¯ï¼Œæ˜¯æ„æˆæ•´ä¸ªäº’è”ç½‘çš„éª¨æ¶ã€‚</p>
<ul>
<li><strong>BGP (<code>Border Gateway Protocol</code>)</strong>
<ul>
<li><strong>å®šä¹‰</strong>ï¼šè¾¹ç•Œç½‘å…³åè®®æ˜¯ç›®å‰å”¯ä¸€åœ¨ä½¿ç”¨çš„<code>EGP</code>ã€‚å®ƒä¸ä»…ä»…æ˜¯å¯»æ‰¾æœ€çŸ­è·¯å¾„ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œå®ƒæ˜¯ä¸€ä¸ªâ€œ<strong>è·¯å¾„çŸ¢é‡åè®®</strong>â€ï¼Œèƒ½å¤Ÿæ ¹æ®ç®¡ç†å‘˜è®¾å®šçš„ç­–ç•¥ï¼ˆå¦‚è´¹ç”¨ã€å®‰å…¨ã€æ”¿æ²»å› ç´ ç­‰ï¼‰æ¥é€‰æ‹©æœ€ä½³è·¯ç”±ã€‚</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šæå…¶ç¨³å®šå’Œå¯æ‰©å±•ï¼Œæ˜¯äº’è”ç½‘çš„æ ¸å¿ƒè·¯ç”±åè®®ï¼Œè´Ÿè´£è¿æ¥å…¨çƒæˆåƒä¸Šä¸‡ä¸ªè‡ªæ²»ç³»ç»Ÿã€‚</li>
</ul>
</li>
</ul>
<hr>
<h2 id="ipv6"><a class="markdownIt-Anchor" href="#ipv6"></a> IPv6</h2>
<p>éšç€ç‰©è”ç½‘çš„å…´èµ·å’Œäº’è”ç½‘çš„è“¬å‹ƒå‘å±•ï¼Œ<code>IPv4</code>çš„åœ°å€ç©ºé—´ï¼ˆçº¦43äº¿ä¸ªï¼‰å·²å®Œå…¨è€—å°½ã€‚<code>IPv6</code>ä½œä¸ºå…¶ç»§ä»»è€…ï¼Œæä¾›äº†æµ·é‡çš„åœ°å€ç©ºé—´å’Œè¯¸å¤šæ”¹è¿›ã€‚</p>
<p><strong>ä¸»è¦ä¼˜åŠ¿</strong>ï¼š</p>
<ol>
<li><strong>å·¨å¤§çš„åœ°å€ç©ºé—´</strong>ï¼š<code>IPv6</code>ä½¿ç”¨128ä½åœ°å€ï¼Œç†è®ºä¸Šå¯æä¾›<code> 2^128</code> ä¸ªåœ°å€ï¼Œè¿™ä¸ªæ•°å­—è¶³ä»¥æ»¡è¶³æœªæ¥æ•°ç™¾å¹´å†…ä»»ä½•å¯ä»¥æƒ³è±¡åˆ°çš„éœ€æ±‚ã€‚</li>
<li><strong>ç®€åŒ–çš„é¦–éƒ¨æ ¼å¼</strong>ï¼š<code>IPv6</code>çš„é¦–éƒ¨æ˜¯å›ºå®šçš„40å­—èŠ‚ï¼Œç§»é™¤äº†<code>IPv4</code>ä¸­ä¸å¸¸ç”¨æˆ–å†—ä½™çš„å­—æ®µï¼ˆå¦‚<code>IHL</code>ã€æ ‡è¯†ã€æ ‡å¿—ã€ç‰‡åç§»ã€é¦–éƒ¨æ£€éªŒå’Œï¼‰ï¼Œä½¿å¾—è·¯ç”±å™¨å¤„ç†æ•°æ®åŒ…çš„æ•ˆç‡æ›´é«˜ã€‚</li>
<li><strong>ä¸å†ç”±è·¯ç”±å™¨åˆ†ç‰‡</strong>ï¼š<code>IPv6</code>è¦æ±‚å‘é€æ–¹ä¸»æœºåœ¨å‘é€å‰å®Œæˆâ€œè·¯å¾„<code>MTU</code>å‘ç°â€ï¼ˆ<code>PMTUD</code>ï¼‰ï¼Œç¡®ä¿æ•°æ®åŒ…å¤§å°ä¸è¶…è¿‡è·¯å¾„ä¸­çš„æœ€å°<code>MTU</code>ã€‚è·¯ç”±å™¨ä¸å†è¿›è¡Œåˆ†ç‰‡ï¼Œå¤§å¤§å‡è½»äº†è·¯ç”±å™¨çš„è´Ÿæ‹…ã€‚</li>
<li><strong>å¢å¼ºçš„å®‰å…¨æ€§</strong>ï¼š<code>IPsec</code>ï¼ˆIPå®‰å…¨åè®®ï¼‰è¢«è®¾è®¡ä¸º<code>IPv6</code>çš„å¼ºåˆ¶ç»„æˆéƒ¨åˆ†ï¼ˆå°½ç®¡åæ¥å˜ä¸ºå¯é€‰ï¼‰ï¼Œä¸ºç½‘ç»œå±‚æä¾›äº†ç«¯åˆ°ç«¯çš„åŠ å¯†å’Œè®¤è¯ï¼Œå®‰å…¨æ€§è¿œè¶…<code>IPv4</code>ã€‚</li>
<li><strong>æ”¯æŒæ— çŠ¶æ€åœ°å€è‡ªåŠ¨é…ç½® (<code>SLAAC</code>)</strong>ï¼š<code>IPv6</code>ä¸»æœºå¯ä»¥æ ¹æ®è·¯ç”±å™¨é€šå‘Šçš„å‰ç¼€å’Œè‡ªèº«çš„<code>MAC</code>åœ°å€ç­‰ä¿¡æ¯ï¼Œè‡ªåŠ¨ç”Ÿæˆå…¨å±€å”¯ä¸€çš„<code>IP</code>åœ°å€ï¼Œæ— éœ€<code>DHCP</code>æœåŠ¡å™¨ä»‹å…¥å³å¯ä¸Šç½‘ã€‚</li>
<li><strong>æ”¹è¿›çš„é‚»å±…å‘ç°åè®® (<code>NDP</code>)</strong>ï¼š<code>IPv6</code>ä½¿ç”¨<strong>é‚»å±…å‘ç°åè®® (<code>NDP</code>)</strong>ï¼Œå®ƒåŸºäº<code>ICMPv6</code>ï¼Œå–ä»£äº†<code>IPv4</code>ä¸­çš„<code>ARP</code>å’Œ<code>ICMP</code>è·¯ç”±å™¨å‘ç°ç­‰åŠŸèƒ½ï¼Œå®ç°äº†åœ°å€è§£æã€è·¯ç”±å™¨å‘ç°ã€é‡å¤åœ°å€æ£€æµ‹ï¼ˆ<code>DAD</code>ï¼‰ç­‰ï¼Œæ›´åŠ é«˜æ•ˆå’Œå¼ºå¤§ã€‚</li>
</ol>
<hr>
<h2 id="igmp-internet-group-management-protocol"><a class="markdownIt-Anchor" href="#igmp-internet-group-management-protocol"></a> IGMP (Internet Group Management Protocol)</h2>
<p>å½“æ•°æ®éœ€è¦å‘é€ç»™ä¸€ç»„ç‰¹å®šçš„ã€æ„Ÿå…´è¶£çš„ä¸»æœºè€Œä¸æ˜¯å•ä¸ªä¸»æœºï¼ˆå•æ’­ï¼‰æˆ–æ‰€æœ‰ä¸»æœºï¼ˆå¹¿æ’­ï¼‰æ—¶ï¼Œå°±éœ€è¦<strong>ç»„æ’­ (<code>Multicast</code>)</strong>ã€‚<code>IGMP</code>åè®®å°±æ˜¯ç”¨äºç®¡ç†è¿™ç§ç»„æ’­ç»„æˆå‘˜å…³ç³»çš„ã€‚</p>
<p><strong>å®šä¹‰</strong>ï¼šIGMP (<code>Internet Group Management Protocol</code>)ï¼Œå› ç‰¹ç½‘ç»„ç®¡ç†åè®®ã€‚å®ƒå…è®¸ä¸»æœºé€šçŸ¥å…¶æœ¬åœ°è·¯ç”±å™¨ï¼Œè¡¨ç¤ºè‡ªå·±å¸Œæœ›åŠ å…¥æˆ–ç¦»å¼€æŸä¸ªç‰¹å®šçš„ç»„æ’­ç»„ã€‚</p>
<p><strong>å·¥ä½œåŸç†</strong>ï¼š</p>
<ul>
<li><strong>åŠ å…¥ç»„</strong>ï¼šå½“ä¸€ä¸ªä¸»æœºä¸Šçš„æŸä¸ªåº”ç”¨å¸Œæœ›æ¥æ”¶ç‰¹å®šç»„æ’­ç»„ï¼ˆä¾‹å¦‚ä¸€ä¸ªè§†é¢‘æµï¼‰çš„æ•°æ®æ—¶ï¼Œä¸»æœºä¼šå‘å…¶æœ¬åœ°è·¯ç”±å™¨å‘é€ä¸€ä¸ª<code>IGMP</code><strong>æˆå‘˜å…³ç³»æŠ¥å‘Š</strong>æŠ¥æ–‡ã€‚</li>
<li><strong>ç»´æŠ¤å…³ç³»</strong>ï¼šè·¯ç”±å™¨ä¼šå‘¨æœŸæ€§åœ°å‘é€<code>IGMP</code><strong>æŸ¥è¯¢</strong>æŠ¥æ–‡ï¼Œè¯¢é—®æœ¬åœ°ç½‘ç»œä¸Šæ˜¯å¦è¿˜æœ‰æˆå‘˜å¯¹æŸä¸ªç»„æ’­ç»„æ„Ÿå…´è¶£ã€‚ä»åœ¨ç»„å†…çš„æˆå‘˜ä¼šå›å¤æŠ¥å‘ŠæŠ¥æ–‡ã€‚</li>
<li><strong>ç¦»å¼€ç»„</strong>ï¼šå½“ä¸»æœºä¸å†å¸Œæœ›æ¥æ”¶æ•°æ®æ—¶ï¼Œå®ƒä¼šå‘é€ä¸€ä¸ª<code>IGMP</code><strong>ç¦»å¼€ç»„</strong>æŠ¥æ–‡ã€‚</li>
</ul>
<p><code>IGMP</code>åªè´Ÿè´£åœ¨ä¸»æœºå’Œæœ¬åœ°è·¯ç”±å™¨ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚è·¯ç”±å™¨ä¹‹é—´åˆ™éœ€è¦è¿è¡Œä¸“é—¨çš„ç»„æ’­è·¯ç”±åè®®ï¼ˆå¦‚<code>PIM</code>ï¼‰æ¥æ„å»ºç»„æ’­æ•°æ®çš„åˆ†å‘è·¯å¾„ã€‚</p>
<hr>
<h2 id="nat-network-address-translation"><a class="markdownIt-Anchor" href="#nat-network-address-translation"></a> NAT (Network Address Translation)</h2>
<p><code>NAT</code>æ˜¯ä¸ºäº†å»¶ç¼“<code>IPv4</code>åœ°å€è€—å°½è€Œè®¾è®¡å‡ºçš„ä¸€ç§å…³é”®æŠ€æœ¯ã€‚å®ƒå…è®¸ä¸€ä¸ªæœºæ„å†…éƒ¨çš„ä¼—å¤šè®¡ç®—æœºä½¿ç”¨<strong>ç§æœ‰<code>IP</code>åœ°å€</strong>ä¸Šç½‘ï¼Œä½†åœ¨ä¸å¤–éƒ¨äº’è”ç½‘é€šä¿¡æ—¶ï¼Œå…±äº«ä¸€ä¸ªæˆ–å°‘æ•°å‡ ä¸ª<strong>å…¬æœ‰<code>IP</code>åœ°å€</strong>ã€‚</p>
<p><strong>å®šä¹‰</strong>ï¼š<strong>ç½‘ç»œåœ°å€è½¬æ¢ (<code>NAT</code>)</strong> å·¥ä½œåœ¨è·¯ç”±å™¨æˆ–é˜²ç«å¢™ä¸Šï¼Œè´Ÿè´£åœ¨ç§æœ‰ç½‘ç»œå’Œå…¬æœ‰ç½‘ç»œä¹‹é—´è½¬æ¢<code>IP</code>æ•°æ®æŠ¥çš„æº/ç›®çš„åœ°å€å’Œç«¯å£å·ã€‚</p>
<p><strong>ç§æœ‰<code>IP</code>åœ°å€æ®µ</strong> (ä¸ä¼šåœ¨å…¬ç½‘è·¯ç”±):</p>
<ul>
<li><code>10.0.0.0</code> åˆ° <code>10.255.255.255</code> (Aç±»)</li>
<li><code>172.16.0.0</code> åˆ° <code>172.31.255.255</code> (Bç±»)</li>
<li><code>192.168.0.0</code> åˆ° <code>192.168.255.255</code> (Cç±»)</li>
</ul>
<p><strong>å·¥ä½œåŸç†ä¸ç±»å‹</strong>ï¼š</p>
<ol>
<li><strong>é™æ€NAT (<code>Static NAT</code>)</strong>ï¼š
<ul>
<li>å°†ä¸€ä¸ªç§æœ‰<code>IP</code>åœ°å€<strong>ä¸€å¯¹ä¸€</strong>åœ°æ˜ å°„åˆ°ä¸€ä¸ªå…¬æœ‰IPåœ°å€ã€‚</li>
<li>ä¸»è¦ç”¨äºå†…éƒ¨æœåŠ¡å™¨ï¼ˆå¦‚WebæœåŠ¡å™¨ï¼‰éœ€è¦è¢«å¤–éƒ¨ç½‘ç»œç¨³å®šè®¿é—®çš„åœºæ™¯ã€‚</li>
</ul>
</li>
<li><strong>åŠ¨æ€NAT (<code>Dynamic NAT</code>)</strong>ï¼š
<ul>
<li>ç»´æŠ¤ä¸€ä¸ªå…¬æœ‰<code>IP</code>åœ°å€æ± ã€‚å½“å†…éƒ¨ä¸»æœºéœ€è¦è®¿é—®äº’è”ç½‘æ—¶ï¼Œä»åœ°å€æ± ä¸­<strong>ä¸´æ—¶åˆ†é…</strong>ä¸€ä¸ªæœªä½¿ç”¨çš„å…¬æœ‰<code>IP</code>åœ°å€ç»™å®ƒã€‚</li>
<li>å½“é€šä¿¡ç»“æŸæ—¶ï¼Œè¯¥å…¬æœ‰<code>IP</code>åœ°å€è¢«å›æ”¶ï¼Œå¯ä¾›å…¶ä»–ä¸»æœºä½¿ç”¨ã€‚</li>
</ul>
</li>
<li><strong>PAT (<code>Port Address Translation</code>) / NAPT</strong>ï¼š
<ul>
<li>è¿™æ˜¯ç›®å‰<strong>æœ€å¸¸ç”¨</strong>çš„<code>NAT</code>å½¢å¼ï¼Œä¹Ÿç§°ä¸º<code>NAPT</code>ï¼ˆç½‘ç»œåœ°å€ç«¯å£è½¬æ¢ï¼‰ã€‚å®ƒå°†å¤šä¸ªç§æœ‰<code>IP</code>åœ°å€æ˜ å°„åˆ°<strong>åŒä¸€ä¸ªå…¬æœ‰IPåœ°å€</strong>çš„ä¸åŒ<strong>ç«¯å£</strong>ä¸Šã€‚</li>
<li><strong>æµç¨‹</strong>ï¼šå½“å†…éƒ¨ä¸»æœº <code>192.168.1.100 </code>ä½¿ç”¨ç«¯å£ <code>50000 </code>è®¿é—®å¤–éƒ¨æœåŠ¡å™¨æ—¶ï¼Œ<code>NAT</code>è·¯ç”±å™¨ä¼šå°†æºåœ°å€å’Œç«¯å£è½¬æ¢ä¸º (å…¬æœ‰IP, æ–°ç«¯å£å·)ï¼Œä¾‹å¦‚ (<code>202.100.1.1</code>, <code>60001</code>)ï¼Œå¹¶è®°å½•è¿™ä¸ªæ˜ å°„å…³ç³»ã€‚å½“å¤–éƒ¨æœåŠ¡å™¨å“åº”æ•°æ®åˆ° (<code>202.100.1.1</code>, <code>60001</code>) æ—¶ï¼Œè·¯ç”±å™¨æ ¹æ®è®°å½•å°†æ•°æ®åŒ…çš„ç›®çš„åœ°å€å’Œç«¯å£æ”¹å› (<code>192.168.1.100</code>, <code>50000</code>)ï¼Œå¹¶å‘é€ç»™å†…éƒ¨ä¸»æœºã€‚</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼šæå¤§åœ°èŠ‚çº¦äº†å…¬æœ‰<code>IP</code>åœ°å€ï¼Œä»…ç”¨ä¸€ä¸ªå…¬æœ‰<code>IP</code>å°±èƒ½è®©æˆç™¾ä¸Šåƒå°è®¾å¤‡åŒæ—¶ä¸Šç½‘ã€‚</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šç ´åäº†ç«¯åˆ°ç«¯çš„è¿æ¥æ¨¡å‹ï¼Œå¯èƒ½å¯¼è‡´æŸäº›<code>P2P</code>åº”ç”¨æˆ–<code>VoIP</code>åè®®å‡ºç°é—®é¢˜ã€‚</li>
</ul>
</li>
</ol>
<hr>
<h2 id="ipsec-internet-protocol-security"><a class="markdownIt-Anchor" href="#ipsec-internet-protocol-security"></a> IPsec (Internet Protocol Security)</h2>
<p><strong><code>IPsec</code></strong> æ˜¯ä¸€å¥—åè®®ç°‡ï¼Œç”¨äºåœ¨ç½‘ç»œå±‚ä¸º<code>IP</code>é€šä¿¡æä¾›é«˜è´¨é‡ã€å¯äº’æ“ä½œçš„ã€åŸºäºå¯†ç å­¦çš„å®‰å…¨ä¿éšœã€‚å®ƒèƒ½æä¾›æ•°æ®æ¥æºè®¤è¯ã€æ•°æ®å®Œæ•´æ€§ã€æ•°æ®æœºå¯†æ€§ï¼ˆåŠ å¯†ï¼‰å’Œé˜²é‡æ”¾æ”»å‡»ç­‰æœåŠ¡ï¼Œæ˜¯æ„å»º**<code>VPN</code> (è™šæ‹Ÿä¸“ç”¨ç½‘ç»œ)** çš„æ ¸å¿ƒæŠ€æœ¯ã€‚</p>
<p><strong>ä¸¤ç§å·¥ä½œæ¨¡å¼</strong>ï¼š</p>
<ol>
<li><strong>ä¼ è¾“æ¨¡å¼ (<code>Transport Mode</code>)</strong>ï¼š
<ul>
<li><strong>å·¥ä½œæ–¹å¼</strong>ï¼šåªå¯¹IPæ•°æ®æŠ¥çš„<strong>æ•°æ®éƒ¨åˆ†ï¼ˆ<code>Payload</code>ï¼‰</strong> è¿›è¡ŒåŠ å¯†æˆ–è®¤è¯ã€‚åŸå§‹çš„IPå¤´éƒ¨ä¿æŒä¸å˜ï¼Œåªæ’å…¥äº†<code>IPsec</code>å¤´éƒ¨ã€‚</li>
<li><strong>ç”¨é€”</strong>ï¼šä¸»è¦ç”¨äºä¸¤å°ä¸»æœºä¹‹é—´çš„<strong>ç«¯åˆ°ç«¯</strong>å®‰å…¨é€šä¿¡ã€‚</li>
</ul>
</li>
<li><strong>éš§é“æ¨¡å¼ (<code>Tunnel Mode</code>)</strong>ï¼š
<ul>
<li><strong>å·¥ä½œæ–¹å¼</strong>ï¼šå°†<strong>æ•´ä¸ªåŸå§‹<code>IP</code>æ•°æ®æŠ¥ï¼ˆåŒ…æ‹¬å¤´éƒ¨å’Œæ•°æ®ï¼‰</strong> éƒ½è¿›è¡ŒåŠ å¯†å’Œè®¤è¯ï¼Œç„¶åå°†å…¶å°è£…åœ¨ä¸€ä¸ªæ–°çš„IPæ•°æ®æŠ¥ä¸­ã€‚</li>
<li><strong>ç”¨é€”</strong>ï¼šä¸»è¦ç”¨äºä¸¤ä¸ªç½‘ç»œï¼ˆå¦‚å…¬å¸æ€»éƒ¨å’Œåˆ†éƒ¨ï¼‰ä¹‹é—´çš„<strong>ç½‘å…³åˆ°ç½‘å…³</strong>å®‰å…¨é€šä¿¡ï¼Œç”±ç½‘ç»œè¾¹ç¼˜çš„<code>VPN</code>ç½‘å…³æ¥å¤„ç†ã€‚è¿™æ˜¯æ„å»º<code>VPN</code>æœ€å¸¸è§çš„æ–¹å¼ã€‚</li>
</ul>
</li>
</ol>
<p><strong>æ ¸å¿ƒåè®®</strong>ï¼š</p>
<ul>
<li><strong>AH (<code>Authentication Header</code>)</strong>ï¼šåªæä¾›<strong>æ•°æ®å®Œæ•´æ€§</strong>å’Œ<strong>èº«ä»½éªŒè¯</strong>ï¼Œä½†ä¸æä¾›åŠ å¯†ã€‚å®ƒç¡®ä¿æ•°æ®åœ¨ä¼ è¾“ä¸­æœªè¢«ç¯¡æ”¹ï¼Œä½†ä¼ è¾“å†…å®¹æ˜¯æ˜æ–‡çš„ã€‚</li>
<li><strong>ESP (<code>Encapsulating Security Payload</code>)</strong>ï¼šæä¾›<strong>æ•°æ®å®Œæ•´æ€§</strong>ã€<strong>èº«ä»½éªŒè¯</strong>å’Œ<strong>æ•°æ®æœºå¯†æ€§ï¼ˆåŠ å¯†ï¼‰</strong>ã€‚è¿™æ˜¯ç›®å‰åº”ç”¨æœ€å¹¿æ³›çš„IPsecåè®®ã€‚</li>
</ul>
<hr>
<h2 id="vrrp-virtual-router-redundancy-protocol"><a class="markdownIt-Anchor" href="#vrrp-virtual-router-redundancy-protocol"></a> VRRP (Virtual Router Redundancy Protocol)</h2>
<p>åœ¨å±€åŸŸç½‘ä¸­ï¼Œå¦‚æœä½œä¸ºé»˜è®¤ç½‘å…³çš„è·¯ç”±å™¨å‘ç”Ÿæ•…éšœï¼Œæ•´ä¸ªç½‘ç»œçš„ä¸»æœºå°†æ— æ³•è®¿é—®å¤–éƒ¨ç½‘ç»œï¼Œè¿™å½¢æˆäº†ä¸€ä¸ª<strong>å•ç‚¹æ•…éšœ</strong>ã€‚<code>VRRP</code>å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œè®¾è®¡çš„ç½‘å…³å†—ä½™åè®®ã€‚</p>
<p><strong>å®šä¹‰</strong>ï¼š<strong>è™šæ‹Ÿè·¯ç”±å™¨å†—ä½™åè®® (<code>VRRP</code>)</strong> æ˜¯ä¸€ç§å®¹é”™åè®®ï¼Œå¯ä»¥å°†å¤šå°ç‰©ç†è·¯ç”±å™¨ç»„ç»‡æˆä¸€ä¸ªâ€œ<strong>è™šæ‹Ÿè·¯ç”±å™¨</strong>â€ï¼Œä»è€Œå¯¹å¤–æä¾›ä¸€ä¸ªé«˜å¯ç”¨çš„é»˜è®¤ç½‘å…³ã€‚</p>
<p><strong>å·¥ä½œåŸç†</strong>ï¼š</p>
<ol>
<li><strong>è™šæ‹Ÿè·¯ç”±å™¨</strong>ï¼šåœ¨ä¸€ä¸ª<code>VRRP</code>ç»„ä¸­ï¼Œå¤šå°ç‰©ç†è·¯ç”±å™¨å…±äº«ä¸€ä¸ª<strong>è™šæ‹Ÿ<code>IP</code>åœ°å€</strong>å’Œ<strong>è™šæ‹Ÿ<code>MAC</code>åœ°å€</strong>ã€‚ç½‘ç»œä¸­çš„æ‰€æœ‰å®¢æˆ·ç«¯éƒ½å°†è¿™ä¸ªè™šæ‹Ÿ<code>IP</code>åœ°å€é…ç½®ä¸ºå®ƒä»¬çš„é»˜è®¤ç½‘å…³ã€‚</li>
<li><strong><code>Master</code>å’Œ<code>Backup</code></strong>ï¼šåœ¨ä»»ä½•æ—¶åˆ»ï¼Œ<code>VRRP</code>ç»„ä¸­åªæœ‰ä¸€å°è·¯ç”±å™¨å¤„äº <strong><code>Master </code>(ä¸»)</strong> çŠ¶æ€ï¼Œå®ƒå®é™…æ‹¥æœ‰è™šæ‹ŸIPåœ°å€å¹¶è´Ÿè´£è½¬å‘æ•°æ®åŒ…ã€‚ç»„å†…å…¶ä»–è·¯ç”±å™¨åˆ™å¤„äº <strong><code>Backup</code> (å¤‡)</strong> çŠ¶æ€ã€‚</li>
<li><strong>å¿ƒè·³æ£€æµ‹</strong>ï¼š<code>Master</code>è·¯ç”±å™¨ä¼šå‘¨æœŸæ€§åœ°å‘é€<code>VRRP</code>é€šå‘ŠæŠ¥æ–‡ï¼ˆå¿ƒè·³ï¼‰ï¼Œå‘<code>Backup</code>è·¯ç”±å™¨å®£å‘Šè‡ªå·±å¤„äºæ´»åŠ¨çŠ¶æ€ã€‚</li>
<li><strong>æ•…éšœåˆ‡æ¢</strong>ï¼šå¦‚æœ<code>Backup</code>è·¯ç”±å™¨åœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°<code>Master</code>çš„å¿ƒè·³æŠ¥æ–‡ï¼Œå®ƒä¼šè®¤ä¸º<code>Master</code>å·²ç»å‡ºç°æ•…éšœã€‚æ­¤æ—¶ï¼Œä¼˜å…ˆçº§æœ€é«˜çš„<code>Backup</code>è·¯ç”±å™¨ä¼šè‡ªåŠ¨åˆ‡æ¢ä¸ºæ–°çš„<code>Master</code>ï¼Œæ¥ç®¡è™šæ‹Ÿ<code>IP</code>åœ°å€å’Œ<code>MAC</code>åœ°å€ï¼Œå¹¶å¼€å§‹è½¬å‘æ•°æ®ã€‚</li>
<li><strong>æ— ç¼åˆ‡æ¢</strong>ï¼šè¿™ä¸ªåˆ‡æ¢è¿‡ç¨‹å¯¹å®¢æˆ·ç«¯æ˜¯å®Œå…¨é€æ˜çš„ï¼Œå®¢æˆ·ç«¯æ— éœ€è¿›è¡Œä»»ä½•æ›´æ”¹ï¼Œä»è€Œä¿è¯äº†ç½‘ç»œè¿æ¥çš„è¿ç»­æ€§ã€‚</li>
</ol>
<hr>
<h2 id="mpls-multiprotocol-label-switching"><a class="markdownIt-Anchor" href="#mpls-multiprotocol-label-switching"></a> MPLS (Multiprotocol Label Switching)</h2>
<p><code>MPLS</code>æ˜¯ä¸€ç§é«˜æ€§èƒ½çš„ç”µä¿¡çº§ç½‘ç»œæŠ€æœ¯ï¼Œå®ƒåœ¨ä¼ ç»Ÿçš„IPè·¯ç”±ï¼ˆç¬¬ä¸‰å±‚ï¼‰å’Œæ•°æ®é“¾è·¯å±‚äº¤æ¢ï¼ˆç¬¬äºŒå±‚ï¼‰ä¹‹é—´å·¥ä½œï¼Œå¸¸è¢«ç§°ä¸ºâ€œ<strong>2.5å±‚</strong>â€æŠ€æœ¯ã€‚</p>
<p><strong>å®šä¹‰</strong>ï¼š<strong>å¤šåè®®æ ‡ç­¾äº¤æ¢ (<code>MPLS</code>)</strong> é€šè¿‡ç»™æ•°æ®åŒ…é¢„å…ˆåˆ†é…ç®€çŸ­ã€å›ºå®šé•¿åº¦çš„â€œ<strong>æ ‡ç­¾ï¼ˆ<code>Label</code>ï¼‰</strong>â€ï¼Œå¹¶æ ¹æ®æ ‡ç­¾è¿›è¡Œè½¬å‘ï¼Œè€Œä¸æ˜¯åƒä¼ ç»Ÿè·¯ç”±é‚£æ ·åœ¨æ¯ä¸€è·³éƒ½æŸ¥æ‰¾å¤æ‚çš„IPè·¯ç”±è¡¨ã€‚</p>
<p><strong>å·¥ä½œåŸç†</strong>ï¼š</p>
<ol>
<li><strong>æ ‡ç­¾åˆ†å‘</strong>ï¼š<code>MPLS</code>ç½‘ç»œä¸­çš„è·¯ç”±å™¨ï¼ˆç§°ä¸º<code>LSR</code> - æ ‡ç­¾äº¤æ¢è·¯ç”±å™¨ï¼‰ä¼šé€šè¿‡<code>LDP</code>ï¼ˆæ ‡ç­¾åˆ†å‘åè®®ï¼‰ç­‰åè®®ï¼Œé¢„å…ˆä¸ºç½‘ç»œä¸­çš„IPå‰ç¼€ï¼ˆè·¯ç”±ï¼‰å»ºç«‹æ ‡ç­¾æ˜ å°„å…³ç³»ï¼Œå½¢æˆ<strong>æ ‡ç­¾è½¬å‘ä¿¡æ¯åº“ (<code>LFIB</code>)</strong>ã€‚</li>
<li><strong>å…¥å£æ‰“æ ‡ (<code>Push</code>)</strong>ï¼šå½“ä¸€ä¸ªIPæ•°æ®åŒ…è¿›å…¥<code>MPLS</code>ç½‘ç»œæ—¶ï¼Œå…¥å£è·¯ç”±å™¨ï¼ˆ<code>Ingress LER</code>ï¼‰ä¼šè¿›è¡Œä¸€æ¬¡å¸¸è§„çš„<code>IP</code>è·¯ç”±æŸ¥æ‰¾ï¼Œç„¶åç»™è¿™ä¸ªæ•°æ®åŒ…å‹å…¥ä¸€ä¸ªæˆ–å¤šä¸ª<code>MPLS</code>æ ‡ç­¾ï¼Œå½¢æˆä¸€ä¸ªå¸¦æ ‡ç­¾çš„æ•°æ®åŒ…ã€‚</li>
<li><strong>æ ‡ç­¾äº¤æ¢ (<code>Swap</code>)</strong>ï¼šåœ¨<code>MPLS</code>ç½‘ç»œå†…éƒ¨ï¼Œæ ¸å¿ƒçš„<code>LSR</code>è·¯ç”±å™¨ä¸å†æŸ¥çœ‹<code>IP</code>å¤´éƒ¨ã€‚å®ƒä»¬åªéœ€è¯»å–æœ€å¤–å±‚çš„æ ‡ç­¾ï¼Œåœ¨<code>LFIB</code>ä¸­è¿›è¡Œæé€ŸæŸ¥æ‰¾ï¼Œç„¶åâ€œäº¤æ¢â€ï¼ˆæ›¿æ¢ï¼‰æ ‡ç­¾ï¼Œå¹¶å°†æ•°æ®åŒ…è½¬å‘åˆ°ä¸‹ä¸€ä¸ª<code>LSR</code>ã€‚</li>
<li><strong>å‡ºå£å¼¹æ ‡ (<code>Pop</code>)</strong>ï¼šå½“æ•°æ®åŒ…åˆ°è¾¾<code>MPLS</code>ç½‘ç»œçš„å‡ºå£è·¯ç”±å™¨ï¼ˆ<code>Egress LER</code>ï¼‰æ—¶ï¼Œæ ‡ç­¾è¢«ç§»é™¤ï¼ˆå¼¹å‡ºï¼‰ï¼Œæ¢å¤æˆåŸå§‹çš„<code>IP</code>æ•°æ®åŒ…ï¼Œç„¶åç»§ç»­è¿›è¡Œæ ‡å‡†çš„<code>IP</code>è½¬å‘ã€‚</li>
</ol>
<p><strong>ä¸»è¦ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li><strong>é«˜é€Ÿè½¬å‘</strong>ï¼šåŸºäºæ ‡ç­¾çš„ç²¾ç¡®åŒ¹é…äº¤æ¢æ¯”åŸºäº<code>IP</code>åœ°å€çš„æœ€é•¿å‰ç¼€åŒ¹é…æŸ¥æ‰¾è¦å¿«å¾—å¤šã€‚</li>
<li><strong>æµé‡å·¥ç¨‹ (<code>Traffic Engineering</code>)</strong>ï¼š<code>MPLS</code>å¯ä»¥é¢„å…ˆè®¾å®šæ•°æ®æµçš„è·¯å¾„ï¼ˆå»ºç«‹<code>LSP</code> - æ ‡ç­¾äº¤æ¢è·¯å¾„ï¼‰ï¼Œè€Œä¸å¿…å®Œå…¨éµå¾ª<code>IGP</code>è®¡ç®—å‡ºçš„æœ€çŸ­è·¯å¾„ã€‚è¿™ä½¿å¾—ç½‘ç»œç®¡ç†å‘˜å¯ä»¥ç²¾ç»†åœ°æ§åˆ¶æµé‡ï¼Œä»¥ä¼˜åŒ–å¸¦å®½åˆ©ç”¨ç‡æˆ–ç»•è¿‡æ‹¥å¡ç‚¹ã€‚</li>
<li><strong>VPNæ”¯æŒ</strong>ï¼š<code>MPLS</code>æ˜¯æ„å»ºå¤§è§„æ¨¡ã€é«˜æ€§èƒ½<code>VPN</code>ï¼ˆç‰¹åˆ«æ˜¯<code>MPLS</code> <code>L3VPN</code>ï¼‰çš„åŸºç¡€æŠ€æœ¯ï¼Œè¢«å…¨çƒå„å¤§<code>ISP</code>å¹¿æ³›é‡‡ç”¨ã€‚</li>
</ul>
<p>ä»åœ¨å’•å’•å’•ä¸­</p>
]]></content>
      <categories>
        <category>Computer Networks</category>
      </categories>
      <tags>
        <tag>Network</tag>
      </tags>
  </entry>
  <entry>
    <title>My-Fedora-Journey</title>
    <url>/My-Fedora-Journey/</url>
    <content><![CDATA[<blockquote>
<p>å†·çŸ¥è¯†:</p>
<ul>
<li>F2æ˜¯ç¿¼é¾™å¼€biosçš„æŒ‰é”®</li>
<li>fedoraæ˜¯rpmç³»ï¼Œå¯ä»¥ç›´æ¥ç”¨dnf install xxx.rpm</li>
<li>fedoraä¸æ˜¯arch</li>
</ul>
</blockquote>
<h2 id="desktopkde-plasmastop-using-gnome"><a class="markdownIt-Anchor" href="#desktopkde-plasmastop-using-gnome"></a> Desktop(KDE plasma)::stop using GNOME!</h2>
<p>å‰ç«¯æœ¬æ¥ç”¨çš„æ˜¯é»˜è®¤çš„<code>GNOME</code>ï¼Œå› ä¸ºæ²¡æœ‰æ¡Œé¢å¾ˆéš¾å—æ‰€ä»¥æ¢æˆäº†<code>KDE plasma</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> dnf install @kde-desktop-environment</span></span><br></pre></td></tr></table></figure>
<p>åé¢å¯ä»¥åœ¨ç™»å½•é¡µé¢åˆ‡æ¢æ¡Œé¢å‰ç«¯</p>
<h2 id="bootrefinduefi-boot-manager"><a class="markdownIt-Anchor" href="#bootrefinduefi-boot-manager"></a> Boot(rEFInd)::UEFI Boot Manager</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> dnf install rEFInd</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> refind-install</span></span><br><span class="line">ShimSource is none</span><br><span class="line">Installing rEFInd on Linux....</span><br><span class="line">ESP was found at /boot/efi using vfat</span><br><span class="line"></span><br><span class="line">CAUTION: Your computer appears to be booted with Secure Boot, but you haven&#x27;t</span><br><span class="line">specified a valid shim.efi file source. Chances are you should re-run with</span><br><span class="line">the --shim option. You can read more about this topic at</span><br><span class="line">http://www.rodsbooks.com/refind/secureboot.html.</span><br><span class="line"></span><br><span class="line">Do you want to proceed with installation (Y/N)? n</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™çœ‹å‡ºæ¥é—®é¢˜äº†ï¼Œè„šæœ¬å¹¶ä¸èƒ½è‡ªä¸»è¯†åˆ«æœ¬åœ°efiåœ¨å“ªä¸ªåœ°æ–¹<br>
å› æ­¤ä½¿ç”¨äº†<code>sudo refind-install --shim /boot/efi/EFI/fedora/shimx64.efi</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> refind-install --shim /boot/efi/EFI/fedora/shimx64.efi</span></span><br><span class="line">ShimSource is /boot/efi/EFI/fedora/shimx64.efi</span><br><span class="line">Installing rEFInd on Linux....</span><br><span class="line">ESP was found at /boot/efi using vfat</span><br><span class="line">Installing driver for ext4 (ext4_x64.efi)</span><br><span class="line">Storing copies of rEFInd Secure Boot public keys in //etc/refind.d/keys</span><br><span class="line">Copied rEFInd binary files</span><br><span class="line"></span><br><span class="line">Copying sample configuration file as refind.conf; edit this file to configure</span><br><span class="line">rEFInd.</span><br><span class="line"></span><br><span class="line">Creating new NVRAM entry</span><br><span class="line">rEFInd is set as the default boot manager.</span><br><span class="line">Creating //boot/refind_linux.conf; edit it to adjust kernel options.</span><br><span class="line">The appropriate Secure Boot key is already enrolled.</span><br><span class="line"></span><br><span class="line">Installation has completed successfully.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è¿™è¾¹çœ‹èµ·æ¥è¯´éƒ½å¼„å¥½äº†ï¼Œç»“æœæˆ‘åˆ°MoKé‚£è¾¹å»æ‰¾çš„æ—¶å€™å‚»çœ¼äº†ï¼Œå‘ç°è¿™ä¸ªkeysç›®å½•æ˜¯ç©ºçš„å•Šï¼<br>
æŠ˜è…¾æ­»äº†ï¼Œæœ€åè¿˜æ˜¯é€‰æ‹©å…³æ‰äº†<code>Secure Boot</code><br>
ç›®å‰é…ç½®ä»æœ‰é—®é¢˜ï¼Œè‡ªåŠ¨çš„è¯†åˆ«ä¼šå¤šå‡ºæ¥å¾ˆå¤šçš„å¯åŠ¨é¡¹<br>
ä¸è¿‡ç¡®å®å¯ä»¥è‡ªåŠ¨æ‰«åˆ°windowså’Œfedora,èƒ½ç»Ÿä¸€å¯åŠ¨æ˜¯äº‹å®ï¼Œä½†ç›®å‰ä½“éªŒæ„Ÿä¸å¥½</p>
<blockquote>
<p>æœ€æ–°æ¶ˆæ¯ï¼š<br>
ä½¿ç”¨é»˜è®¤ä¸»é¢˜é€‰åˆ°ä¸éœ€è¦çš„å¯åŠ¨é¡¹å¯ä»¥ä½¿ç”¨DelæŒ‰é”®é€‰æ‹©éšè—ï¼Œå› æ­¤å¯ä»¥ä¿®æ”¹å¥½ä¹‹åå†å¯åŠ¨</p>
</blockquote>
<p>åŒæ—¶å¦‚æœç±»ä¼¼fedoraè¿™ç§å¯ä»¥æ‰«å‡ºæ¥å¾ˆå¤šå†…å®¹ï¼Œè¦æ³¨æ„ä¿ç•™çš„æ˜¯ä»€ä¹ˆï¼Œæˆ‘å°±ç”¨æˆ‘è‡ªå·±æ‰«åˆ°çš„ä¸¾ä¸ªä¾‹å­</p>
<ul>
<li>Boot Microsoft EFI boot from EFI System Partition</li>
<li>Boot EFI\fedora\grubx64.efi from EFI System Partition</li>
<li>Boot EFI\fedora\gcdx64.efi from EFI System Partition</li>
<li>Boot Fallback boot loader from EFI System Partition</li>
<li>Boot vmlinuz-6.16.12-200.fc42.x86_64 from 1024 MiB ext4 Volume</li>
</ul>
<p>è¿™è¾¹åªéœ€è¦ä¿ç•™<code>Microsoft EFI boot</code>å’Œæœ€åä¸€ä¸ª <code>vmlinuz</code></p>
<p>ä½¿ç”¨çš„ä¸»é¢˜æ˜¯<br>
<a href="https://github.com/catppuccin/refind">GitHub - catppuccin/refind: ğŸ”„ Soothing pastel theme for rEFInd</a></p>
<blockquote>
<p>çŸ¥è¯†æ‹“å±•</p>
</blockquote>
<h3 id="uefi-bios"><a class="markdownIt-Anchor" href="#uefi-bios"></a> UEFI &amp; BIOS</h3>
<p>BIOS(<strong>Basic Input/Output System</strong>)</p>
<ol>
<li><strong>POST (Power-On Self-Testï¼Œå¼€æœºè‡ªæ£€)</strong>ï¼š
<ul>
<li>å®ƒä¼šå…ˆæ¸…ç‚¹ä¸€éå®¶å½“ï¼Œå¿«é€Ÿæ£€æŸ¥æ‰€æœ‰æ ¸å¿ƒç¡¬ä»¶æ˜¯å¦è¿æ¥æ­£å¸¸å¹¶èƒ½å·¥ä½œã€‚å¦‚æœå‘ç°ä¸¥é‡é—®é¢˜ï¼ˆæ¯”å¦‚æ²¡æ’å†…å­˜æ¡ï¼‰ï¼Œå®ƒå°±ä¼šé€šè¿‡é¸£å«æ¥æŠ¥è­¦ã€‚</li>
</ul>
</li>
<li><strong>å¯»æ‰¾â€œäº¤æ¥æ‰‹å†Œâ€</strong>ï¼š
<ul>
<li>è‡ªæ£€é€šè¿‡åï¼Œè€ç®¡å®¶éœ€è¦æ‰¾åˆ°æ“ä½œç³»ç»Ÿçš„â€œå¯åŠ¨è¯´æ˜ä¹¦â€ã€‚å®ƒä¸çŸ¥é“ Windows æˆ– Linux æ˜¯ä»€ä¹ˆï¼Œä½†å®ƒçŸ¥é“è¦å»ä¸€ä¸ª<strong>å›ºå®šçš„åœ°æ–¹</strong>æ‰¾ã€‚è¿™ä¸ªåœ°æ–¹å°±æ˜¯ç¡¬ç›˜çš„<strong>ç¬¬ä¸€ä¸ªæ‰‡åŒº</strong>ï¼Œä¸€ä¸ªä»…æœ‰ 512 å­—èŠ‚çš„å¾®å°ç©ºé—´ï¼Œè¢«ç§°ä¸º<strong>ä¸»å¼•å¯¼è®°å½• (MBR - Master Boot Record)</strong>ã€‚</li>
</ul>
</li>
<li><strong>åŠ è½½å¹¶æ‰§è¡Œ</strong>ï¼š
<ul>
<li>BIOS ä¼šæŠŠ MBR é‡Œçš„è¿™æ®µä»£ç åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œç„¶åæŠŠè®¡ç®—æœºçš„æ§åˆ¶æƒå®Œå…¨äº¤ç»™å®ƒã€‚BIOS çš„ä»»åŠ¡åˆ°æ­¤åŸºæœ¬ç»“æŸã€‚</li>
</ul>
</li>
<li><strong>äº¤æ¥ç­</strong>ï¼š
<ul>
<li>ä» MBR å¼€å§‹ï¼Œåç»­çš„å¼•å¯¼åŠ è½½ç¨‹åºä¼šä¸€æ­¥æ­¥æ¥åŠ›ï¼Œæœ€ç»ˆå°†æ•´ä¸ªæ“ä½œç³»ç»ŸåŠ è½½åˆ°å†…å­˜ä¸­å¹¶è¿è¡Œèµ·æ¥ã€‚</li>
</ul>
</li>
</ol>
<blockquote>
<p>åœ¨å‡ åå¹´çš„æ—¶é—´é‡Œï¼ŒBIOS å·¥ä½œå¾—éå¸¸å‡ºè‰²ã€‚å®ƒç®€å•ã€å¯é ã€æ ‡å‡†åŒ–ã€‚ä½†éšç€è®¡ç®—æœºæŠ€æœ¯çˆ†ç‚¸å¼å‘å±•ï¼Œè¿™ä½è€ç®¡å®¶å¼€å§‹æ˜¾å¾—åŠ›ä¸ä»å¿ƒï¼Œä»–çš„å‡ ä¸ªâ€œè€æ¯›ç—…â€è¶Šæ¥è¶Šä¸¥é‡ï¼š</p>
</blockquote>
<ul>
<li><strong>è§†é‡å¤ªçª„ï¼ˆ2.2TB ç¡¬ç›˜é™åˆ¶ï¼‰</strong>ï¼šMBR ä½¿ç”¨ 32 ä½åœ°å€æ¥è®°å½•åˆ†åŒºï¼Œè¿™å¯¼è‡´å®ƒèƒ½ç®¡ç†çš„æœ€å¤§ç¡¬ç›˜å®¹é‡åªæœ‰ 2.2TBã€‚åœ¨ä»Šå¤© 4TBã€8TB ç¡¬ç›˜æ™®åŠçš„æ—¶ä»£ï¼Œè¿™æˆäº†ä¸€ä¸ªæ— æ³•é€¾è¶Šçš„éšœç¢ã€‚</li>
<li><strong>å¯åŠ¨å¤ªæ…¢</strong>ï¼šBIOS åªèƒ½ä»¥ 16 ä½çš„â€œè€æ¨¡å¼â€è¿è¡Œï¼Œå†…å­˜å¯»å€èƒ½åŠ›åªæœ‰ 1MBï¼Œå¹¶ä¸”å®ƒæ˜¯ä¸€ä¸ªä¸ªåœ°åˆå§‹åŒ–ç¡¬ä»¶ï¼Œæ•ˆç‡ä½ä¸‹ã€‚</li>
<li><strong>ä¸å¤Ÿå®‰å…¨</strong>ï¼šBIOS æ²¡æœ‰ä»»ä½•å®‰å…¨æ ¡éªŒæœºåˆ¶ã€‚é»‘å®¢å¯ä»¥åˆ¶é€ ä¸€ç§å«â€œBootkitâ€çš„ç—…æ¯’ï¼Œåœ¨æ“ä½œç³»ç»Ÿå¯åŠ¨å‰å°±æ„ŸæŸ“ MBRï¼Œä»è€Œè·å¾—æœ€é«˜æ§åˆ¶æƒï¼Œæéš¾è¢«å‘ç°å’Œæ¸…é™¤ã€‚</li>
<li><strong>ç•Œé¢å¤è€</strong></li>
</ul>
<p>åœ¨è€å¼çš„ BIOS å¯åŠ¨æ–¹å¼ä¸‹ï¼Œç”µè„‘å¯åŠ¨æ—¶ä¼šå»ç¡¬ç›˜çš„ä¸»å¼•å¯¼è®°å½• MBR å¯»æ‰¾å¯åŠ¨ä»£ç ï¼Œè¿™ç§æ–¹æ³•è¾ƒä¸ºæ­»æ¿ï¼Œå› æ­¤èªæ˜çš„äººä»¬å°±æƒ³åˆ°äº†å¦ä¸€ç§å¯åŠ¨æ–¹å¼ï¼šUEFI<br>
UEFI ç»Ÿä¸€å¯æ‰©å±•å›ºä»¶æ¥å£å¯åŠ¨æ–¹å¼ï¼Œå®ƒä¸ä¾èµ–äºæŸä¸ªå›ºå®šä½ç½®ï¼Œè€Œæ˜¯è§„å®šç¡¬ç›˜ä¸Šå¿…é¡»æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å°åˆ†åŒºï¼Œè¿™å°±æ˜¯ ESP(<strong>EFI System Partition</strong>)</p>
<p>ESPçš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li><strong>æ ¼å¼ç‰¹æ®Š</strong>ï¼šå®ƒå¿…é¡»æ˜¯Â FAT32Â æ ¼å¼ã€‚è¿™æ˜¯ä¸ºäº†ç¡®ä¿æ‰€æœ‰æ“ä½œç³»ç»Ÿå’Œ UEFI å›ºä»¶éƒ½èƒ½æ— éšœç¢åœ°è¯»å†™å®ƒ</li>
<li><strong>åŠŸèƒ½ä¸“ä¸€</strong>ï¼šå®ƒçš„å”¯ä¸€ä½œç”¨å°±æ˜¯å­˜æ”¾<strong>å¼•å¯¼åŠ è½½ç¨‹åº (Bootloader)</strong></li>
</ul>
<p><strong>ESP æ˜¯æ‰€æœ‰å·²å®‰è£…æ“ä½œç³»ç»Ÿçš„å¯åŠ¨ç¨‹åºçš„å­˜æ”¾åœ°å’Œè°ƒåº¦ä¸­å¿ƒ</strong></p>
<p>UEFI çš„é©å‘½æ€§ä¼˜åŠ¿</p>
<ol>
<li><strong>å…¨æ–°çš„å¯åŠ¨æ–¹å¼ï¼šGPT åˆ†åŒºä¸ ESP åˆ†åŒº</strong>
<ul>
<li><strong>å‘Šåˆ« MBRï¼Œæ‹¥æŠ± GPT</strong>ï¼šUEFI ä¸å†ä½¿ç”¨ MBRï¼Œè€Œæ˜¯ä½¿ç”¨å…¨æ–°çš„Â <strong>GPT (GUID Partition Table)</strong>Â åˆ†åŒºæ–¹æ¡ˆã€‚GPT ä½¿ç”¨ 64 ä½åœ°å€ï¼Œç†è®ºä¸Šå¯ä»¥æ”¯æŒé«˜è¾¾ 9.4 ZB (94 äº¿ TB) çš„ç¡¬ç›˜ï¼Œå½»åº•è§£å†³äº†å®¹é‡é™åˆ¶é—®é¢˜ã€‚åŒæ—¶ï¼Œå®ƒè¿˜æ”¯æŒå¤šè¾¾ 128 ä¸ªä¸»åˆ†åŒºã€‚</li>
<li><strong>å‘Šåˆ«å›ºå®šä½ç½®ï¼Œå¯ç”¨ ESP</strong>ï¼šUEFI ä¸å†å»ç¡¬ç›˜çš„ç¬¬ä¸€ä¸ªæ‰‡åŒºæ‰¾å¯åŠ¨ä»£ç ã€‚è€Œæ˜¯åœ¨ç¡¬ç›˜ä¸Šå»ºç«‹ä¸€ä¸ªæ ‡å‡†åŒ–çš„Â <strong>EFI ç³»ç»Ÿåˆ†åŒº (ESP)</strong>ã€‚æ‰€æœ‰æ“ä½œç³»ç»Ÿçš„å¼•å¯¼åŠ è½½ç¨‹åºï¼ˆ.efiÂ æ–‡ä»¶ï¼‰éƒ½ä»¥æ™®é€šæ–‡ä»¶çš„å½¢å¼å­˜æ”¾åœ¨è¿™ä¸ªåˆ†åŒºé‡Œã€‚UEFI å›ºä»¶ä¼šæ‰«æå¹¶è¯»å–è¿™äº›æ–‡ä»¶ï¼Œç”Ÿæˆä¸€ä¸ªå¯åŠ¨èœå•ã€‚è¿™å°±åƒä»â€œåœ¨é—¨ç¼ä¸‹å¡çº¸æ¡â€å‡çº§åˆ°äº†â€œæ‹¥æœ‰ä¸€ä¸ªæ ‡å‡†çš„å…¬å‘Šæ¿â€ã€‚</li>
</ul>
</li>
<li>**å®‰å…¨å¯åŠ¨ (Secure Boot)
<ul>
<li>è¿™æ˜¯ UEFI æœ€æ ¸å¿ƒçš„ä¼˜åŠ¿ä¹‹ä¸€ã€‚å®ƒå»ºç«‹äº†ä¸€ä¸ªâ€œä¿¡ä»»é“¾â€ã€‚ä¸»æ¿å›ºä»¶å†…ç½®äº†ä¸€äº›å—ä¿¡ä»»çš„å…¬é’¥ï¼ˆé€šå¸¸æ˜¯å¾®è½¯å’Œç¡¬ä»¶å‚å•†çš„ï¼‰ã€‚</li>
<li>åœ¨å¯åŠ¨æ—¶ï¼ŒUEFI ä¼šæ ¡éªŒå¼•å¯¼åŠ è½½ç¨‹åºï¼ˆå¦‚Â gcdx64.efiï¼‰çš„æ•°å­—ç­¾åã€‚å¦‚æœç­¾åæ— æ•ˆæˆ–è¢«ç¯¡æ”¹ï¼ŒUEFI ä¼šæ‹’ç»æ‰§è¡Œå®ƒï¼Œä»è€Œä»æ ¹æºä¸Šæœç»äº† Bootkit ç—…æ¯’çš„å…¥ä¾µã€‚</li>
</ul>
</li>
<li><strong>ç°ä»£åŒ–çš„äººæœºäº¤äº’</strong>
<ul>
<li>UEFI æ‹¥æœ‰<strong>å›¾å½¢åŒ–ç•Œé¢</strong>ï¼Œæ”¯æŒé¼ æ ‡æ“ä½œï¼Œåˆ†è¾¨ç‡æ›´é«˜ï¼Œè®¾ç½®é€‰é¡¹ä¹Ÿæ›´ä¸°å¯Œã€æ›´äººæ€§åŒ–ã€‚</li>
<li>å®ƒæ˜¯ä¸€ä¸ªå¯æ‰©å±•çš„å¹³å°ï¼Œä¸»æ¿å‚å•†å¯ä»¥åœ¨ UEFI ç•Œé¢ä¸­å†…ç½®å„ç§é«˜çº§åŠŸèƒ½ï¼Œæ¯”å¦‚ç¡¬ä»¶è¯Šæ–­å·¥å…·ã€åœ¨çº¿å›ºä»¶æ›´æ–°ï¼Œç”šè‡³æ˜¯ä¸€ä¸ªç®€æ˜“çš„ç½‘é¡µæµè§ˆå™¨ã€‚</li>
</ul>
</li>
<li><strong>æ— ä¸ä¼¦æ¯”çš„æ€§èƒ½å’Œé€Ÿåº¦</strong>
<ul>
<li>UEFI ä»¥ 32 ä½æˆ– 64 ä½æ¨¡å¼è¿è¡Œï¼Œå¯ä»¥è®¿é—®å…¨éƒ¨ç³»ç»Ÿå†…å­˜ï¼Œæ²¡æœ‰ 1MB çš„é™åˆ¶ã€‚</li>
<li>å®ƒå¯ä»¥å¹¶è¡Œåˆå§‹åŒ–ç¡¬ä»¶è®¾å¤‡ï¼Œå¤§å¤§ç¼©çŸ­äº†å¼€æœºè‡ªæ£€æ—¶é—´ï¼Œå®ç°äº†â€œç§’é€Ÿå¼€æœºâ€ã€‚</li>
</ul>
</li>
<li><strong>å¼ºå¤§çš„æ‰©å±•æ€§</strong>
<ul>
<li>UEFI å¯ä»¥åŠ è½½ç‹¬ç«‹çš„ç¡¬ä»¶é©±åŠ¨ç¨‹åºã€‚è¿™æ„å‘³ç€å®ƒåœ¨æ“ä½œç³»ç»Ÿå¯åŠ¨å‰å°±èƒ½è¯†åˆ«å¹¶ä½¿ç”¨æ›´å¤šçš„ç¡¬ä»¶ï¼Œæ¯”å¦‚ç½‘å¡ï¼ˆå®ç°ç½‘ç»œå¯åŠ¨æˆ–è¿œç¨‹è¯Šæ–­ï¼‰ã€‚</li>
</ul>
</li>
</ol>
<h3 id="efié‡Œé¢çš„xdx"><a class="markdownIt-Anchor" href="#efié‡Œé¢çš„xdx"></a> efié‡Œé¢çš„xdx</h3>
<p>Boot EFI\fedora\grubx64.efi from EFI System Partition<br>
æˆ‘ä»¬ä»¥è¿™ä¸ªä¸ºä¾‹å­ï¼Œè¿™æ˜¯grubï¼ŒFedora çš„ä¸»è¦å¼•å¯¼åŠ è½½ç¨‹åº GRUB2(<em>GRand Unified Bootloader</em>)</p>
<p>Boot EFI\fedora\gcdx64.efi from EFI System Partition<br>
è¿™ä¸ªæ˜¯ä¸ºäº†å…¼å®¹<strong>Secure Boot</strong>Â åŠŸèƒ½è€Œå­˜åœ¨çš„ç‰¹æ®Šç¨‹åº<strong>Secure Boot Shim</strong>ã€‚å®‰å…¨å¯åŠ¨æ˜¯ UEFI çš„ä¸€ä¸ªå®‰å…¨ç‰¹æ€§ï¼Œå®ƒè¦æ±‚æ‰€æœ‰å¯åŠ¨ä»£ç éƒ½å¿…é¡»æœ‰å—ä¿¡ä»»çš„æ•°å­—ç­¾åï¼Œä»¥é˜²æ­¢æ¶æ„è½¯ä»¶åœ¨æ“ä½œç³»ç»Ÿå¯åŠ¨å‰è¿è¡Œ<br>
grubx64.efiÂ æ²¡æœ‰å¾®è½¯çš„ç­¾åï¼Œè€Œè¿™ä¸ªä½¿ç”¨äº†shimæ¥ç­¾åï¼Œå¾ˆå¤šæ—¶å€™è¿™ä¸ªéƒ½æ˜¯é»˜è®¤çš„å¯åŠ¨æ–¹å¼</p>
<p>Boot Fallback boot loader from EFI System Partition<br>
è¿™æ˜¯<strong>å¤‡ç”¨/åº”æ€¥å¼•å¯¼åŠ è½½ç¨‹åº</strong>ï¼ŒUEFI è§„èŒƒå®šä¹‰äº†ä¸€ä¸ªæ ‡å‡†çš„ã€é€šç”¨çš„å¯åŠ¨è·¯å¾„ï¼šEFI\BOOT\BOOTX64.EFIã€‚å¦‚æœå› ä¸ºæŸäº›åŸå› ï¼ˆæ¯”å¦‚ç³»ç»Ÿé…ç½®é”™è¯¯ã€NVRAM è®°å½•ä¸¢å¤±ï¼‰ï¼ŒUEFI æ‰¾ä¸åˆ°ä¸ºç³»ç»Ÿè®¾ç½®çš„ç‰¹å®šå¯åŠ¨é¡¹ï¼Œå®ƒä¼šæœ€åå°è¯•å»å¯»æ‰¾è¿™ä¸ªâ€œå¤‡ç”¨è·¯å¾„â€ã€‚</p>
<p>Boot vmlinuz-6.16.12-200.fc42.x86_64 from 1024 MiB ext4 Volume<br>
è¿™æ˜¯ç›´æ¥ä» Linux æ–‡ä»¶ç³»ç»Ÿå¯åŠ¨ Linux å†…æ ¸ã€‚ç°ä»£ Linux å†…æ ¸æ”¯æŒä¸€ç§å«Â EFISTUBÂ çš„æŠ€æœ¯ï¼Œå…è®¸ UEFI å›ºä»¶åƒè¿è¡Œä¸€ä¸ªÂ .efiÂ ç¨‹åºä¸€æ ·ï¼Œç›´æ¥åŠ è½½å¹¶è¿è¡Œå†…æ ¸æ–‡ä»¶<br>
æˆ‘ç›®å‰å¼€æœºä½¿ç”¨çš„å°±æ˜¯è¿™ä¸ªï¼Œå› ä¸ºå®ƒç¡®å®å¿«ä¸€äº›</p>
<h2 id="systemfedoramaybe-u-should-know-something-about-this"><a class="markdownIt-Anchor" href="#systemfedoramaybe-u-should-know-something-about-this"></a> System(fedora)::maybe U should know something about this</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> dnf update</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> dnf upgrade --refresh</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> dnf search htop <span class="comment"># æœç´¢åŒ…</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> dnf remove htop <span class="comment"># åˆ é™¤</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> dnf list installed <span class="comment"># æŸ¥çœ‹å®‰è£…çš„åŒ…</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> dnf autoremove    <span class="comment"># åˆ é™¤å­¤ç«‹çš„ä¾èµ–åŒ…</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> dnf clean all    <span class="comment"># æ¸…ç† DNF ç¼“å­˜</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">ls</span> -lha <span class="comment"># ä»¥æ›´æ˜“è¯»çš„æ ¼å¼ (-h) æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ (-l)ï¼ŒåŒ…æ‹¬éšè—æ–‡ä»¶ (-a)ã€‚</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> /etc/nginx <span class="comment"># cd .. cd ~Â orÂ cdï¼š</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">pwd</span> <span class="comment"># åº·åº·ä½ åœ¨å“ªé‡Œå£ç‰™</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">mkdir</span> Projects</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cp</span> source.txt destination.txt</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cp</span> -r source_folder/ destination_folder/ï¼š-rÂ è¡¨ç¤ºé€’å½’å¤åˆ¶æ•´ä¸ªæ–‡ä»¶å¤¹ã€‚</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> journalctl --vacuum-time=2weeks   <span class="comment"># ä»…ä¿ç•™ä¸¤å‘¨æ—¥å¿—</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flatpak uninstall --unused  <span class="comment"># flatpak ä¸ä½¿ç”¨çš„åŒ…</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">du</span> -sh ~/.cache</span></span><br><span class="line">6.2G    /home/s3loy/.cache</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">rm</span> -rf ~/.cache/*</span></span><br></pre></td></tr></table></figure>
<p>åˆ«æ€¥</p>
<h2 id="toolneofetchshow-your-os"><a class="markdownIt-Anchor" href="#toolneofetchshow-your-os"></a> Tool(neofetch)::Show your OS</h2>
<p><code>fedora</code>çš„å®˜æ–¹ä»“åº“é‡Œé¢æ˜¯æ²¡æœ‰neofetchçš„ï¼Œä½†æ˜¯å¯ä»¥<br>
<code>sudo dnf install fastfetch</code><br>
ä½œä¸ºæ›¿ä»£<br>
ä½†æ˜¯å®˜æ–¹å…¶å®ä¹Ÿæœ‰ç»™å‡ºè§£å†³æ–¹æ¡ˆ<br>
<a href="https://github.com/dylanaraps/neofetch/wiki/Installation#fedora--rhel--centos--mageia--openmandriva">Installation Â· dylanaraps/neofetch Wiki Â· GitHub</a></p>
<h2 id="toolbleachbitrubbish-sorting"><a class="markdownIt-Anchor" href="#toolbleachbitrubbish-sorting"></a> Tool(bleachbit)::Rubbish Sorting</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> dnf install bleachbit</span></span><br></pre></td></tr></table></figure>
<h2 id="gaminggamemodegames-optimize"><a class="markdownIt-Anchor" href="#gaminggamemodegames-optimize"></a> Gaming(gamemode)::Games optimize</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> dnf install gamemode</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">systemctl --user <span class="built_in">enable</span> gamemoded.service &amp;&amp; systemctl --user start gamemoded.service</span></span><br></pre></td></tr></table></figure>
<h2 id="sideloadinglegacy-ios-kit"><a class="markdownIt-Anchor" href="#sideloadinglegacy-ios-kit"></a> Sideloading(legacy-ios-kit)</h2>
<p><a href="https://github.com/LukeZGD/Legacy-iOS-Kit">GitHub - LukeZGD/Legacy-iOS-Kit: An all-in-one tool to restore/downgrade, save SHSH blobs, jailbreak legacy iOS devices, and more</a></p>
<p>ç›®å‰è¿˜æ²¡æœ‰ä½¿ç”¨è¿‡ï¼Œä½†çœ‹èµ·æ¥æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾§è½½æ–¹æ¡ˆ</p>
<h2 id="toolfcitx5input-method"><a class="markdownIt-Anchor" href="#toolfcitx5input-method"></a> Tool(Fcitx5)::Input method</h2>
<p>ä¸€å¼€å§‹ä½¿ç”¨äº†<code>IBus</code><br>
å…¶ä¸­ç¢°åˆ°çš„é—®é¢˜ä¾‹å¦‚Obsidianä¸èƒ½ä½¿ç”¨ä¸­æ–‡è¾“å…¥æ³•<br>
åœ¨å¯åŠ¨å‘½ä»¤è¡Œå‚æ•°é‡Œé¢æ·»åŠ äº†<br>
<code>--enable-features=UseOzonePlatform --ozone-platform=wayland --enable-wayland-ime</code><br>
ä½†æ˜¯ä¿®æ”¹ä¹‹åqqåˆä¸èƒ½è¾“å…¥äº†<br>
ç„¶ååˆæ¢å›äº†<code>Fcitx</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> dnf install fcitx5 fcitx5-chinese-addons fcitx5-configtool fcitx5-gtk fcitx5-qt</span></span><br></pre></td></tr></table></figure>
<p>çœ‹æœ‰æ¨èä½¿ç”¨Fcitx5 rimeçš„ï¼Œè¿˜æ²¡è¿›è¡Œå°è¯•</p>
<p>ä½¿ç”¨ä¸»é¢˜ï¼š<a href="https://github.com/thep0y/fcitx5-themes-candlelight">GitHub - thep0y/fcitx5-themes-candlelight: fcitx5çš„ç®€çº¦é£æ ¼çš®è‚¤â€”â€”çƒ›å…‰ã€‚</a><br>
é‡Œé¢çš„winter<br>
å®ƒçš„macä¸»é¢˜é®ç½©éƒ½æœ‰æ˜æ˜¾é—®é¢˜ï¼Œè§‚æ„Ÿä¸å¥½ä¸æ¨èä½¿ç”¨</p>
<p>é…ç½®ä¿®æ”¹ï¼š</p>
<ul>
<li>ä¸´æ—¶åœ¨å½“å‰å’Œç¬¬ä¸€ä¸ªè¾“å…¥æ³•ä¹‹é—´åˆ‡æ¢ ç»‘å®š <code>Shift</code> å¯ä»¥æ–¹ä¾¿é€‚åº”</li>
<li>å¼€å¯äº‘æ‹¼éŸ³ï¼ŒæŠŠåç«¯æ”¹æˆç™¾åº¦</li>
<li>å»æ‹¼éŸ³é‡Œé¢æŠŠå‰åé¼»éŸ³å•¥çš„çº é”™æ‰“æ‰“å¼€</li>
</ul>
<blockquote>
<p>å·²çŸ¥é—®é¢˜ï¼š<br>
åœ¨ä½¿ç”¨qqçš„æ—¶å€™æ™ºèƒ½ä½¿ç”¨é»˜è®¤çš„åŒè¡Œè¾“å…¥è€Œä¸æ˜¯å•è¡Œ å³ä½¿é€šè¿‡<code>ctrl</code>+<code>alt</code>+<code>P</code> ä¹Ÿä¸å¯ä»¥æ›´æ”¹è¾“å…¥æ¨¡å¼</p>
</blockquote>
<h2 id="environmentruståŠ å…¥rustç¥æ•™å–µå–µåŠ å…¥rustç¥æ•™"><a class="markdownIt-Anchor" href="#environmentruståŠ å…¥rustç¥æ•™å–µå–µåŠ å…¥rustç¥æ•™"></a> Environment(rust)::åŠ å…¥rustç¥æ•™å–µå–µåŠ å…¥rustç¥æ•™</h2>
<p><code>curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh  </code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">curl --proto <span class="string">&#x27;=https&#x27;</span> --tlsv1.2 -sSf https://sh.rustup.rs | sh</span>  </span><br><span class="line">info: downloading installer  </span><br><span class="line">  </span><br><span class="line">Welcome to Rust!  </span><br><span class="line">  </span><br><span class="line">This will download and install the official compiler for the Rust  </span><br><span class="line">programming language, and its package manager, Cargo.  </span><br><span class="line">  </span><br><span class="line">Rustup metadata and toolchains will be installed into the Rustup  </span><br><span class="line">home directory, located at:  </span><br><span class="line">  </span><br><span class="line">Â /home/s3loy/.rustup  </span><br><span class="line">  </span><br><span class="line">This can be modified with the RUSTUP_HOME environment variable.  </span><br><span class="line">  </span><br><span class="line">The Cargo home directory is located at:  </span><br><span class="line">  </span><br><span class="line">Â /home/s3loy/.cargo  </span><br><span class="line">  </span><br><span class="line">This can be modified with the CARGO_HOME environment variable.  </span><br><span class="line">  </span><br><span class="line">The cargo, rustc, rustup and other commands will be added to  </span><br><span class="line">Cargo&#x27;s bin directory, located at:  </span><br><span class="line">  </span><br><span class="line">Â /home/s3loy/.cargo/bin  </span><br><span class="line">  </span><br><span class="line">This path will then be added to your PATH environment variable by  </span><br><span class="line">modifying the profile files located at:  </span><br><span class="line">  </span><br><span class="line">Â /home/s3loy/.profile  </span><br><span class="line">Â /home/s3loy/.bash_profile  </span><br><span class="line">Â /home/s3loy/.bashrc  </span><br><span class="line">Â /home/s3loy/.config/fish/conf.d/rustup.fish  </span><br><span class="line">  </span><br><span class="line">You can uninstall at any time with rustup self uninstall and  </span><br><span class="line">these changes will be reverted.  </span><br><span class="line">  </span><br><span class="line">Current installation options:  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">Â Â default host triple: x86_64-unknown-linux-gnu  </span><br><span class="line">Â Â Â Â default toolchain: stable (default)  </span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â Â Â profile: default  </span><br><span class="line">Â modify PATH variable: yes  </span><br><span class="line">  </span><br><span class="line">1) Proceed with standard installation (default - just press enter)  </span><br><span class="line">2) Customize installation  </span><br><span class="line">3) Cancel installation</span><br></pre></td></tr></table></figure>
<p>ç›´æ¥å›è½¦å°±å¥½äº†</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">info: default toolchain set to &#x27;stable-x86_64-unknown-linux-gnu&#x27;  </span><br><span class="line">  </span><br><span class="line">Â stable-x86_64-unknown-linux-gnu installed - rustc 1.90.0 (1159e78c4 2025-09-14)  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">Rust is installed now. Great!  </span><br><span class="line">  </span><br><span class="line">To get started you may need to restart your current shell.  </span><br><span class="line">This would reload your PATH environment variable to include  </span><br><span class="line">Cargo&#x27;s bin directory ($HOME/.cargo/bin).  </span><br><span class="line">  </span><br><span class="line">To configure your current shell, you need to source  </span><br><span class="line">the corresponding env file under $HOME/.cargo.  </span><br><span class="line">  </span><br><span class="line">This is usually done by running one of the following (note the leading DOT):  </span><br><span class="line">. &quot;$HOME/.cargo/env&quot; Â Â Â Â Â Â Â Â Â Â Â # For sh/bash/zsh/ash/dash/pdksh  </span><br><span class="line">source &quot;$HOME/.cargo/env.fish&quot; Â # For fish  </span><br><span class="line">source $&quot;($nu.home-path)/.cargo/env.nu&quot; Â # For nushell</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">s3loy@fedora:~$ rustc --version</span><br><span class="line">rustc 1.90.0 (1159e78c4 2025-09-14)</span><br><span class="line">s3loy@fedora:~$ cargo --version</span><br><span class="line">cargo 1.90.0 (840b83a10 2025-07-30)</span><br></pre></td></tr></table></figure>
<h2 id="toolvscodeç±³å¥‡å¦™å¦™ç‰©"><a class="markdownIt-Anchor" href="#toolvscodeç±³å¥‡å¦™å¦™ç‰©"></a> Tool(vscode)::ç±³å¥‡å¦™å¦™ç‰©</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> rpm --import https://packages.microsoft.com/keys/microsoft.asc</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> sh -c <span class="string">&#x27;echo -e &quot;[code]\nname=Visual Studio Code\nbaseurl=https://packages.microsoft.com/yumrepos/vscode\nenabled=1\ngpgcheck=1\ngpgkey=https://packages.microsoft.com/keys/microsoft.asc&quot; &gt; /etc/yum.repos.d/vscode.repo&#x27;</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> dnf check-update</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> dnf install code</span></span><br></pre></td></tr></table></figure>
<p>æ’ä»¶:</p>
<h2 id="environmentccnjupt-wanted"><a class="markdownIt-Anchor" href="#environmentccnjupt-wanted"></a> Environment(c/c++)::NJUPT wanted</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo dnf group install development-tools</span><br><span class="line"></span><br><span class="line">sudo dnf install gcc-c++</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">gdb --version</span></span><br><span class="line">GNU gdb (Fedora Linux) 16.3-1.fc42</span><br><span class="line">Copyright (C) 2024 Free Software Foundation, Inc.</span><br><span class="line">License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;</span><br><span class="line">This is free software: you are free to change and redistribute it.</span><br><span class="line">There is NO WARRANTY, to the extent permitted by law.</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">g++ --version</span></span><br><span class="line">g++ (GCC) 15.2.1 20250808 (Red Hat 15.2.1-1)</span><br><span class="line">Copyright Â© 2025 Free Software Foundation, Inc.</span><br><span class="line">æœ¬ç¨‹åºæ˜¯è‡ªç”±è½¯ä»¶ï¼›è¯·å‚çœ‹æºä»£ç çš„ç‰ˆæƒå£°æ˜ã€‚æœ¬è½¯ä»¶æ²¡æœ‰ä»»ä½•æ‹…ä¿ï¼›</span><br><span class="line">åŒ…æ‹¬æ²¡æœ‰é€‚é”€æ€§å’ŒæŸä¸€ä¸“ç”¨ç›®çš„ä¸‹çš„é€‚ç”¨æ€§æ‹…ä¿ã€‚</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">gcc --version</span></span><br><span class="line">gcc (GCC) 15.2.1 20250808 (Red Hat 15.2.1-1)</span><br><span class="line">Copyright Â© 2025 Free Software Foundation, Inc.</span><br><span class="line">æœ¬ç¨‹åºæ˜¯è‡ªç”±è½¯ä»¶ï¼›è¯·å‚çœ‹æºä»£ç çš„ç‰ˆæƒå£°æ˜ã€‚æœ¬è½¯ä»¶æ²¡æœ‰ä»»ä½•æ‹…ä¿ï¼›</span><br><span class="line">åŒ…æ‹¬æ²¡æœ‰é€‚é”€æ€§å’ŒæŸä¸€ä¸“ç”¨ç›®çš„ä¸‹çš„é€‚ç”¨æ€§æ‹…ä¿ã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>Something U can use.</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo dnf install cmake</span><br><span class="line"></span><br><span class="line">sudo dnf install qt6-qtbase-devel qt6-qtsvg-devel qt6-qttools-devel</span><br><span class="line"></span><br><span class="line">sudo dnf install qt-creator</span><br></pre></td></tr></table></figure>
<h2 id="environmentfront-endnonononode_module"><a class="markdownIt-Anchor" href="#environmentfront-endnonononode_module"></a> Environment(Front-end)::nonononode_module</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo dnf install nodejs npm</span><br><span class="line"></span><br><span class="line">sudo dnf install google-chrome</span><br><span class="line"></span><br><span class="line">curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash</span><br><span class="line"></span><br><span class="line">source ~/.bashrc</span><br><span class="line"></span><br><span class="line">nvm install --lts</span><br><span class="line">nvm use --lts</span><br><span class="line">nvm alias default lts/*</span><br><span class="line"></span><br><span class="line">npm install -g pnpm@latest-10</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">pnpm -v</span></span><br><span class="line">10.17.1</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">npm -v</span></span><br><span class="line">11.6.1</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">nvm -v</span></span><br><span class="line">0.39.7</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">node -v</span></span><br><span class="line">v22.20.0</span><br></pre></td></tr></table></figure>
<h2 id="toolweztermfishcome-and-use-wezterm"><a class="markdownIt-Anchor" href="#toolweztermfishcome-and-use-wezterm"></a> Tool(wezTerm+fish)::Come and use wezTerm!</h2>
<p>é»˜è®¤çš„ç»ˆç«¯åº”ç”¨æ˜¯<code>konsole</code>,æœ‰ä¸€ç‚¹ä¸æ»¡æ„ï¼Œäºæ˜¯æ¢æˆäº†<strong>wezTerm</strong>+<strong>fish</strong>+<strong>oh my fish</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> dnf copr <span class="built_in">enable</span> wezfurlong/wezterm-nightly</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> dnf install wezterm</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">chsh -s /usr/bin/fish</span></span><br></pre></td></tr></table></figure>
<p>åœ¨<a href="https://www.nerdfonts.com/font-downloads">nerd fonts</a><br>
ä¸‹è½½äº†FiraCode Nerd Font,è§£å‹åˆ°äº†<code>~/.fonts</code>æ–‡ä»¶å¤¹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">fc-cache -fv</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">nano ~/.wezterm.lua</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">local wezterm = require &#x27;wezterm&#x27;</span><br><span class="line">local config = &#123;&#125;</span><br><span class="line">if wezterm.config_builder then</span><br><span class="line">  config = wezterm.config_builder()</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">config.font = wezterm.font_with_fallback(&#123;</span><br><span class="line">  &#x27;FiraCode Nerd Font&#x27;,</span><br><span class="line">  &#x27;Noto Color Emoji&#x27;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">config.harfbuzz_features = &#123;&#x27;calt=1&#x27;, &#x27;clig=1&#x27;, &#x27;liga=1&#x27;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">config.color_scheme = &#x27;Catppuccin Mocha&#x27;</span><br><span class="line"></span><br><span class="line">config.window_background_opacity = 0.95</span><br><span class="line"></span><br><span class="line">config.window_padding = &#123;</span><br><span class="line">  left = 15,</span><br><span class="line">  right = 15,</span><br><span class="line">  top = 15,</span><br><span class="line">  bottom = 10,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">config.hide_tab_bar_if_only_one_tab = true</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">config.default_cursor_style = &#x27;BlinkingBar&#x27;</span><br><span class="line">config.enable_scroll_bar = false</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">config.keys = &#123;</span><br><span class="line">  -- å…³é—­å½“å‰çª—æ ¼ (Pane)</span><br><span class="line">  &#123;</span><br><span class="line">    key = &#x27;w&#x27;,</span><br><span class="line">    mods = &#x27;ALT&#x27;,</span><br><span class="line">    action = wezterm.action.CloseCurrentPane &#123; confirm = true &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  -- å…³é—­å½“å‰æ ‡ç­¾é¡µ (Tab)</span><br><span class="line">  &#123;</span><br><span class="line">    key = &#x27;w&#x27;,</span><br><span class="line">    mods = &#x27;CTRL|SHIFT&#x27;,</span><br><span class="line">    action = wezterm.action.CloseCurrentTab &#123; confirm = false &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  -- æ°´å¹³åˆ†å‰²çª—æ ¼ (å·¦å³)</span><br><span class="line">  &#123;</span><br><span class="line">    key = &#x27;-&#x27;,</span><br><span class="line">    mods = &#x27;ALT&#x27;,</span><br><span class="line">    action = wezterm.action.SplitHorizontal &#123; domain = &#x27;CurrentPaneDomain&#x27; &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  -- å‚ç›´åˆ†å‰²çª—æ ¼ (ä¸Šä¸‹)</span><br><span class="line">  &#123;</span><br><span class="line">    key = &#x27;=&#x27;,</span><br><span class="line">    mods = &#x27;ALT&#x27;,</span><br><span class="line">    action = wezterm.action.SplitVertical &#123; domain = &#x27;CurrentPaneDomain&#x27; &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">return config</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">curl https://raw.githubusercontent.com/oh-my-fish/oh-my-fish/master/bin/install | fish</span><br><span class="line"></span><br><span class="line">omf install pure</span><br><span class="line"></span><br><span class="line">sudo dnf install fzf</span><br><span class="line">sudo dnf install grc</span><br><span class="line"></span><br><span class="line">omf install fzf</span><br><span class="line">omf install grc</span><br><span class="line">omf install nvm</span><br><span class="line">omf install z</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨çš„æ˜¯<code>pure</code>ä¸»é¢˜</p>
<blockquote>
<p>ä¸»é¢˜é¢„è§ˆ<br>
<img src="/My-Fedora-Journey/pure.png" alt="preview"></p>
</blockquote>
<h2 id="optimizationsudousing-sudo-without-password"><a class="markdownIt-Anchor" href="#optimizationsudousing-sudo-without-password"></a> Optimization(sudo)::using sudo without password</h2>
<p>å› ä¸ºæ¯æ¬¡ç”¨<code>sudo</code>éƒ½éœ€è¦å¯†ç è§‰å¾—å¤ªéº»çƒ¦äº†ï¼Œæ‰€ä»¥ä¿®æ”¹äº†ä¸€ä¸‹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo visudo</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹äº†è¿™ä¸€è¡Œ<br>
<code>%wheel ALL=(ALL)       NOPASSWD: ALL</code><br>
ç„¶åä¿å­˜å°±è¡Œäº†ï¼Œå› ä¸ºæœ¬èº«ç”¨æˆ·å°±åœ¨wheelç”¨æˆ·ç»„å†…</p>
<h2 id="optimizationauto-loginlogin-without-password"><a class="markdownIt-Anchor" href="#optimizationauto-loginlogin-without-password"></a> Optimization(auto login)::login without password</h2>
<p>ç³»ç»Ÿè®¾ç½®-å¤–è§‚å’Œæ ·å¼-é¢œè‰²å’Œä¸»é¢˜-å…¨å±€ä¸»é¢˜-ç™»å½•å±å¹•(SDDM)-å³ä¸Šè§’çš„â€œè¡Œä¸ºâ€¦â€-è‡ªåŠ¨ç™»å½• é€‰æ‹©è´¦æˆ·å’Œå‰ç«¯å¹¶è¾“å…¥å¯†ç </p>
<h2 id="toolwinerunning-exe-on-linux"><a class="markdownIt-Anchor" href="#toolwinerunning-exe-on-linux"></a> Tool(wine)::Running exe on linux</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> dnf install wine</span><br></pre></td></tr></table></figure>
<ul>
<li>[ ] to be continued</li>
</ul>
<h2 id="optimizationsuper-desktopå¿«æ·æ–¹å¼ä¹¦å†™"><a class="markdownIt-Anchor" href="#optimizationsuper-desktopå¿«æ·æ–¹å¼ä¹¦å†™"></a> Optimization(super .desktop)::å¿«æ·æ–¹å¼ä¹¦å†™</h2>
<p><code>~/.local/share/applications/feishu.desktop</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[Desktop Entry]</span><br><span class="line">Version=1.0</span><br><span class="line">Name=é£ä¹¦</span><br><span class="line">Comment=Feishu | Lark, a work collaboration platform</span><br><span class="line">Exec=/opt/bytedance/feishu/feishu %U</span><br><span class="line">Icon=/opt/bytedance/feishu/product_logo_256.png</span><br><span class="line">Terminal=false</span><br><span class="line">Type=Application</span><br><span class="line">Categories=Network;Office;InstantMessaging;</span><br></pre></td></tr></table></figure>
<h2 id="environmentdockercontainer"><a class="markdownIt-Anchor" href="#environmentdockercontainer"></a> Environment(docker)::Container</h2>
<p><a href="https://docs.docker.com/engine/install/fedora/">Install Docker Engine on Fedora</a></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo dnf upgrade --refresh</span><br><span class="line"></span><br><span class="line">sudo dnf -y install dnf-plugins-core</span><br><span class="line"></span><br><span class="line">sudo dnf remove docker \</span><br><span class="line">                  docker-client \</span><br><span class="line">                  docker-client-latest \</span><br><span class="line">                  docker-common \</span><br><span class="line">                  docker-latest \</span><br><span class="line">                  docker-latest-logrotate \</span><br><span class="line">                  docker-logrotate \</span><br><span class="line">                  docker-selinux \</span><br><span class="line">                  docker-engine-selinux \</span><br><span class="line">                  docker-engine</span><br><span class="line"></span><br><span class="line">sudo dnf -y install dnf-plugins-core</span><br><span class="line"></span><br><span class="line">sudo dnf-3 config-manager --add-repo https://download.docker.com/linux/fedora/docker-ce.repo</span><br><span class="line"></span><br><span class="line">sudo dnf install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> --now docker</span> </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¦‚æœä½ è¦è‡ªå¯ç”¨è¿™ä¸ª</span></span><br><span class="line">sudo systemctl start docker</span><br><span class="line"></span><br><span class="line">sudo docker run hello-world</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> --now docker</span></span><br><span class="line">Created symlink &#x27;/etc/systemd/system/multi-user.target.wants/docker.service&#x27; â†’ &#x27;/usr/lib/systemd/system/docker.service&#x27;.</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> systemctl start docker</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> docker run hello-world</span></span><br><span class="line">Unable to find image &#x27;hello-world:latest&#x27; locally</span><br><span class="line">latest: Pulling from library/hello-world</span><br><span class="line">17eec7bbc9d7: Pull complete</span><br><span class="line">Digest: sha256:54e66cc1dd1fcb1c3c58bd8017914dbed8701e2d8c74d9262e26bd9cc1642d31</span><br><span class="line">Status: Downloaded newer image for hello-world:latest</span><br><span class="line"></span><br><span class="line">Hello from Docker!</span><br><span class="line">This message shows that your installation appears to be working correctly.</span><br><span class="line"></span><br><span class="line">To generate this message, Docker took the following steps:</span><br><span class="line"> 1. The Docker client contacted the Docker daemon.</span><br><span class="line"> 2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.</span><br><span class="line">    (amd64)</span><br><span class="line"> 3. The Docker daemon created a new container from that image which runs the</span><br><span class="line">    executable that produces the output you are currently reading.</span><br><span class="line"> 4. The Docker daemon streamed that output to the Docker client, which sent it</span><br><span class="line">    to your terminal.</span><br><span class="line"></span><br><span class="line">To try something more ambitious, you can run an Ubuntu container with:</span><br><span class="line"><span class="meta prompt_"> $ </span><span class="language-bash">docker run -it ubuntu bash</span></span><br><span class="line"></span><br><span class="line">Share images, automate workflows, and more with a free Docker ID:</span><br><span class="line"> https://hub.docker.com/</span><br><span class="line"></span><br><span class="line">For more examples and ideas, visit:</span><br><span class="line"> https://docs.docker.com/get-started/</span><br></pre></td></tr></table></figure>
<h2 id="trickwayland-docker-osxbuilding-macos-with-docker"><a class="markdownIt-Anchor" href="#trickwayland-docker-osxbuilding-macos-with-docker"></a> Trick(Wayland-Docker-OSX)::Building macOS with docker</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker run -it \ </span>                                                          </span><br><span class="line">             --device /dev/kvm \</span><br><span class="line">             -p 50922:10022 \</span><br><span class="line">             -e XDG_RUNTIME_DIR=/tmp \</span><br><span class="line">             -e WAYLAND_DISPLAY=$WAYLAND_DISPLAY \</span><br><span class="line">             -v $XDG_RUNTIME_DIR/$WAYLAND_DISPLAY:/tmp/$WAYLAND_DISPLAY  \</span><br><span class="line">             -e GENERATE_UNIQUE=true \</span><br><span class="line">             -e MASTER_PLIST_URL=&#x27;https://raw.githubusercontent.com/sickcodes/osx-serial-generator/master/config-custom.plist&#x27; \</span><br><span class="line">             -e SHORTNAME=sonoma \</span><br><span class="line">             sickcodes/docker-osx:latest</span><br><span class="line">             </span><br></pre></td></tr></table></figure>
<p>è¿˜æ²¡æœ‰æˆåŠŸï¼Œæ­»åœ¨äº†ç›˜éƒ½è£…å¥½äº†æ‰“ä¸å¼€æ¥ï¼Œä½†å› ä¸º<code>wayland</code>çš„<code>display</code>å’Œ<code>x11</code>æœ‰æ‰€åŒºåˆ«,æ‰€ä»¥å¾—å‚è€ƒ<code>github</code>å†…<code>issues</code></p>
<h2 id="toolk8scontainer"><a class="markdownIt-Anchor" href="#toolk8scontainer"></a> Tool(k8s)::Container</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-latest.x86_64.rpm</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> rpm -Uvh minikube-latest.x86_64.rpm</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">minikube start</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">minikube kubectl -- get pods -A</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl completion fish | <span class="built_in">source</span></span></span><br><span class="line">fish: kubectl: æœªæ‰¾åˆ°å‘½ä»¤...</span><br><span class="line">æä¾›æ­¤æ–‡ä»¶çš„è½¯ä»¶åŒ…æ˜¯ï¼š</span><br><span class="line">&#x27;kubernetes1.29-client&#x27;</span><br><span class="line">&#x27;kubernetes1.30-client&#x27;</span><br><span class="line">&#x27;kubernetes1.31-client&#x27;</span><br><span class="line">&#x27;kubernetes1.32-client&#x27;</span><br><span class="line">&#x27;kubernetes1.33-client&#x27;</span><br><span class="line">&#x27;kubernetes1.34-client&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> dnf install kubernetes1.34-client</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl completion fish | <span class="built_in">source</span></span></span><br></pre></td></tr></table></figure>
<h3 id="k8sç®€å•å®éªŒnginxæœåŠ¡å™¨"><a class="markdownIt-Anchor" href="#k8sç®€å•å®éªŒnginxæœåŠ¡å™¨"></a> k8sç®€å•å®éªŒï¼šnginxæœåŠ¡å™¨</h3>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">minikube start</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl create deployment nginx-deployment --image=nginx</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl get deployment</span></span><br><span class="line">NAME               READY   UP-TO-DATE   AVAILABLE   AGE</span><br><span class="line">nginx-deployment   1/1     1            1           43s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl get pods</span></span><br><span class="line">NAME                                READY   STATUS    RESTARTS   AGE</span><br><span class="line">nginx-deployment-7457467ffd-6fxtv   1/1     Running   0          87s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl expose deployment nginx-deployment --<span class="built_in">type</span>=NodePort --port=80</span></span><br><span class="line">service/nginx-deployment exposed</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl get service nginx-deployment</span></span><br><span class="line">NAME               TYPE       CLUSTER-IP     EXTERNAL-IP   PORT(S)        AGE</span><br><span class="line">nginx-deployment   NodePort   10.98.106.65   &lt;none&gt;        80:31891/TCP   18s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">minikube service nginx-deployment</span></span><br><span class="line">â”Œâ”€â”€â”€â”€â”€ â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€ â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”</span><br><span class="line">â”‚ NAMESPACE â”‚       NAME       â”‚ TARGET PORT â”‚            URL            â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€ â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€ â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”¤</span><br><span class="line">â”‚ default   â”‚ nginx-deployment â”‚ 80          â”‚ http://192.168.49.2:31891 â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€ â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€ â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”˜</span><br><span class="line">ğŸ‰  æ­£é€šè¿‡é»˜è®¤æµè§ˆå™¨æ‰“å¼€æœåŠ¡ default/nginx-deployment...</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä½ æ€ä¹ˆæ­ªäº†</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">curl http://192.168.49.2:31891/</span> </span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;Welcome to nginx!&lt;/title&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">html &#123; color-scheme: light dark; &#125;</span><br><span class="line">body &#123; width: 35em; margin: 0 auto;</span><br><span class="line">font-family: Tahoma, Verdana, Arial, sans-serif; &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;If you see this page, the nginx web server is successfully installed and</span><br><span class="line">working. Further configuration is required.&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;For online documentation and support please refer to</span><br><span class="line">&lt;a href=&quot;http://nginx.org/&quot;&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;</span><br><span class="line">Commercial support is available at</span><br><span class="line">&lt;a href=&quot;http://nginx.com/&quot;&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>äºŒåˆ™ å¤šå®¹å™¨å®éªŒ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl scale deployment nginx-deployment --replicas=3</span></span><br><span class="line">deployment.apps/nginx-deployment scaled</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl get pods</span></span><br><span class="line">NAME                                READY   STATUS    RESTARTS   AGE</span><br><span class="line">nginx-deployment-7457467ffd-489qf   1/1     Running   0          25s</span><br><span class="line">nginx-deployment-7457467ffd-6fxtv   1/1     Running   0          7m5s</span><br><span class="line">nginx-deployment-7457467ffd-b6km2   1/1     Running   0          25s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl delete service nginx-deployment</span></span><br><span class="line">service &quot;nginx-deployment&quot; deleted from default namespace</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl delete deployment nginx-deployment</span></span><br><span class="line">deployment.apps &quot;nginx-deployment&quot; deleted from default namespace</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">curl http://192.168.49.2:31891/</span></span><br><span class="line">curl: (7) Failed to connect to 192.168.49.2 port 31891 after 0 ms: Could not connect to server</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl get pods</span></span><br><span class="line">No resources found in default namespace.</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">minikube stop</span></span><br><span class="line">âœ‹  æ­£åœ¨åœæ­¢èŠ‚ç‚¹ &quot;minikube&quot; ...</span><br><span class="line">ğŸ›‘  æ­£åœ¨é€šè¿‡ SSH å…³é—­â€œminikubeâ€â€¦</span><br><span class="line">ğŸ›‘  1 ä¸ªèŠ‚ç‚¹å·²åœæ­¢ã€‚</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">minikube delete</span></span><br><span class="line">ğŸ”¥  æ­£åœ¨åˆ é™¤ docker ä¸­çš„â€œminikubeâ€â€¦</span><br><span class="line">ğŸ”¥  æ­£åœ¨åˆ é™¤å®¹å™¨ &quot;minikube&quot; ...</span><br><span class="line">ğŸ”¥  æ­£åœ¨ç§»é™¤ /home/s3loy/.minikube/machines/minikubeâ€¦</span><br><span class="line">ğŸ’€  å·²åˆ é™¤æ‰€æœ‰å…³äº &quot;minikube&quot; é›†ç¾¤çš„ç—•è¿¹ã€‚</span><br></pre></td></tr></table></figure>
<p>ä¸‰åˆ™ å¤šèŠ‚ç‚¹åˆ›å»º</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">minikube start --nodes 3 -p multi-node-cluster</span></span><br><span class="line">ğŸ˜„  Fedora 42 ä¸Šçš„ [multi-node-cluster] minikube v1.37.0</span><br><span class="line">âœ¨  è‡ªåŠ¨é€‰æ‹© docker é©±åŠ¨ã€‚å…¶ä»–é€‰é¡¹ï¼špodman, qemu2, none, ssh</span><br><span class="line">ğŸ“Œ  ä½¿ç”¨å…·æœ‰ root æƒé™çš„ Docker é©±åŠ¨ç¨‹åº</span><br><span class="line">ğŸ‘  åœ¨é›†ç¾¤ä¸­ &quot;multi-node-cluster&quot; å¯åŠ¨èŠ‚ç‚¹ &quot;multi-node-cluster&quot; primary control-plane</span><br><span class="line">ğŸšœ  æ­£åœ¨æ‹‰å–åŸºç¡€é•œåƒ v0.0.48 ...</span><br><span class="line">â—  minikube was unable to download gcr.io/k8s-minikube/kicbase:v0.0.48, but successfully downloaded docker.io/kicbase/stable:v0.0.48@sha256:7171c97a51623558720f8e5878e4f4637da093e2f2ed589997bedc6c1549b2b1 as a fallback image</span><br><span class="line">ğŸ”¥  åˆ›å»º docker containerï¼ˆCPU=2ï¼Œå†…å­˜=3072MBï¼‰...</span><br><span class="line">ğŸ³  æ­£åœ¨ Docker 28.4.0 ä¸­å‡†å¤‡ Kubernetes v1.34.0â€¦</span><br><span class="line">ğŸ”—  é…ç½® CNI (Container Networking Interface) ...</span><br><span class="line">ğŸ”  æ­£åœ¨éªŒè¯ Kubernetes ç»„ä»¶...</span><br><span class="line">    â–ª æ­£åœ¨ä½¿ç”¨é•œåƒ gcr.io/k8s-minikube/storage-provisioner:v5</span><br><span class="line">ğŸŒŸ  å¯ç”¨æ’ä»¶ï¼š storage-provisioner, default-storageclass</span><br><span class="line"></span><br><span class="line">ğŸ‘  åœ¨é›†ç¾¤ä¸­ &quot;multi-node-cluster&quot; å¯åŠ¨èŠ‚ç‚¹ &quot;multi-node-cluster-m02&quot; worker</span><br><span class="line">ğŸšœ  æ­£åœ¨æ‹‰å–åŸºç¡€é•œåƒ v0.0.48 ...</span><br><span class="line">ğŸ”¥  åˆ›å»º docker containerï¼ˆCPU=2ï¼Œå†…å­˜=3072MBï¼‰...</span><br><span class="line">ğŸŒ  æ‰¾åˆ°çš„ç½‘ç»œé€‰é¡¹ï¼š</span><br><span class="line">    â–ª NO_PROXY=192.168.49.2</span><br><span class="line">ğŸ³  æ­£åœ¨ Docker 28.4.0 ä¸­å‡†å¤‡ Kubernetes v1.34.0â€¦</span><br><span class="line">    â–ª env NO_PROXY=192.168.49.2</span><br><span class="line">ğŸ”  æ­£åœ¨éªŒè¯ Kubernetes ç»„ä»¶...</span><br><span class="line"></span><br><span class="line">ğŸ‘  åœ¨é›†ç¾¤ä¸­ &quot;multi-node-cluster&quot; å¯åŠ¨èŠ‚ç‚¹ &quot;multi-node-cluster-m03&quot; worker</span><br><span class="line">ğŸšœ  æ­£åœ¨æ‹‰å–åŸºç¡€é•œåƒ v0.0.48 ...</span><br><span class="line">ğŸ”¥  åˆ›å»º docker containerï¼ˆCPU=2ï¼Œå†…å­˜=3072MBï¼‰...</span><br><span class="line">ğŸŒ  æ‰¾åˆ°çš„ç½‘ç»œé€‰é¡¹ï¼š</span><br><span class="line">    â–ª NO_PROXY=192.168.49.2,192.168.49.3</span><br><span class="line">ğŸ³  æ­£åœ¨ Docker 28.4.0 ä¸­å‡†å¤‡ Kubernetes v1.34.0â€¦</span><br><span class="line">    â–ª env NO_PROXY=192.168.49.2</span><br><span class="line">    â–ª env NO_PROXY=192.168.49.2,192.168.49.3                                                                                                                                         ğŸ”  æ­£åœ¨éªŒè¯ Kubernetes ç»„ä»¶...</span><br><span class="line">ğŸ„  å®Œæˆï¼kubectl ç°åœ¨å·²é…ç½®ï¼Œé»˜è®¤ä½¿ç”¨&quot;multi-node-cluster&quot;é›†ç¾¤å’Œ&quot;default&quot;å‘½åç©ºé—´</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl get nodes</span></span><br><span class="line">NAME                     STATUS   ROLES           AGE     VERSION</span><br><span class="line">multi-node-cluster       Ready    control-plane   3m21s   v1.34.0</span><br><span class="line">multi-node-cluster-m02   Ready    &lt;none&gt;          3m8s    v1.34.0</span><br><span class="line">multi-node-cluster-m03   Ready    &lt;none&gt;          2m58s   v1.34.0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">minikube status -p multi-node-cluster</span></span><br><span class="line">multi-node-cluster</span><br><span class="line">type: Control Plane</span><br><span class="line">host: Running</span><br><span class="line">kubelet: Running</span><br><span class="line">apiserver: Running</span><br><span class="line">kubeconfig: Configured</span><br><span class="line"></span><br><span class="line">multi-node-cluster-m02</span><br><span class="line">type: Worker</span><br><span class="line">host: Running</span><br><span class="line">kubelet: Running</span><br><span class="line"></span><br><span class="line">multi-node-cluster-m03</span><br><span class="line">type: Worker</span><br><span class="line">host: Running</span><br><span class="line">kubelet: Running</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl create deployment nginx-deployment --image=nginx</span></span><br><span class="line">deployment.apps/nginx-deployment created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl scale deployment nginx-deployment --replicas=6</span></span><br><span class="line">deployment.apps/nginx-deployment scaled</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl get pods -o wide</span></span><br><span class="line">NAME                                READY   STATUS    RESTARTS   AGE   IP           NODE                     NOMINATED NODE   READINESS GATES</span><br><span class="line">nginx-deployment-7457467ffd-67tv9   1/1     Running   0          54s   10.244.2.2   multi-node-cluster-m03   &lt;none&gt;           &lt;none&gt;</span><br><span class="line">nginx-deployment-7457467ffd-6vt69   1/1     Running   0          54s   10.244.2.3   multi-node-cluster-m03   &lt;none&gt;           &lt;none&gt;</span><br><span class="line">nginx-deployment-7457467ffd-8wsmk   1/1     Running   0          54s   10.244.1.3   multi-node-cluster-m02   &lt;none&gt;           &lt;none&gt;</span><br><span class="line">nginx-deployment-7457467ffd-g9ngm   1/1     Running   0          54s   10.244.0.4   multi-node-cluster       &lt;none&gt;           &lt;none&gt;</span><br><span class="line">nginx-deployment-7457467ffd-gjk49   1/1     Running   0          75s   10.244.1.2   multi-node-cluster-m02   &lt;none&gt;           &lt;none&gt;</span><br><span class="line">nginx-deployment-7457467ffd-vffxz   1/1     Running   0          54s   10.244.0.3   multi-node-cluster       &lt;none&gt;           &lt;none&gt;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">minikube profile list</span></span><br><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€ â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€ â”¬â”€â”€â”€â”€â”¬â”€â”€â”€ â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚      PROFILE       â”‚ DRIVER â”‚ RUNTIME â”‚      IP      â”‚ VERSION â”‚ STATUS â”‚ NODES â”‚ ACTIVE PROFILE â”‚ ACTIVE KUBECONTEXT â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€ â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€ â”¼â”€â”€â”€â”€â”¼â”€â”€â”€ â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚ multi-node-cluster â”‚ docker â”‚ docker  â”‚ 192.168.49.2 â”‚ v1.34.0 â”‚ OK     â”‚ 3     â”‚                â”‚ *                  â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€ â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€ â”´â”€â”€â”€â”€â”´â”€â”€â”€ â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl expose deployment nginx-deployment --<span class="built_in">type</span>=NodePort --port=80</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">minikube ip -p multi-node-cluster</span></span><br><span class="line">192.168.49.2</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">curl 192.168.49.2</span></span><br><span class="line">curl: (7) Failed to connect to 192.168.49.2 port 80 after 0 ms: Could not connect to server</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl get service nginx-deployment</span></span><br><span class="line">NAME               TYPE       CLUSTER-IP       EXTERNAL-IP   PORT(S)        AGE</span><br><span class="line">nginx-deployment   NodePort   10.106.236.139   &lt;none&gt;        80:32530/TCP   3m38s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">curl http://192.168.49.2:32530/</span></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;Welcome to nginx!&lt;/title&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">html &#123; color-scheme: light dark; &#125;</span><br><span class="line">body &#123; width: 35em; margin: 0 auto;</span><br><span class="line">font-family: Tahoma, Verdana, Arial, sans-serif; &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;If you see this page, the nginx web server is successfully installed and</span><br><span class="line">working. Further configuration is required.&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;For online documentation and support please refer to</span><br><span class="line">&lt;a href=&quot;http://nginx.org/&quot;&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;</span><br><span class="line">Commercial support is available at</span><br><span class="line">&lt;a href=&quot;http://nginx.com/&quot;&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl delete service nginx-deployment</span></span><br><span class="line">service &quot;nginx-deployment&quot; deleted from default namespace</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl delete deployment nginx-deployment</span></span><br><span class="line">deployment.apps &quot;nginx-deployment&quot; deleted from default namespace</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">minikube delete -p multi-node-cluster</span></span><br><span class="line">ğŸ”¥  æ­£åœ¨åˆ é™¤ docker ä¸­çš„â€œmulti-node-clusterâ€â€¦</span><br><span class="line">ğŸ”¥  æ­£åœ¨åˆ é™¤å®¹å™¨ &quot;multi-node-cluster&quot; ...</span><br><span class="line">ğŸ”¥  æ­£åœ¨åˆ é™¤å®¹å™¨ &quot;multi-node-cluster-m02&quot; ...</span><br><span class="line">ğŸ”¥  æ­£åœ¨åˆ é™¤å®¹å™¨ &quot;multi-node-cluster-m03&quot; ...</span><br><span class="line">ğŸ”¥  æ­£åœ¨ç§»é™¤ /home/s3loy/.minikube/machines/multi-node-clusterâ€¦</span><br><span class="line">ğŸ”¥  æ­£åœ¨ç§»é™¤ /home/s3loy/.minikube/machines/multi-node-cluster-m02â€¦</span><br><span class="line">ğŸ”¥  æ­£åœ¨ç§»é™¤ /home/s3loy/.minikube/machines/multi-node-cluster-m03â€¦</span><br><span class="line">ğŸ’€  å·²åˆ é™¤æ‰€æœ‰å…³äº &quot;multi-node-cluster&quot; é›†ç¾¤çš„ç—•è¿¹ã€‚</span><br></pre></td></tr></table></figure>
<h3 id="k8sæ¦‚å¿µç®€å•è§£æå’Œminikubeä½¿ç”¨æ–¹æ³•"><a class="markdownIt-Anchor" href="#k8sæ¦‚å¿µç®€å•è§£æå’Œminikubeä½¿ç”¨æ–¹æ³•"></a> k8sæ¦‚å¿µç®€å•è§£æå’Œminikubeä½¿ç”¨æ–¹æ³•</h3>
<h4 id="k8så†…é‡è¦æ¦‚å¿µ"><a class="markdownIt-Anchor" href="#k8så†…é‡è¦æ¦‚å¿µ"></a> k8så†…é‡è¦æ¦‚å¿µ</h4>
<ul>
<li>Pod (æœ€å°å·¥ä½œå•å…ƒ)</li>
</ul>
<blockquote>
<p>Pod æ˜¯ K8s ä¸­å¯ä»¥åˆ›å»ºå’Œç®¡ç†çš„æœ€å°éƒ¨ç½²å•å…ƒã€‚ä¸€ä¸ª Pod åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªç´§å¯†ç›¸å…³çš„å®¹å™¨ï¼ˆæ¯”å¦‚ä¸€ä¸ªä¸»åº”ç”¨å®¹å™¨å’Œä¸€ä¸ªæ—¥å¿—æ”¶é›†å®¹å™¨ï¼‰ã€‚è¿™äº›å®¹å™¨å…±äº«åŒä¸€ä¸ªç½‘ç»œç¯å¢ƒå’Œå­˜å‚¨å·ï¼Œå¯ä»¥æŠŠå®ƒä»¬çœ‹ä½œä¸€ä¸ªæ•´ä½“ã€‚<br>
é€šå¸¸ä½¿ç”¨æ›´é«˜å±‚ç®¡ç†ã€‚</p>
</blockquote>
<ul>
<li>Deployment (éƒ¨ç½²)</li>
</ul>
<blockquote>
<p>ç¡®ä¿æŒ‡å®šæ•°é‡çš„ Pod æ­£åœ¨è¿è¡Œã€‚å‰¯æœ¬ç®¡ç†ï¼Œæ»šåŠ¨æ›´æ–°ï¼Œå›æ»šä¸‰å¤§åŠŸèƒ½ã€‚</p>
</blockquote>
<ul>
<li>Service (æœåŠ¡)</li>
</ul>
<blockquote>
<p>æœåŠ¡å‘ç°ï¼Œä¼šè‡ªåŠ¨è·Ÿè¸ªå…¶åç«¯ Pod çš„å˜åŒ–ï¼›è´Ÿè½½å‡è¡¡ï¼Œå°†è¯·æ±‚ä¼˜å…ˆå‘é€åˆ°å¥åº· Pod</p>
</blockquote>
<ul>
<li>Namespace (å‘½åç©ºé—´)</li>
</ul>
<blockquote>
<p>èµ„æºè¿›è¡Œé€»è¾‘ä¸Šçš„éš”ç¦»,åˆ›å»ºçš„ Deploymentã€Service ç­‰èµ„æºéƒ½å±äºæŸä¸€ä¸ª Namespaceã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä»¬éƒ½åœ¨ default å‘½åç©ºé—´é‡Œ.</p>
</blockquote>
<h4 id="kubectl"><a class="markdownIt-Anchor" href="#kubectl"></a> kubectl</h4>
<p><a href="https://kubernetes.io/zh-cn/docs/reference/kubectl/"><strong>kube control</strong></a>ç”¨äº K8s é›†ç¾¤äº¤äº’</p>
<p>ä½¿ç”¨æ–¹æ³•</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl [<span class="built_in">command</span>] [TYPE] [NAME] [flags]</span></span><br></pre></td></tr></table></figure>
<h2 id="workshopobsidiangdrivercloneworking-with-different-workspaces"><a class="markdownIt-Anchor" href="#workshopobsidiangdrivercloneworking-with-different-workspaces"></a> Workshop(Obsidian+Gdrive+rclone)::working with different workspaces</h2>
<p>æ–¹æ¡ˆï¼š</p>
<ul>
<li>markdownï¼š<strong>Obsidian+OneDrive</strong></li>
<li>codingï¼š<strong>github&amp;gitlab</strong></li>
<li>[ ] TODOï¼š CI/CD</li>
</ul>
<p><a href="https://github.com/abraunegg/onedrive/blob/master/docs/install.md">OneDrive for linux</a></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> dnf install onedrive</span></span><br></pre></td></tr></table></figure>
<p>OneDriveå¤±è´¥ï¼Œ<strong>å—é‚®ç®¡ç†å‘˜æ²¡å¼€å¯è®¤è¯</strong></p>
<blockquote>
<p>åˆ‡æ¢æ–¹æ¡ˆ Google Drive</p>
</blockquote>
<p><a href="https://rclone.org/"><strong>rclone</strong></a></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> -v ; curl https://rclone.org/install.sh | <span class="built_in">sudo</span> bash</span></span><br><span class="line">...</span><br><span class="line">rclone v1.71.1 has successfully installed.</span><br><span class="line">Now run &quot;rclone config&quot; for setup. Check https://rclone.org/docs/ for more details.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">rclone config</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åç»­å¯ä»¥å‚è€ƒhttps://www.cnblogs.com/Undefined443/p/18615701</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨æ–¹æ³•:</p>
<blockquote>
<p>æˆ‘çš„æœ¬åœ°configå‘½åå°±æ˜¯ <strong>work_space</strong> ()<br>
æ‰€ä»¥å¦‚æœconfigå‘½åä¸ä¸€æ ·æ•‘ä¿®æ”¹ &quot; : &quot;å‰é¢çš„é‚£ä¸ªwork_spaceå³å¯<br>
ä½ç½®è¦æ ¹æ®è‡ªå·±æ–‡ä»¶å­˜æ”¾çš„ä½ç½®ä½¿ç”¨</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä»ä¸Šæ¸¸æ‹‰ä¸‹æ¥</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">rclone <span class="built_in">sync</span> -P work_space:work_space /workshop/work_space/</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä»æœ¬åœ°æäº¤ä¸Šå»</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">rclone <span class="built_in">sync</span> -P /workshop/work_space/ work_space:work_space</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥è¯¢</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">rclone lsd work_space:work_space</span>   </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">rclone <span class="built_in">ls</span> work_space:work_space</span>   </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">blogå¤‡ä»½</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">rclone <span class="built_in">sync</span> -P /workshop/Blog/source/_posts  work_space:work_space/s3_workshop/Blogs</span>  </span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">rclone <span class="built_in">sync</span> -P work_space: /workshop/work_space/ --drive-root-folder-id 1gQg-FNNg2kLR8vnQMV9b5-Mqpro2roMN <span class="comment">#ä¸‹è½½</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">rclone <span class="built_in">sync</span> -P /workshop/work_space/ work_space: --drive-root-folder-id 1gQg-FNNg2kLR8vnQMV9b5-Mqpro2roMN <span class="comment">#ä¸Šä¼ </span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ–°çš„æ–¹æ³•ï¼š<br>
ä½¿ç”¨äº†fishçš„è‡ªå®šä¹‰å‡½æ•°ï¼Œåˆ›å»ºäº†ä¸€ä¸ªworkshopæŒ‡ä»¤</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> workshop --description <span class="string">&quot;Sync local workshop directory with Google Drive&quot;</span></span><br><span class="line">    <span class="built_in">set</span> filter_file ~/.config/rclone/filter-rules.txt</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">set</span> rclone_opts --checkers=16 --transfers=2 --low-level-retries=20</span><br><span class="line"></span><br><span class="line">    switch <span class="variable">$argv</span>[1]</span><br><span class="line">        <span class="keyword">case</span> pull</span><br><span class="line">            <span class="built_in">echo</span> (set_color green)<span class="string">&quot;â¬‡ï¸  Syncing from Google Drive to local...&quot;</span>(set_color normal)</span><br><span class="line">            rclone <span class="built_in">sync</span> -P work_space: /workshop/work_space/ --drive-root-folder-id 1gQg-FNNg2kLR8vnQMV9b5-Mqpro2roMN --filter-from <span class="variable">$filter_file</span> <span class="variable">$rclone_opts</span></span><br><span class="line">            <span class="built_in">echo</span> (set_color green)<span class="string">&quot;âœ… Pull complete.&quot;</span>(set_color normal)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">case</span> push</span><br><span class="line">            <span class="built_in">echo</span> (set_color cyan)<span class="string">&quot;â¬†ï¸  Syncing from local to Google Drive...&quot;</span>(set_color normal)</span><br><span class="line">            rclone <span class="built_in">sync</span> -P /workshop/work_space/ work_space: --drive-root-folder-id 1gQg-FNNg2kLR8vnQMV9b5-Mqpro2roMN --filter-from <span class="variable">$filter_file</span> <span class="variable">$rclone_opts</span></span><br><span class="line">            <span class="built_in">echo</span> (set_color cyan)<span class="string">&quot;âœ… Push complete.&quot;</span>(set_color normal)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;*&#x27;</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;Usage: workshop [subcommand]&quot;</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;&quot;</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;Subcommands:&quot;</span></span><br><span class="line">            <span class="built_in">echo</span> (set_color green)<span class="string">&quot;  pull&quot;</span>(set_color normal)<span class="string">&quot;   Download changes from Google Drive&quot;</span></span><br><span class="line">            <span class="built_in">echo</span> (set_color cyan)<span class="string">&quot;  push&quot;</span>(set_color normal)<span class="string">&quot;   Upload local changes to Google Drive&quot;</span></span><br><span class="line">    end</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<h2 id="optimizationbluemanbluetooth"><a class="markdownIt-Anchor" href="#optimizationbluemanbluetooth"></a> Optimization(blueman)::Bluetooth</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> dnf install bluez gnome-bluetooth</span></span><br><span class="line">ä»“åº“æ›´æ–°å’ŒåŠ è½½ä¸­:</span><br><span class="line">ä»“åº“åŠ è½½å®Œæˆã€‚</span><br><span class="line">Package &quot;bluez-5.84-2.fc42.x86_64&quot; is already installed.</span><br><span class="line">Package &quot;gnome-bluetooth-1:47.1-2.fc42.x86_64&quot; is already installed.</span><br><span class="line"></span><br><span class="line">Nothing to do.</span><br></pre></td></tr></table></figure>
<p>ä½†å‘ç°ä»ç„¶è¯†åˆ«ä¸åˆ°è€³æœºï¼Œ<br>
äºæ˜¯ä½¿ç”¨å¦å¤–ä¸€ä¸ªåŒ…</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> dnf install blueman</span></span><br></pre></td></tr></table></figure>
<p>è¿æ¥æˆåŠŸ</p>
<h2 id="toolvirtualizationvisual-machine"><a class="markdownIt-Anchor" href="#toolvirtualizationvisual-machine"></a> Tool(virtualization)::Visual Machine</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> dnf install @virtualization</span></span><br></pre></td></tr></table></figure>
<h2 id="optimizationtlpbattery"><a class="markdownIt-Anchor" href="#optimizationtlpbattery"></a> Optimization(tlp)::Battery</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> dnf install tlp tlp-rdw</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> tlp.service</span></span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> dnf copr <span class="built_in">enable</span> sunwire/envycontrol</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> dnf install python3-envycontrol</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"> <span class="built_in">sudo</span> envycontrol -q</span></span><br><span class="line">hybrid</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> envycontrol --switch integrated <span class="comment"># é›†æˆæ˜¾å¡æ¨¡å¼</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> envycontrol --switch hybrid <span class="comment"># æ··åˆæ¨¡å¼</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> envycontrol --switch discrete <span class="comment"># ç‹¬æ˜¾ç›´è¿æ¨¡å¼</span></span></span><br></pre></td></tr></table></figure>
<h2 id="tricksystemd-analyze-blameoptimization"><a class="markdownIt-Anchor" href="#tricksystemd-analyze-blameoptimization"></a> Trick(systemd-analyze blame)::Optimization</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">â¯ systemd-analyze blame</span><br><span class="line">5.338s NetworkManager-wait-online.service</span><br><span class="line">4.232s sys-module-fuse.device</span><br><span class="line">4.171s sys-devices-LNXSYSTM:00-LNXSYBUS:00-MSFT0101:00-tpm-tpm0.device</span><br><span class="line">4.171s dev-tpm0.device</span><br><span class="line">4.117s dev-ttyS3.device</span><br><span class="line">4.117s sys-devices-platform-serial8250-serial8250:0-serial8250:0.3-tty-ttyS3.de&gt;</span><br><span class="line">4.115s sys-devices-platform-serial8250-serial8250:0-serial8250:0.2-tty-ttyS2.de&gt;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">æ„Ÿè§‰æ€§èƒ½ä¼˜åŒ–çš„æ—¶å€™ç”¨å¾—åˆ°</span><br></pre></td></tr></table></figure>
<h2 id="toolsnapperbackup"><a class="markdownIt-Anchor" href="#toolsnapperbackup"></a> Tool(snapper)::Backup</h2>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> dnf install snapper python3-dnf-plugin-snapper</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> snapper -c root create-config /</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®ƒä¼šè‡ªåŠ¨è¿›è¡Œå¤‡ä»½</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> snapper list</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">â”‚ ç±»å‹   â”‚ å‰æœŸ <span class="comment"># â”‚ æ—¥æœŸ                               â”‚ ç”¨æˆ· â”‚ æ¸…ç©º     â”‚ æè¿°</span></span></span><br><span class="line">     â”‚ ç”¨æˆ·æ•°æ®</span><br><span class="line">â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><br><span class="line">0 â”‚ single â”‚        â”‚                                    â”‚ root â”‚          â”‚ current  â”‚</span><br><span class="line">1 â”‚ single â”‚        â”‚ 2025å¹´10æœˆ21æ—¥ æ˜ŸæœŸäºŒ 19æ—¶00åˆ†00ç§’ â”‚ root â”‚ timeline â”‚ timeline â”‚</span><br><span class="line">2 â”‚ single â”‚        â”‚ 2025å¹´10æœˆ21æ—¥ æ˜ŸæœŸäºŒ 20æ—¶00åˆ†00ç§’ â”‚ root â”‚ timeline â”‚ timeline â”‚</span><br><span class="line">3 â”‚ single â”‚        â”‚ 2025å¹´10æœˆ21æ—¥ æ˜ŸæœŸäºŒ 21æ—¶00åˆ†00ç§’ â”‚ root â”‚ timeline â”‚ timeline â”‚</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥å‚è€ƒ<a href="https://documentation.suse.com/zh-cn/sles/12-SP5/html/SLES-all/cha-snapper.html">é€šè¿‡ Snapper è¿›è¡Œç³»ç»Ÿæ¢å¤å’Œå¿«ç…§ç®¡ç† | ç®¡ç†æŒ‡å— | SLES 12 SP5</a></p>
<p><code>sudo snapper create --description &quot;è¿›è¡Œé‡è¦æ“ä½œå‰çš„å¤‡ä»½&quot;</code></p>
<h2 id="tooltermiusssh-helper"><a class="markdownIt-Anchor" href="#tooltermiusssh-helper"></a> Tool(Termius)::ssh helper</h2>
<p>å®˜æ–¹åªæä¾›äº†<code>.deb</code>åŒ…ï¼Œå› æ­¤ä½¿ç”¨snapä»“åº“å†…çš„åŒ…</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> snap install termius-app</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ­¤å¤„ä¸æ¨èä½¿ç”¨flatpak,å› ä¸ºæ–‡ä»¶ä¸å…±äº«ä¼šå¯¼è‡´SFTPä¸å¥½ç”¨</p>
</blockquote>
<p>ç„¶åå°±å¯ä»¥å»åº”ç”¨ç¨‹åºé‚£è¾¹æ‰¾åˆ°äº†<br>
<code>termius</code> å¯ä»¥ç™½å«–å­¦ç”Ÿè®¤è¯ï¼Œç”¨githubè´¦æˆ·å…³è”ä¸‹å°±å¯ä»¥äº†</p>
<p>ssh è¿æ¥æœåŠ¡å™¨ï¼Œç„¶åçˆ½ç”¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> dnf install openssh-server</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> systemctl start sshd</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> sshd</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">systemctl daemon-reload</span></span><br></pre></td></tr></table></figure>
<h2 id="trickmtu-testnetwork"><a class="markdownIt-Anchor" href="#trickmtu-testnetwork"></a> Trick(MTU test)::Network</h2>
<p>å› ä¸ºå‘ç°å‘<code>google drive</code>ä¸Šä¼ çš„æ—¶å€™å¾ˆæ…¢ï¼Œåˆšåˆšå¥½çœ‹ä¸€ä¸‹æ˜¯ä¸æ˜¯è¿™ä¸€å—çš„é—®é¢˜</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ping -c 3 -M <span class="keyword">do</span> -s 1453 8.8.8.8</span></span><br><span class="line">ping: sendmsg: æ¶ˆæ¯è¿‡é•¿</span><br><span class="line">PING 8.8.8.8 (8.8.8.8) 1453(1481) å­—èŠ‚çš„æ•°æ®ã€‚</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ping -c 3 -M <span class="keyword">do</span> -s 1452 8.8.8.8</span></span><br><span class="line">PING 8.8.8.8 (8.8.8.8) 1452(1480) å­—èŠ‚çš„æ•°æ®ã€‚</span><br><span class="line">1460 å­—èŠ‚ï¼Œæ¥è‡ª 8.8.8.8: icmp_seq=1 ttl=112 æ—¶é—´=45.7 æ¯«ç§’</span><br></pre></td></tr></table></figure>
<p>å°è¯•å‡ºæ¥å‘ç°æœ€å¤§MTUæ˜¯<strong>1480</strong><br>
å› æ­¤<code>clash-verge</code>é‡Œé¢è®¾ç½®çš„1500è¶…è¿‡äº†é™åº¦ï¼Œæœ‰æ—¶å€™ä¼šå‡ºé—®é¢˜ï¼Œå¯ä»¥æ‰‹åŠ¨ä¿®æ”¹ï¼Œé¡ºæ‰‹æŠŠ<code>tun</code>æ¨¡å¼æ¢æˆäº†<code>System</code>,å› ä¸º<code>System</code>å¿«å•Š</p>
<blockquote>
<p>å¥½åƒæ˜¯å› ä¸ºICMPå’ŒTCPçš„åŒºåˆ«ï¼Œåˆšå¥½å°‘äº†20çš„å¤´ï¼Œé‚£å¥½åƒå…¶å®1500ä¹Ÿæ˜¯åˆç†çš„<br>
å‘œå‘œæœ‰æ²¡æœ‰å¤§ç¥æ•™æˆ‘è®¡ç½‘</p>
</blockquote>
<h2 id="previewdesktopå˜¿å˜¿å˜¿"><a class="markdownIt-Anchor" href="#previewdesktopå˜¿å˜¿å˜¿"></a> Preview(Desktop)::å˜¿å˜¿å˜¿</h2>
<p><img src="/My-Fedora-Journey/desktop.png" alt="desktop"><br>
<s>æˆ‘ä¸æ˜¯ç¦ç‘æ§ğŸ¾</s></p>
]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>fedora</tag>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Fast-Learning-FastAPI</title>
    <url>/Fast-Learning-FastAPI/</url>
    <content><![CDATA[<h1 id="fastapi"><a class="markdownIt-Anchor" href="#fastapi"></a> FastAPI</h1>
<p><code>pip install fastapi uvicorn</code></p>
<h2 id="part-1-ç®€å•åˆ›å»º"><a class="markdownIt-Anchor" href="#part-1-ç®€å•åˆ›å»º"></a> part 1 <strong>ç®€å•åˆ›å»º</strong></h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#hello_world.py</span></span><br><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI</span><br><span class="line"><span class="keyword">import</span> uvicorn</span><br><span class="line"></span><br><span class="line">app = FastAPI()</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">read_root</span>():</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;Hello&quot;</span>: <span class="string">&quot;World&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    uvicorn.run(app)</span><br><span class="line">    </span><br><span class="line"><span class="comment">#*æˆ–è€…åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨uvicorn main:app --reload</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æ·»åŠ <code>@app.get</code>éƒ¨åˆ†</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/items/&#123;item_id&#125;&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">read_item</span>(<span class="params">item_id: <span class="built_in">int</span></span>):</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;item_id&quot;</span>: item_id&#125;</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶è®¿é—®<a href="http://127.0.0.1:8000/items/5">http://127.0.0.1:8000/items/5</a>    ï¼Œä¼šå‘ç°è¿”å›äº†<code>{&quot;item_id&quot;:5}</code>,</p>
<p>å¦‚æœè®¿é—®çš„æ˜¯<a href="http://127.0.0.1:8000/items/sast">127.0.0.1:8000/items/sast </a>   ï¼Œä¼šå‘ç°è¿”å›çš„æ˜¯<code>{&quot;detail&quot;:[{&quot;type&quot;:&quot;int_parsing&quot;,&quot;loc&quot;:[&quot;path&quot;,&quot;item_id&quot;],&quot;msg&quot;:&quot;Input should be a valid integer, unable to parse string as an integer&quot;,&quot;input&quot;:&quot;sast&quot;}]}</code></p>
<p>æˆ‘ä»¬åœ¨<code>item_id</code>å¤„ä½¿ç”¨æ³¨è§£è¦æ±‚å…¶ä¸º<code>int</code>ç±»å‹ï¼Œèƒ½çœ‹åˆ°å®ƒä¼šè‡ªåŠ¨æ£€éªŒã€‚</p>
<p>å†å‘ä»£ç ä¸­æ·»åŠ </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">fake_items_db = [&#123;<span class="string">&quot;item_name&quot;</span>: <span class="string">&quot;Foo&quot;</span>&#125;, &#123;<span class="string">&quot;item_name&quot;</span>: <span class="string">&quot;Bar&quot;</span>&#125;, &#123;<span class="string">&quot;item_name&quot;</span>: <span class="string">&quot;Baz&quot;</span>&#125;]</span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/items/&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">read_fake_item</span>(<span class="params">skip: <span class="built_in">int</span> = <span class="number">0</span>, limit: <span class="built_in">int</span> = <span class="number">10</span></span>):</span><br><span class="line">    <span class="keyword">return</span> fake_items_db[skip : skip + limit]</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶è®¿é—®<a href="http://127.0.0.1:8000/items/?skip=0&amp;limit=2">http://127.0.0.1:8000/items/?skip=0&amp;limit=2</a>    ï¼Œä¼šå‘ç°è¿”å›æ˜¯<code>[{&quot;item_name&quot;:&quot;Foo&quot;},{&quot;item_name&quot;:&quot;Bar&quot;}]</code></p>
<h2 id="part-2-å“åº”æ¨¡å‹"><a class="markdownIt-Anchor" href="#part-2-å“åº”æ¨¡å‹"></a> part 2 <strong>å“åº”æ¨¡å‹</strong></h2>
<p><strong>è¯·æ±‚ä½“å’Œ Pydantic æ¨¡å‹</strong></p>
<p>ä¸ºäº†å®šä¹‰è¯·æ±‚ä½“çš„ç»“æ„ï¼ŒFastAPI ä½¿ç”¨äº† Pydantic åº“ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI</span><br><span class="line"><span class="keyword">from</span> pydantic <span class="keyword">import</span> BaseModel</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Item</span>(<span class="title class_ inherited__">BaseModel</span>):</span><br><span class="line">    name: <span class="built_in">str</span></span><br><span class="line">    description: <span class="built_in">str</span> | <span class="literal">None</span> = <span class="literal">None</span></span><br><span class="line">    price: <span class="built_in">float</span></span><br><span class="line">    tax: <span class="built_in">float</span> | <span class="literal">None</span> = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">app = FastAPI()</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.post(<span class="params"><span class="string">&quot;/items/&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">create_item</span>(<span class="params">item: Item</span>):</span><br><span class="line">    <span class="keyword">return</span> item</span><br></pre></td></tr></table></figure>
<p>ç„¶åä¹Ÿå¯ä»¥é¡ºæ‰‹ç”¨<code>requests</code>åº“æ¥éªŒè¯ä¸€ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;http://127.0.0.1:8000/items/&quot;</span></span><br><span class="line"></span><br><span class="line">my_item = &#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;111test&quot;</span>,</span><br><span class="line">  <span class="string">&quot;description&quot;</span>: <span class="string">&quot;null&quot;</span>,</span><br><span class="line">  <span class="string">&quot;price&quot;</span>: <span class="number">1145.14</span>,</span><br><span class="line">  <span class="string">&quot;tax&quot;</span>: <span class="number">666.25</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">response = requests.post(url, json=my_item)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;çŠ¶æ€ç  (Status Code):&quot;</span>, response.status_code)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;å“åº”å†…å®¹ (Response JSON):&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(response.json())</span><br></pre></td></tr></table></figure>
<p><code>çŠ¶æ€ç  (Status Code): 200 å“åº”å†…å®¹ (Response JSON): {'name': '111test', 'description': 'null', 'price': 1145.14, 'tax': 666.25}</code></p>
<p>æˆ‘ä»¬å¯ä»¥ä¿®æ”¹å“åº”ç»“æœï¼Œä¸ºäº†è®©éƒ¨åˆ†æ•°æ®ä¸å¯è§ä¹‹ç±»çš„</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ItemIn</span>(<span class="title class_ inherited__">BaseModel</span>):</span><br><span class="line">    name: <span class="built_in">str</span></span><br><span class="line">    description: <span class="built_in">str</span> | <span class="literal">None</span> = <span class="literal">None</span></span><br><span class="line">    price: <span class="built_in">float</span></span><br><span class="line">    tax: <span class="built_in">float</span> | <span class="literal">None</span> = <span class="literal">None</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ItemOut</span>(<span class="title class_ inherited__">BaseModel</span>):</span><br><span class="line">    name: <span class="built_in">str</span></span><br><span class="line">    price: <span class="built_in">float</span></span><br><span class="line"></span><br><span class="line">app = FastAPI()</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.post(<span class="params"><span class="string">&quot;/items/&quot;</span>, response_model=ItemOut</span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">create_item</span>(<span class="params">item: ItemIn</span>):</span><br><span class="line">    <span class="keyword">return</span> item</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ç”¨ç›¸åŒçš„æµ‹è¯•ä¼šå‘ç°æ˜¯<code>{'name': '111test', 'price': 1145.14}</code></p>
<h2 id="part-3-ä¾èµ–æ³¨å…¥"><a class="markdownIt-Anchor" href="#part-3-ä¾èµ–æ³¨å…¥"></a> part 3 <strong>ä¾èµ–æ³¨å…¥</strong></h2>
<p><code>Depends</code> ä¼šå‘Šè¯‰ <code>FastAPI</code>ï¼Œ``read_items<code>å‡½æ•°ä¾èµ–äº</code>common_parameters` å‡½æ•°çš„è¿”å›å€¼ã€‚å®ƒçš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äº <strong>ä»£ç å¤ç”¨</strong> å’Œ <strong>é€»è¾‘åˆ†ç¦»</strong>ã€‚</p>
<h3 id="31-å…±äº«é€šç”¨å‚æ•°"><a class="markdownIt-Anchor" href="#31-å…±äº«é€šç”¨å‚æ•°"></a> 3.1 å…±äº«é€šç”¨å‚æ•°</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> Depends, FastAPI</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> Annotated</span><br><span class="line"></span><br><span class="line">app = FastAPI()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™æ˜¯ä¸€ä¸ªâ€œä¾èµ–é¡¹â€å‡½æ•°</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">common_parameters</span>(<span class="params">q: <span class="built_in">str</span> | <span class="literal">None</span> = <span class="literal">None</span>, skip: <span class="built_in">int</span> = <span class="number">0</span>, limit: <span class="built_in">int</span> = <span class="number">100</span></span>):</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;q&quot;</span>: q, <span class="string">&quot;skip&quot;</span>: skip, <span class="string">&quot;limit&quot;</span>: limit&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Python 3.9+ æ¨èä½¿ç”¨ Annotated æ¥ç»„ç»‡ Depends</span></span><br><span class="line"><span class="comment"># CommonsDep çš„æ„æ€å°±æ˜¯ï¼šæˆ‘éœ€è¦ä¸€ä¸ª dictï¼Œè¿™ä¸ª dict æ˜¯é€šè¿‡è°ƒç”¨ common_parameters å‡½æ•°å¾—åˆ°çš„</span></span><br><span class="line">CommonsDep = Annotated[<span class="built_in">dict</span>, Depends(common_parameters)]</span><br><span class="line"></span><br><span class="line">fake_items_db = [&#123;<span class="string">&quot;item_name&quot;</span>: <span class="string">&quot;Foo&quot;</span>&#125;, &#123;<span class="string">&quot;item_name&quot;</span>: <span class="string">&quot;Bar&quot;</span>&#125;, &#123;<span class="string">&quot;item_name&quot;</span>: <span class="string">&quot;Baz&quot;</span>&#125;]</span><br><span class="line">fake_users_db = [&#123;<span class="string">&quot;user_name&quot;</span>: <span class="string">&quot;Alice&quot;</span>&#125;, &#123;<span class="string">&quot;user_name&quot;</span>: <span class="string">&quot;Bob&quot;</span>&#125;, &#123;<span class="string">&quot;user_name&quot;</span>: <span class="string">&quot;Charlie&quot;</span>&#125;]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/items/&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">read_items</span>(<span class="params">commons: CommonsDep</span>):</span><br><span class="line">    <span class="comment"># commons å‚æ•°ç°åœ¨å°±æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œæ¯”å¦‚ &#123;&quot;q&quot;: None, &quot;skip&quot;: 0, &quot;limit&quot;: 100&#125;</span></span><br><span class="line">    response = &#123;&#125;</span><br><span class="line">    <span class="keyword">if</span> commons[<span class="string">&quot;q&quot;</span>]:</span><br><span class="line">        response.update(&#123;<span class="string">&quot;query&quot;</span>: commons[<span class="string">&quot;q&quot;</span>]&#125;)</span><br><span class="line">    </span><br><span class="line">    items = fake_items_db[commons[<span class="string">&quot;skip&quot;</span>] : commons[<span class="string">&quot;skip&quot;</span>] + commons[<span class="string">&quot;limit&quot;</span>]]</span><br><span class="line">    response.update(&#123;<span class="string">&quot;items&quot;</span>: items&#125;)</span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/users/&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">read_users</span>(<span class="params">commons: CommonsDep</span>):</span><br><span class="line">    <span class="comment"># read_users å‡½æ•°ä¹Ÿè½»æ¾åœ°å¤ç”¨äº†åˆ†é¡µå’ŒæŸ¥è¯¢é€»è¾‘</span></span><br><span class="line">    response = &#123;&#125;</span><br><span class="line">    <span class="keyword">if</span> commons[<span class="string">&quot;q&quot;</span>]:</span><br><span class="line">        response.update(&#123;<span class="string">&quot;query&quot;</span>: commons[<span class="string">&quot;q&quot;</span>]&#125;)</span><br><span class="line">    </span><br><span class="line">    users = fake_users_db[commons[<span class="string">&quot;skip&quot;</span>] : commons[<span class="string">&quot;skip&quot;</span>] + commons[<span class="string">&quot;limit&quot;</span>]]</span><br><span class="line">    response.update(&#123;<span class="string">&quot;users&quot;</span>: users&#125;)</span><br><span class="line">    <span class="keyword">return</span> response</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ï¼Œ<code>/items/ </code>å’Œ <code>/users/</code> ä¸¤ä¸ªç«¯ç‚¹éƒ½æ‹¥æœ‰äº†åŒæ ·çš„åˆ†é¡µå’ŒæŸ¥è¯¢èƒ½åŠ›ï¼Œè€Œæˆ‘ä»¬åªå†™äº†ä¸€æ¬¡æ ¸å¿ƒé€»è¾‘ã€‚è¿™å°±æ˜¯ä¾èµ–æ³¨å…¥æœ€ç›´è§‚çš„å¥½å¤„ã€‚</p>
<h3 id="32-ä¾èµ–é¡¹ä½œä¸ºå®ˆå«"><a class="markdownIt-Anchor" href="#32-ä¾èµ–é¡¹ä½œä¸ºå®ˆå«"></a> 3.2 ä¾èµ–é¡¹ä½œä¸ºâ€œå®ˆå«â€</h3>
<p>ä¾èµ–æ³¨å…¥ä¸€ä¸ªæ›´å¼ºå¤§çš„ç”¨é€”æ˜¯å¤„ç†è®¤è¯å’Œæˆæƒ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> Header, HTTPException</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">verify_token</span>(<span class="params">x_token: Annotated[<span class="built_in">str</span>, Header(<span class="params"></span>)]</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    è¿™ä¸ªä¾èµ–é¡¹ä¼šæ£€æŸ¥è¯·æ±‚å¤´ä¸­æ˜¯å¦åŒ…å« &#x27;X-Token&#x27;ï¼Œå¹¶ä¸”å€¼æ˜¯å¦ä¸º &#x27;fake-super-secret-token&#x27;</span></span><br><span class="line"><span class="string">    Header() å‘Šè¯‰ FastAPI è¿™ä¸ªå‚æ•°è¦ä»è¯·æ±‚å¤´é‡Œè·å–ã€‚</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> x_token != <span class="string">&quot;fake-super-secret-token&quot;</span>:</span><br><span class="line">        <span class="keyword">raise</span> HTTPException(status_code=<span class="number">400</span>, detail=<span class="string">&quot;X-Token header invalid&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> x_token</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/protected-route/&quot;</span>, dependencies=[Depends(<span class="params">verify_token</span>)]</span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">read_protected_route</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    è¿™ä¸ªç«¯ç‚¹è¢«ä¾èµ–é¡¹ä¿æŠ¤èµ·æ¥äº†ã€‚</span></span><br><span class="line"><span class="string">    åªæœ‰å½“è¯·æ±‚å¤´åŒ…å« X-Token: fake-super-secret-token æ—¶ï¼Œæ‰èƒ½è®¿é—®æˆåŠŸã€‚</span></span><br><span class="line"><span class="string">    å¦åˆ™ï¼Œå®¢æˆ·ç«¯ä¼šç›´æ¥æ”¶åˆ° 400 é”™è¯¯ã€‚</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;message&quot;</span>: <span class="string">&quot;Welcome, you have the correct token!&quot;</span>&#125;</span><br></pre></td></tr></table></figure>
<h2 id="part-4-ç»„ç»‡å¤§å‹åº”ç”¨"><a class="markdownIt-Anchor" href="#part-4-ç»„ç»‡å¤§å‹åº”ç”¨"></a> part 4 ç»„ç»‡å¤§å‹åº”ç”¨</h2>
<p>å½“APIè¶Šæ¥è¶Šå¤šï¼ŒæŠŠæ‰€æœ‰ä¸œè¥¿éƒ½å†™åœ¨åŒä¸€ä¸ª <code>main.py</code> æ–‡ä»¶é‡Œä¼šå˜å¾—éš¾ä»¥ç»´æŠ¤ã€‚<code>APIRouter</code> å…è®¸ä½ å°†APIæŒ‰åŠŸèƒ½æ¨¡å—æ‹†åˆ†åˆ°ä¸åŒçš„æ–‡ä»¶ä¸­ã€‚</p>
<p>æ–‡ä»¶æ ‘å¦‚ä¸‹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/my_app</span><br><span class="line">|-- /routers</span><br><span class="line">|   |-- items.py</span><br><span class="line">|   |-- users.py</span><br><span class="line">|-- main.py</span><br></pre></td></tr></table></figure>
<p>ç„¶åå†…å®¹å¦‚ä¸‹</p>
<p><code>routers/items.py</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># routers/items.py</span></span><br><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> APIRouter, HTTPException</span><br><span class="line"><span class="keyword">from</span> pydantic <span class="keyword">import</span> BaseModel</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Item</span>(<span class="title class_ inherited__">BaseModel</span>):</span><br><span class="line">    name: <span class="built_in">str</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. åˆ›å»ºä¸€ä¸ª APIRouter å®ä¾‹</span></span><br><span class="line">router = APIRouter(</span><br><span class="line">    prefix=<span class="string">&quot;/items&quot;</span>,            <span class="comment"># ä¸ºè¿™ä¸ªè·¯ç”±ä¸‹çš„æ‰€æœ‰è·¯å¾„æ·»åŠ URLå‰ç¼€</span></span><br><span class="line">    tags=[<span class="string">&quot;Items&quot;</span>],             <span class="comment"># åœ¨APIæ–‡æ¡£ä¸­ä¸ºå®ƒä»¬åˆ†ç»„</span></span><br><span class="line">    responses=&#123;<span class="number">404</span>: &#123;<span class="string">&quot;description&quot;</span>: <span class="string">&quot;Item not found&quot;</span>&#125;&#125;, <span class="comment"># ç»Ÿä¸€çš„é”™è¯¯å“åº”</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">fake_items_db = [&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;Foo&quot;</span>&#125;, &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;Bar&quot;</span>&#125;, &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;Baz&quot;</span>&#125;]</span><br><span class="line"></span><br><span class="line"><span class="meta">@router.get(<span class="params"><span class="string">&quot;/&quot;</span>, response_model=<span class="type">List</span>[Item]</span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">read_items</span>(<span class="params">skip: <span class="built_in">int</span> = <span class="number">0</span>, limit: <span class="built_in">int</span> = <span class="number">10</span></span>):</span><br><span class="line">    <span class="keyword">return</span> fake_items_db[skip : skip + limit]</span><br><span class="line"></span><br><span class="line"><span class="meta">@router.get(<span class="params"><span class="string">&quot;/&#123;item_id&#125;&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">read_item</span>(<span class="params">item_id: <span class="built_in">int</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    æ ¹æ®IDè·å–å•ä¸ªç‰©å“ã€‚</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># åœ¨çœŸå®åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šæ˜¯æ•°æ®åº“æŸ¥è¯¢</span></span><br><span class="line">    <span class="keyword">if</span> item_id &gt;= <span class="built_in">len</span>(fake_items_db) <span class="keyword">or</span> item_id &lt; <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">raise</span> HTTPException(status_code=<span class="number">404</span>, detail=<span class="string">&quot;Item not found&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> fake_items_db[item_id]</span><br></pre></td></tr></table></figure>
<p><code>routers/users.py</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># routers/users.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> APIRouter, HTTPException</span><br><span class="line"><span class="keyword">from</span> pydantic <span class="keyword">import</span> BaseModel, EmailStr</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span>, <span class="type">Optional</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserBase</span>(<span class="title class_ inherited__">BaseModel</span>):</span><br><span class="line">    username: <span class="built_in">str</span></span><br><span class="line">    email: EmailStr  <span class="comment"># Pydanticå†…ç½®çš„EmailéªŒè¯ç±»å‹</span></span><br><span class="line">    full_name: <span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserCreate</span>(<span class="title class_ inherited__">UserBase</span>):</span><br><span class="line">    password: <span class="built_in">str</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserPublic</span>(<span class="title class_ inherited__">UserBase</span>):</span><br><span class="line">    <span class="built_in">id</span>: <span class="built_in">int</span></span><br><span class="line">    is_active: <span class="built_in">bool</span></span><br><span class="line"></span><br><span class="line">router = APIRouter(</span><br><span class="line">    prefix=<span class="string">&quot;/users&quot;</span>,</span><br><span class="line">    tags=[<span class="string">&quot;Users&quot;</span>],</span><br><span class="line">    responses=&#123;<span class="number">404</span>: &#123;<span class="string">&quot;description&quot;</span>: <span class="string">&quot;User not found&quot;</span>&#125;&#125;,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">fake_users_db = &#123;</span><br><span class="line">    <span class="number">1</span>: &#123;</span><br><span class="line">        <span class="string">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;username&quot;</span>: <span class="string">&quot;john.doe&quot;</span>,</span><br><span class="line">        <span class="string">&quot;email&quot;</span>: <span class="string">&quot;john.doe@example.com&quot;</span>,</span><br><span class="line">        <span class="string">&quot;full_name&quot;</span>: <span class="string">&quot;John Doe&quot;</span>,</span><br><span class="line">        <span class="string">&quot;hashed_password&quot;</span>: <span class="string">&quot;fake_hashed_password_123&quot;</span>, <span class="comment"># æ¨¡æ‹Ÿå­˜å‚¨çš„æ˜¯å“ˆå¸Œåçš„å¯†ç </span></span><br><span class="line">        <span class="string">&quot;is_active&quot;</span>: <span class="literal">True</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="number">2</span>: &#123;</span><br><span class="line">        <span class="string">&quot;id&quot;</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="string">&quot;username&quot;</span>: <span class="string">&quot;jane.smith&quot;</span>,</span><br><span class="line">        <span class="string">&quot;email&quot;</span>: <span class="string">&quot;jane.smith@example.com&quot;</span>,</span><br><span class="line">        <span class="string">&quot;full_name&quot;</span>: <span class="string">&quot;Jane Smith&quot;</span>,</span><br><span class="line">        <span class="string">&quot;hashed_password&quot;</span>: <span class="string">&quot;another_fake_password_456&quot;</span>,</span><br><span class="line">        <span class="string">&quot;is_active&quot;</span>: <span class="literal">False</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@router.get(<span class="params"><span class="string">&quot;/&quot;</span>, response_model=<span class="type">List</span>[UserPublic]</span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">read_users</span>(<span class="params">skip: <span class="built_in">int</span> = <span class="number">0</span>, limit: <span class="built_in">int</span> = <span class="number">10</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    è·å–ä¸€ä¸ªç”¨æˆ·åˆ—è¡¨ï¼ŒåŒæ ·æ”¯æŒåˆ†é¡µã€‚</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    users_list = <span class="built_in">list</span>(fake_users_db.values())</span><br><span class="line">    <span class="keyword">return</span> users_list[skip : skip + limit]</span><br><span class="line"></span><br><span class="line"><span class="meta">@router.post(<span class="params"><span class="string">&quot;/&quot;</span>, response_model=UserPublic, status_code=<span class="number">201</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">create_user</span>(<span class="params">user: UserCreate</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    åˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·ã€‚</span></span><br><span class="line"><span class="string">    åœ¨çœŸå®ä¸–ç•Œä¸­ï¼Œä½ ä¼šåœ¨è¿™é‡Œå“ˆå¸Œå¯†ç ï¼Œç„¶åå­˜å…¥æ•°æ®åº“ã€‚</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    new_user_id = <span class="built_in">max</span>(fake_users_db.keys()) + <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    db_user = &#123;</span><br><span class="line">        <span class="string">&quot;id&quot;</span>: new_user_id,</span><br><span class="line">        <span class="string">&quot;username&quot;</span>: user.username,</span><br><span class="line">        <span class="string">&quot;email&quot;</span>: user.email,</span><br><span class="line">        <span class="string">&quot;full_name&quot;</span>: user.full_name,</span><br><span class="line">        <span class="string">&quot;hashed_password&quot;</span>: <span class="string">f&quot;hashed_<span class="subst">&#123;user.password&#125;</span>&quot;</span>, <span class="comment"># å‡è£…å“ˆå¸Œäº†å¯†ç </span></span><br><span class="line">        <span class="string">&quot;is_active&quot;</span>: <span class="literal">True</span>, </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    fake_users_db[new_user_id] = db_user</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> db_user</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@router.get(<span class="params"><span class="string">&quot;/&#123;user_id&#125;&quot;</span>, response_model=UserPublic</span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">read_user</span>(<span class="params">user_id: <span class="built_in">int</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    æ ¹æ®IDè·å–å•ä¸ªç”¨æˆ·ä¿¡æ¯ã€‚</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> user_id <span class="keyword">not</span> <span class="keyword">in</span> fake_users_db:</span><br><span class="line">        <span class="keyword">raise</span> HTTPException(status_code=<span class="number">404</span>, detail=<span class="string">&quot;User not found&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> fake_users_db[user_id]</span><br></pre></td></tr></table></figure>
<p><code>main.py</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># main.py</span></span><br><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI</span><br><span class="line"><span class="keyword">from</span> routers <span class="keyword">import</span> items, users  <span class="comment"># &lt;-- åœ¨è¿™é‡Œå¯¼å…¥ users</span></span><br><span class="line"></span><br><span class="line">app = FastAPI(title=<span class="string">&quot;æˆ‘çš„æ¨¡å—åŒ–å¤§å‹åº”ç”¨&quot;</span>)</span><br><span class="line"></span><br><span class="line">app.include_router(items.router)</span><br><span class="line">app.include_router(users.router)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">root</span>():</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;message&quot;</span>: <span class="string">&quot;Welcome to the main application&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ ==<span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="keyword">import</span> uvicorn</span><br><span class="line">    uvicorn.run(app)</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>æ€è€ƒ</strong>ï¼šç›®å‰itemså’Œusersçš„æ•°æ®æ˜¯å®Œå…¨éš”ç¦»çš„ï¼Œå¹¶ä¸”æ¯æ¬¡æœåŠ¡å™¨é‡å¯éƒ½ä¼šä¸¢å¤±ã€‚åœ¨çœŸå®åº”ç”¨ä¸­ï¼Œè¿™äº›æ•°æ®åº”è¯¥å­˜æ”¾åœ¨ä¸€ä¸ªå…±äº«çš„ã€æŒä¹…åŒ–çš„æ•°æ®åº“ä¸­ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•å°†FastAPIä¸çœŸå®æ•°æ®åº“è¿æ¥èµ·æ¥ã€‚</p>
</blockquote>
<h2 id="part-5-å¼‚æ­¥æ•°æ®åº“æ“ä½œ"><a class="markdownIt-Anchor" href="#part-5-å¼‚æ­¥æ•°æ®åº“æ“ä½œ"></a> part 5 å¼‚æ­¥æ•°æ®åº“æ“ä½œ</h2>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬éƒ½ä½¿ç”¨<code>Python</code>åˆ—è¡¨æˆ–å­—å…¸ä½œä¸ºå‡æ•°æ®åº“ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•å°†<code>FastAPI</code>ä¸ä¸€ä¸ªçœŸæ­£çš„SQLæ•°æ®åº“ï¼ˆä»¥<code>PostgreSQL</code>ä¸ºä¾‹ï¼‰è¿›è¡Œå¼‚æ­¥äº¤äº’ã€‚</p>
<ul>
<li>[ ] To be continued</li>
</ul>
]]></content>
      <tags>
        <tag>python</tag>
        <tag>FastAPI</tag>
        <tag>Backend</tag>
      </tags>
  </entry>
</search>
